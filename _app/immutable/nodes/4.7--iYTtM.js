import{b as ie}from"../chunks/gJoWLP5d.js";import{f,a as l,c as U}from"../chunks/B1gL-7lK.js";import{a3 as Te,a5 as _e,a6 as Re,a as Ce,Y as u,a0 as o,$ as Ne,g as e,a7 as V,a1 as n,Z as W,_ as Z,a8 as pe}from"../chunks/B2ozAt4z.js";import{d as De,s as M}from"../chunks/cWCuwL6a.js";import{i as y}from"../chunks/Ihk7Vvt8.js";import{e as X,i as $,s as N}from"../chunks/D8ej239B.js";import{h as Oe}from"../chunks/CvM5vjvj.js";import{b as be}from"../chunks/Dw1h4QgV.js";const Ge=async({fetch:q})=>{const[h,v,_,ee]=await Promise.all([q(`${ie}/data/assessment-questions.json`),q(`${ie}/data/risk-subdomains.json`),q(`${ie}/data/risk-domains.json`),q(`${ie}/data/unified-schema.json`)]),ne=await h.json(),D=await v.json(),oe=await _.json(),z=await ee.json(),te={};for(const O of D.riskSubdomains)O.phaseGuidance&&(te[O.id]=O.phaseGuidance);return{questionCategories:ne.questionCategories,phaseMitigations:te,subdomains:D.riskSubdomains,domains:oe.riskDomains,modelTypeRelevance:z.modelTypeToSubdomainRelevance,vulnerabilityMultipliers:z.vulnerabilityMultipliers}},ot=Object.freeze(Object.defineProperty({__proto__:null,load:Ge},Symbol.toStringTag,{value:"Module"}));var Ie=f("<button> </button>"),Je=f('<div class="options svelte-1inzwfd"></div>'),Ye=f("<button> </button>"),Ee=f('<div class="options svelte-1inzwfd"></div>'),Ve=f('<div class="options svelte-1inzwfd"><button>Yes</button> <button>No</button></div>'),Ze=f('<div class="question svelte-1inzwfd"><label class="svelte-1inzwfd"> </label> <!></div>'),qe=f('<div class="category svelte-1inzwfd"><h3 class="svelte-1inzwfd"> </h3> <!></div>'),Be=f('<p class="progress svelte-1inzwfd"> </p>'),Fe=f('<button class="generate-btn svelte-1inzwfd">Copy Protocol</button>'),He=f('<div class="empty svelte-1inzwfd">Select a development phase to identify risks.</div>'),Ke=f('<div class="empty svelte-1inzwfd">Answer more questions to identify applicable risks.</div>'),Le=f('<div class="custom-input svelte-1inzwfd"><textarea placeholder="Enter your custom mitigation plan..." rows="3" class="svelte-1inzwfd"></textarea></div>'),Qe=f('<div class="custom-input svelte-1inzwfd"><textarea placeholder="Justify why this risk is not applicable..." rows="2" class="svelte-1inzwfd"></textarea></div>'),Ue=f('<div><div class="risk-header svelte-1inzwfd"><span class="code svelte-1inzwfd"> </span> <span class="risk-name svelte-1inzwfd"> </span> <span class="domain-tag svelte-1inzwfd"> </span></div> <div class="suggested-mitigation svelte-1inzwfd"><h4 class="svelte-1inzwfd">Suggested Mitigation</h4> <p class="svelte-1inzwfd"> </p></div> <div class="decision-buttons svelte-1inzwfd"><button>Accept</button> <button>Custom</button> <button>N/A</button></div> <!> <!></div>'),We=f('<div class="generator svelte-1inzwfd"><div class="questions-panel svelte-1inzwfd"><div class="panel-header svelte-1inzwfd"><h2 class="svelte-1inzwfd">Assessment</h2></div> <!></div> <div class="risks-panel svelte-1inzwfd"><div class="panel-header svelte-1inzwfd"><div><h2 class="svelte-1inzwfd">Identified Risks</h2> <!></div> <!></div> <!></div></div>');function rt(q,h){Te(h,!0);let v=_e({}),_=_e({});function ee(t){if(!t)return!0;for(const[s,a]of Object.entries(t)){const i=v[s];if(!i)return!1;if(Array.isArray(a)){if(Array.isArray(i)){if(!a.some(c=>i.includes(c)))return!1}else if(!a.includes(i))return!1}else if(Array.isArray(i)){if(!i.includes(a))return!1}else if(i!==a)return!1}return!0}let ne=V(()=>h.data.questionCategories.filter(t=>ee(t.showIf))),D=V(()=>v.phase||""),oe=V(()=>{const t=new Set;for(const i of h.data.questionCategories)for(const c of i.questions){const d=v[c.id];if(!d)continue;const b=c.triggers;if(b){if(Array.isArray(d)){for(const r of d)if(b[r])for(const B of b[r])t.add(B)}else if(b[d])for(const r of b[d])t.add(r)}}const s=v["model-types"]||[];for(const i of s){const c=h.data.modelTypeRelevance[i];if(c)for(const d of c)t.add(d)}const a=v["vulnerable-populations"]||[];for(const i of a){if(i==="none")continue;const c=h.data.vulnerabilityMultipliers[i];if(c?.triggersSubdomains)for(const d of c.triggersSubdomains)t.add(d)}return t}),z=V(()=>{if(!e(D))return[];const t=[];for(const s of h.data.domains)for(const a of s.subdomains){if(!e(oe).has(a))continue;const i=h.data.subdomains.find(d=>d.id===a);if(!i)continue;const c=h.data.phaseMitigations[a]?.[e(D)];c&&t.push({subdomain:i,domain:s,suggestedMitigation:c})}return t});function te(t,s){const a=v[t]||[],i=new Set(a);if(s==="none"){v[t]=["none"];return}i.delete("none"),i.has(s)?i.delete(s):i.add(s),v[t]=Array.from(i)}function O(t,s){_[t]||(_[t]={status:"pending"}),_[t]={..._[t],status:s}}function ge(){let t=`# AI Research Protocol - Risk Mitigation Plan

`;t+=`**Development Phase:** ${e(D).replace("phase-","Phase ")}

`;for(const s of e(z)){const a=_[s.subdomain.id];t+=`## ${s.subdomain.code}: ${s.subdomain.name}
`,t+=`*${s.domain.name}*

`,!a||a.status==="pending"?(t+=`**Status:** Pending review

`,t+=`**Suggested Mitigation:**
${s.suggestedMitigation}

`):a.status==="accepted"?t+=`**Mitigation Plan:**
${s.suggestedMitigation}

`:a.status==="custom"?t+=`**Custom Mitigation Plan:**
${a.customText||"[No custom text provided]"}

`:a.status==="not-applicable"&&(t+=`**Status:** Not Applicable
`,t+=`**Justification:** ${a.justification||"[No justification provided]"}

`)}navigator.clipboard.writeText(t),alert("Protocol copied to clipboard!")}let we=V(()=>e(z).filter(t=>{const s=_[t.subdomain.id];return s&&s.status!=="pending"}).length),he=V(()=>e(D)!=="");var re=We();Oe("1inzwfd",t=>{Ce(()=>{Ne.title="Protocol Generator - AI Oversight Tools"})});var de=o(re),ze=u(o(de),2);X(ze,17,()=>e(ne),$,(t,s)=>{var a=qe(),i=o(a),c=o(i,!0);n(i);var d=u(i,2);X(d,17,()=>e(s).questions,$,(b,r)=>{var B=U(),m=W(B);{var j=P=>{var F=Ze(),G=o(F),K=o(G,!0);n(G);var ce=u(G,2);{var L=x=>{var T=Je();X(T,21,()=>e(r).options,$,(I,R)=>{var S=Ie();let p;S.__click=()=>v[e(r).id]=e(R).value;var g=o(S,!0);n(S),Z(()=>{p=N(S,1,"option svelte-1inzwfd",null,p,{selected:v[e(r).id]===e(R).value}),M(g,e(R).label)}),l(I,S)}),n(T),l(x,T)},ue=x=>{var T=U(),I=W(T);{var R=p=>{var g=Ee();X(g,21,()=>e(r).options,$,(H,k)=>{var w=Ye();let A;w.__click=()=>te(e(r).id,e(k).value);var C=o(w,!0);n(w),Z(J=>{A=N(w,1,"option svelte-1inzwfd",null,A,J),M(C,e(k).label)},[()=>({selected:(v[e(r).id]||[]).includes(e(k).value)})]),l(H,w)}),n(g),l(p,g)},S=p=>{var g=U(),H=W(g);{var k=w=>{var A=Ve(),C=o(A);let J;C.__click=()=>v[e(r).id]="yes";var se=u(C,2);let ae;se.__click=()=>v[e(r).id]="no",n(A),Z(()=>{J=N(C,1,"option svelte-1inzwfd",null,J,{selected:v[e(r).id]==="yes"}),ae=N(se,1,"option svelte-1inzwfd",null,ae,{selected:v[e(r).id]==="no"})}),l(w,A)};y(H,w=>{e(r).type==="yes-no"&&w(k)},!0)}l(p,g)};y(I,p=>{e(r).type==="multi-select"?p(R):p(S,!1)},!0)}l(x,T)};y(ce,x=>{e(r).type==="single-select"?x(L):x(ue,!1)})}n(F),Z(()=>M(K,e(r).question)),l(P,F)};y(m,P=>{ee(e(r).showIf)&&P(j)})}l(b,B)}),n(a),Z(()=>M(c,e(s).name)),l(t,a)}),n(de);var me=u(de,2),le=o(me),ve=o(le),ye=u(o(ve),2);{var xe=t=>{var s=Be(),a=o(s);n(s),Z(()=>M(a,`${e(we)??""} of ${e(z).length??""} addressed`)),l(t,s)};y(ye,t=>{e(z).length>0&&t(xe)})}n(ve);var Se=u(ve,2);{var ke=t=>{var s=Fe();s.__click=ge,l(t,s)};y(Se,t=>{e(z).length>0&&t(ke)})}n(le);var Ae=u(le,2);{var Me=t=>{var s=He();l(t,s)},je=t=>{var s=U(),a=W(s);{var i=d=>{var b=Ke();l(d,b)},c=d=>{var b=U(),r=W(b);X(r,17,()=>e(z),$,(B,m)=>{const j=V(()=>_[e(m).subdomain.id]||{status:"pending"});var P=Ue();let F;var G=o(P),K=o(G),ce=o(K,!0);n(K);var L=u(K,2),ue=o(L,!0);n(L);var x=u(L,2),T=o(x,!0);n(x),n(G);var I=u(G,2),R=u(o(I),2),S=o(R,!0);n(R),n(I);var p=u(I,2),g=o(p);let H;g.__click=()=>O(e(m).subdomain.id,"accepted");var k=u(g,2);let w;k.__click=()=>O(e(m).subdomain.id,"custom");var A=u(k,2);let C;A.__click=()=>O(e(m).subdomain.id,"not-applicable"),n(p);var J=u(p,2);{var se=Y=>{var E=Le(),Q=o(E);pe(Q),n(E),be(Q,()=>_[e(m).subdomain.id].customText,fe=>_[e(m).subdomain.id].customText=fe),l(Y,E)};y(J,Y=>{e(j).status==="custom"&&Y(se)})}var ae=u(J,2);{var Pe=Y=>{var E=Qe(),Q=o(E);pe(Q),n(E),be(Q,()=>_[e(m).subdomain.id].justification,fe=>_[e(m).subdomain.id].justification=fe),l(Y,E)};y(ae,Y=>{e(j).status==="not-applicable"&&Y(Pe)})}n(P),Z(()=>{F=N(P,1,"risk-card svelte-1inzwfd",null,F,{addressed:e(j).status!=="pending"}),M(ce,e(m).subdomain.code),M(ue,e(m).subdomain.shortName),M(T,e(m).domain.name),M(S,e(m).suggestedMitigation),H=N(g,1,"decision-btn accept svelte-1inzwfd",null,H,{active:e(j).status==="accepted"}),w=N(k,1,"decision-btn custom svelte-1inzwfd",null,w,{active:e(j).status==="custom"}),C=N(A,1,"decision-btn na svelte-1inzwfd",null,C,{active:e(j).status==="not-applicable"})}),l(B,P)}),l(d,b)};y(a,d=>{e(z).length===0?d(i):d(c,!1)},!0)}l(t,s)};y(Ae,t=>{e(he)?t(je,!1):t(Me)})}n(me),n(re),l(q,re),Re()}De(["click"]);export{rt as component,ot as universal};
