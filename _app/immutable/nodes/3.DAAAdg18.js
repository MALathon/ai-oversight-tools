import{b as hi}from"../chunks/DNPk8glO.js";import{f as j,a as y,c as rt,t as Mt}from"../chunks/B1gL-7lK.js";import{a3 as In,a0 as c,Y as u,_ as G,a6 as On,a1 as d,g as e,a4 as dt,a5 as tr,o as pn,s as S,Z as le,a as Ds,a7 as z,$ as Cs,a2 as ir,a8 as ki,n as gn,b0 as yn}from"../chunks/B2ozAt4z.js";import{d as Un,s as w,e as rr}from"../chunks/cWCuwL6a.js";import{i as C}from"../chunks/Ihk7Vvt8.js";import{e as nt,i as st,s as ct}from"../chunks/D8ej239B.js";import{h as Ts}from"../chunks/CvM5vjvj.js";import{r as kt,a as Li,s as Wt,b as Rs}from"../chunks/Bw5DiEUF.js";import{s as Is}from"../chunks/itcv0iKE.js";import{a as _n,b as $t}from"../chunks/Dw1h4QgV.js";import{i as Os,s as Us,b as Vt}from"../chunks/QgxjcirX.js";import{b as qs}from"../chunks/DBz3EcEZ.js";const zs=async({fetch:s})=>{const[t,i,r,n,a,o,f,v]=await Promise.all([s(`${hi}/data/assessment-questions.json`),s(`${hi}/data/traceability.json`),s(`${hi}/data/risk-subdomains.json`),s(`${hi}/data/risk-domains.json`),s(`${hi}/data/mitigation-strategies.json`),s(`${hi}/data/cfr-regulations.json`),s(`${hi}/data/technical-controls.json`),s(`${hi}/data/model-types.json`)]),g=await t.json(),_=await i.json(),b=await r.json(),E=await n.json(),O=await a.json(),ne=await o.json(),de=await f.json(),x=await v.json();return{questionCategories:g.questionCategories,traceability:_,subdomains:b.riskSubdomains,domains:E.riskDomains,mitigationCategories:O.mitigationCategories,regulations:ne.regulations,controlCategories:de.controlCategories,controlSubcategories:de.controlSubcategories,controls:de.controls,modelTypes:x.modelTypes}},jd=Object.freeze(Object.defineProperty({__proto__:null,load:zs},Symbol.toStringTag,{value:"Module"}));var Ps=j("<button> </button>"),Ms=j("<option> </option>"),Fs=j('<div class="global-filters svelte-9jwgxy"><div class="filter-group svelte-9jwgxy"><span class="filter-label svelte-9jwgxy">Phase:</span> <div class="phase-filter svelte-9jwgxy"><button>All</button> <!></div></div> <div class="filter-group svelte-9jwgxy"><span class="filter-label svelte-9jwgxy">Tech:</span> <select class="tech-filter svelte-9jwgxy"><option>All Types</option><!></select></div></div>');function Bs(s,t){In(t,!0);var i=Fs(),r=c(i),n=u(c(r),2),a=c(n);a.__click=()=>t.onPhaseChange("all");let o;var f=u(a,2);nt(f,17,()=>t.phases,st,(O,ne)=>{var de=Ps();de.__click=()=>t.onPhaseChange(e(ne).id);let x;var B=c(de,!0);d(de),G(()=>{x=ct(de,1,"svelte-9jwgxy",null,x,{active:t.selectedPhase===e(ne).id}),w(B,e(ne).short)}),y(O,de)}),d(n),d(r);var v=u(r,2),g=u(c(v),2);g.__change=O=>t.onTechTypeChange(O.target.value);var _=c(g);_.value=_.__value="all";var b=u(_);nt(b,17,()=>t.modelTypes,st,(O,ne)=>{var de=Ms(),x=c(de,!0);d(de);var B={};G(()=>{w(x,e(ne).name),B!==(B=e(ne).id)&&(de.value=(de.__value=e(ne).id)??"")}),y(O,de)}),d(g);var E;Os(g),d(v),d(i),G(()=>{o=ct(a,1,"svelte-9jwgxy",null,o,{active:t.selectedPhase==="all"}),E!==(E=t.selectedTechType)&&(g.value=(g.__value=t.selectedTechType)??"",Us(g,t.selectedTechType))}),y(s,i),On()}Un(["click","change"]);var nr={exports:{}},wn;function Ws(){if(wn)return nr.exports;wn=1;var s=typeof Reflect=="object"?Reflect:null,t=s&&typeof s.apply=="function"?s.apply:function(A,D,J){return Function.prototype.apply.call(A,D,J)},i;s&&typeof s.ownKeys=="function"?i=s.ownKeys:Object.getOwnPropertySymbols?i=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:i=function(A){return Object.getOwnPropertyNames(A)};function r(L){console&&console.warn&&console.warn(L)}var n=Number.isNaN||function(A){return A!==A};function a(){a.init.call(this)}nr.exports=a,nr.exports.once=B,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function f(L){if(typeof L!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof L)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(L){if(typeof L!="number"||L<0||n(L))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+L+".");o=L}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||n(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function v(L){return L._maxListeners===void 0?a.defaultMaxListeners:L._maxListeners}a.prototype.getMaxListeners=function(){return v(this)},a.prototype.emit=function(A){for(var D=[],J=1;J<arguments.length;J++)D.push(arguments[J]);var he=A==="error",Pe=this._events;if(Pe!==void 0)he=he&&Pe.error===void 0;else if(!he)return!1;if(he){var me;if(D.length>0&&(me=D[0]),me instanceof Error)throw me;var Ut=new Error("Unhandled error."+(me?" ("+me.message+")":""));throw Ut.context=me,Ut}var ui=Pe[A];if(ui===void 0)return!1;if(typeof ui=="function")t(ui,this,D);else for(var Qi=ui.length,qt=ne(ui,Qi),J=0;J<Qi;++J)t(qt[J],this,D);return!0};function g(L,A,D,J){var he,Pe,me;if(f(D),Pe=L._events,Pe===void 0?(Pe=L._events=Object.create(null),L._eventsCount=0):(Pe.newListener!==void 0&&(L.emit("newListener",A,D.listener?D.listener:D),Pe=L._events),me=Pe[A]),me===void 0)me=Pe[A]=D,++L._eventsCount;else if(typeof me=="function"?me=Pe[A]=J?[D,me]:[me,D]:J?me.unshift(D):me.push(D),he=v(L),he>0&&me.length>he&&!me.warned){me.warned=!0;var Ut=new Error("Possible EventEmitter memory leak detected. "+me.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ut.name="MaxListenersExceededWarning",Ut.emitter=L,Ut.type=A,Ut.count=me.length,r(Ut)}return L}a.prototype.addListener=function(A,D){return g(this,A,D,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(A,D){return g(this,A,D,!0)};function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(L,A,D){var J={fired:!1,wrapFn:void 0,target:L,type:A,listener:D},he=_.bind(J);return he.listener=D,J.wrapFn=he,he}a.prototype.once=function(A,D){return f(D),this.on(A,b(this,A,D)),this},a.prototype.prependOnceListener=function(A,D){return f(D),this.prependListener(A,b(this,A,D)),this},a.prototype.removeListener=function(A,D){var J,he,Pe,me,Ut;if(f(D),he=this._events,he===void 0)return this;if(J=he[A],J===void 0)return this;if(J===D||J.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete he[A],he.removeListener&&this.emit("removeListener",A,J.listener||D));else if(typeof J!="function"){for(Pe=-1,me=J.length-1;me>=0;me--)if(J[me]===D||J[me].listener===D){Ut=J[me].listener,Pe=me;break}if(Pe<0)return this;Pe===0?J.shift():de(J,Pe),J.length===1&&(he[A]=J[0]),he.removeListener!==void 0&&this.emit("removeListener",A,Ut||D)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(A){var D,J,he;if(J=this._events,J===void 0)return this;if(J.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):J[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete J[A]),this;if(arguments.length===0){var Pe=Object.keys(J),me;for(he=0;he<Pe.length;++he)me=Pe[he],me!=="removeListener"&&this.removeAllListeners(me);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=J[A],typeof D=="function")this.removeListener(A,D);else if(D!==void 0)for(he=D.length-1;he>=0;he--)this.removeListener(A,D[he]);return this};function E(L,A,D){var J=L._events;if(J===void 0)return[];var he=J[A];return he===void 0?[]:typeof he=="function"?D?[he.listener||he]:[he]:D?x(he):ne(he,he.length)}a.prototype.listeners=function(A){return E(this,A,!0)},a.prototype.rawListeners=function(A){return E(this,A,!1)},a.listenerCount=function(L,A){return typeof L.listenerCount=="function"?L.listenerCount(A):O.call(L,A)},a.prototype.listenerCount=O;function O(L){var A=this._events;if(A!==void 0){var D=A[L];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function ne(L,A){for(var D=new Array(A),J=0;J<A;++J)D[J]=L[J];return D}function de(L,A){for(;A+1<L.length;A++)L[A]=L[A+1];L.pop()}function x(L){for(var A=new Array(L.length),D=0;D<A.length;++D)A[D]=L[D].listener||L[D];return A}function B(L,A){return new Promise(function(D,J){function he(me){L.removeListener(A,Pe),J(me)}function Pe(){typeof L.removeListener=="function"&&L.removeListener("error",he),D([].slice.call(arguments))}T(L,A,Pe,{once:!0}),A!=="error"&&wt(L,he,{once:!0})})}function wt(L,A,D){typeof L.on=="function"&&T(L,"error",A,D)}function T(L,A,D,J){if(typeof L.on=="function")J.once?L.once(A,D):L.on(A,D);else if(typeof L.addEventListener=="function")L.addEventListener(A,function he(Pe){J.once&&L.removeEventListener(A,he),D(Pe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof L)}return nr.exports}var Ks=Ws();function Js(){const s=arguments[0];for(let t=1,i=arguments.length;t<i;t++)if(arguments[t])for(const r in arguments[t])s[r]=arguments[t][r];return s}let Lt=Js;typeof Object.assign=="function"&&(Lt=Object.assign);function Xt(s,t,i,r){const n=s._nodes.get(t);let a=null;return n&&(r==="mixed"?a=n.out&&n.out[i]||n.undirected&&n.undirected[i]:r==="directed"?a=n.out&&n.out[i]:a=n.undirected&&n.undirected[i]),a}function Ot(s){return typeof s=="object"&&s!==null}function qn(s){let t;for(t in s)return!1;return!0}function Ht(s,t,i){Object.defineProperty(s,t,{enumerable:!1,configurable:!1,writable:!0,value:i})}function ii(s,t,i){const r={enumerable:!0,configurable:!0};typeof i=="function"?r.get=i:(r.value=i,r.writable=!1),Object.defineProperty(s,t,r)}function mn(s){return!(!Ot(s)||s.attributes&&!Array.isArray(s.attributes))}function Qs(){let s=Math.floor(Math.random()*256)&255;return()=>s++}function di(){const s=arguments;let t=null,i=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(t===null){if(i++,i>=s.length)return{done:!0};t=s[i][Symbol.iterator]()}if(r=t.next(),r.done){t=null;continue}break}while(!0);return r}}}function Ri(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class Dr extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class K extends Dr{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,K.prototype.constructor)}}class U extends Dr{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,U.prototype.constructor)}}class re extends Dr{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,re.prototype.constructor)}}function zn(s,t){this.key=s,this.attributes=t,this.clear()}zn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Pn(s,t){this.key=s,this.attributes=t,this.clear()}Pn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Mn(s,t){this.key=s,this.attributes=t,this.clear()}Mn.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ii(s,t,i,r,n){this.key=t,this.attributes=n,this.undirected=s,this.source=i,this.target=r}Ii.prototype.attach=function(){let s="out",t="in";this.undirected&&(s=t="undirected");const i=this.source.key,r=this.target.key;this.source[s][r]=this,!(this.undirected&&i===r)&&(this.target[t][i]=this)};Ii.prototype.attachMulti=function(){let s="out",t="in";const i=this.source.key,r=this.target.key;this.undirected&&(s=t="undirected");const n=this.source[s],a=n[r];if(typeof a>"u"){n[r]=this,this.undirected&&i===r||(this.target[t][i]=this);return}a.previous=this,this.next=a,n[r]=this,this.target[t][i]=this};Ii.prototype.detach=function(){const s=this.source.key,t=this.target.key;let i="out",r="in";this.undirected&&(i=r="undirected"),delete this.source[i][t],delete this.target[r][s]};Ii.prototype.detachMulti=function(){const s=this.source.key,t=this.target.key;let i="out",r="in";this.undirected&&(i=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[i][t],delete this.target[r][s]):(this.next.previous=void 0,this.source[i][t]=this.next,this.target[r][s]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Fn=0,Bn=1,Ys=2,Wn=3;function ci(s,t,i,r,n,a,o){let f,v,g,_;if(r=""+r,i===Fn){if(f=s._nodes.get(r),!f)throw new U(`Graph.${t}: could not find the "${r}" node in the graph.`);g=n,_=a}else if(i===Wn){if(n=""+n,v=s._edges.get(n),!v)throw new U(`Graph.${t}: could not find the "${n}" edge in the graph.`);const b=v.source.key,E=v.target.key;if(r===b)f=v.target;else if(r===E)f=v.source;else throw new U(`Graph.${t}: the "${r}" node is not attached to the "${n}" edge (${b}, ${E}).`);g=a,_=o}else{if(v=s._edges.get(r),!v)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`);i===Bn?f=v.source:f=v.target,g=n,_=a}return[f,g,_]}function Vs(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=ci(this,t,i,r,n,a);return o.attributes[f]}}function Hs(s,t,i){s.prototype[t]=function(r,n){const[a]=ci(this,t,i,r,n);return a.attributes}}function Xs(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=ci(this,t,i,r,n,a);return o.attributes.hasOwnProperty(f)}}function Zs(s,t,i){s.prototype[t]=function(r,n,a,o){const[f,v,g]=ci(this,t,i,r,n,a,o);return f.attributes[v]=g,this.emit("nodeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:v}),this}}function ea(s,t,i){s.prototype[t]=function(r,n,a,o){const[f,v,g]=ci(this,t,i,r,n,a,o);if(typeof g!="function")throw new K(`Graph.${t}: updater should be a function.`);const _=f.attributes,b=g(_[v]);return _[v]=b,this.emit("nodeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:v}),this}}function ta(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=ci(this,t,i,r,n,a);return delete o.attributes[f],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:f}),this}}function ia(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=ci(this,t,i,r,n,a);if(!Ot(f))throw new K(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=f,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function ra(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=ci(this,t,i,r,n,a);if(!Ot(f))throw new K(`Graph.${t}: provided attributes are not a plain object.`);return Lt(o.attributes,f),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:f}),this}}function na(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=ci(this,t,i,r,n,a);if(typeof f!="function")throw new K(`Graph.${t}: provided updater is not a function.`);return o.attributes=f(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const sa=[{name:s=>`get${s}Attribute`,attacher:Vs},{name:s=>`get${s}Attributes`,attacher:Hs},{name:s=>`has${s}Attribute`,attacher:Xs},{name:s=>`set${s}Attribute`,attacher:Zs},{name:s=>`update${s}Attribute`,attacher:ea},{name:s=>`remove${s}Attribute`,attacher:ta},{name:s=>`replace${s}Attributes`,attacher:ia},{name:s=>`merge${s}Attributes`,attacher:ra},{name:s=>`update${s}Attributes`,attacher:na}];function aa(s){sa.forEach(function({name:t,attacher:i}){i(s,t("Node"),Fn),i(s,t("Source"),Bn),i(s,t("Target"),Ys),i(s,t("Opposite"),Wn)})}function oa(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new U(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes[n]}}function la(s,t,i){s.prototype[t]=function(r){let n;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,o=""+arguments[1];if(n=Xt(this,a,o,i),!n)throw new U(`Graph.${t}: could not find an edge for the given path ("${a}" - "${o}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,n=this._edges.get(r),!n)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return n.attributes}}function da(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new U(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes.hasOwnProperty(n)}}function ca(s,t,i){s.prototype[t]=function(r,n,a){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+r,v=""+n;if(n=arguments[2],a=arguments[3],o=Xt(this,f,v,i),!o)throw new U(`Graph.${t}: could not find an edge for the given path ("${f}" - "${v}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[n]=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:n}),this}}function ua(s,t,i){s.prototype[t]=function(r,n,a){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+r,v=""+n;if(n=arguments[2],a=arguments[3],o=Xt(this,f,v,i),!o)throw new U(`Graph.${t}: could not find an edge for the given path ("${f}" - "${v}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof a!="function")throw new K(`Graph.${t}: updater should be a function.`);return o.attributes[n]=a(o.attributes[n]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:n}),this}}function fa(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new U(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete a.attributes[n],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:n}),this}}function ha(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new U(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!Ot(n))throw new K(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=n,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function va(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new U(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!Ot(n))throw new K(`Graph.${t}: provided attributes are not a plain object.`);return Lt(a.attributes,n),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:n}),this}}function pa(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new re(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new re(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new U(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new re(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new U(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof n!="function")throw new K(`Graph.${t}: provided updater is not a function.`);return a.attributes=n(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const ga=[{name:s=>`get${s}Attribute`,attacher:oa},{name:s=>`get${s}Attributes`,attacher:la},{name:s=>`has${s}Attribute`,attacher:da},{name:s=>`set${s}Attribute`,attacher:ca},{name:s=>`update${s}Attribute`,attacher:ua},{name:s=>`remove${s}Attribute`,attacher:fa},{name:s=>`replace${s}Attributes`,attacher:ha},{name:s=>`merge${s}Attributes`,attacher:va},{name:s=>`update${s}Attributes`,attacher:pa}];function ya(s){ga.forEach(function({name:t,attacher:i}){i(s,t("Edge"),"mixed"),i(s,t("DirectedEdge"),"directed"),i(s,t("UndirectedEdge"),"undirected")})}const _a=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function wa(s,t,i,r){let n=!1;for(const a in t){if(a===r)continue;const o=t[a];if(n=i(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),s&&n)return o.key}}function ma(s,t,i,r){let n,a,o,f=!1;for(const v in t)if(v!==r){n=t[v];do{if(a=n.source,o=n.target,f=i(n.key,n.attributes,a.key,o.key,a.attributes,o.attributes,n.undirected),s&&f)return n.key;n=n.next}while(n!==void 0)}}function jr(s,t){const i=Object.keys(s),r=i.length;let n,a=0;return{[Symbol.iterator](){return this},next(){do if(n)n=n.next;else{if(a>=r)return{done:!0};const o=i[a++];if(o===t){n=void 0;continue}n=s[o]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}}}function ba(s,t,i,r){const n=t[i];if(!n)return;const a=n.source,o=n.target;if(r(n.key,n.attributes,a.key,o.key,a.attributes,o.attributes,n.undirected)&&s)return n.key}function ja(s,t,i,r){let n=t[i];if(!n)return;let a=!1;do{if(a=r(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),s&&a)return n.key;n=n.next}while(n!==void 0)}function kr(s,t){let i=s[t];if(i.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!i)return{done:!0};const n={edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected};return i=i.next,{done:!1,value:n}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}})}}}function ka(s,t){if(s.size===0)return[];if(t==="mixed"||t===s.type)return Array.from(s._edges.keys());const i=t==="undirected"?s.undirectedSize:s.directedSize,r=new Array(i),n=t==="undirected",a=s._edges.values();let o=0,f,v;for(;f=a.next(),f.done!==!0;)v=f.value,v.undirected===n&&(r[o++]=v.key);return r}function Kn(s,t,i,r){if(t.size===0)return;const n=i!=="mixed"&&i!==t.type,a=i==="undirected";let o,f,v=!1;const g=t._edges.values();for(;o=g.next(),o.done!==!0;){if(f=o.value,n&&f.undirected!==a)continue;const{key:_,attributes:b,source:E,target:O}=f;if(v=r(_,b,E.key,O.key,E.attributes,O.attributes,f.undirected),s&&v)return _}}function xa(s,t){if(s.size===0)return Ri();const i=t!=="mixed"&&t!==s.type,r=t==="undirected",n=s._edges.values();return{[Symbol.iterator](){return this},next(){let a,o;for(;;){if(a=n.next(),a.done)return a;if(o=a.value,!(i&&o.undirected!==r))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function Cr(s,t,i,r,n,a){const o=t?ma:wa;let f;if(i!=="undirected"&&(r!=="out"&&(f=o(s,n.in,a),s&&f)||r!=="in"&&(f=o(s,n.out,a,r?void 0:n.key),s&&f))||i!=="directed"&&(f=o(s,n.undirected,a),s&&f))return f}function Ea(s,t,i,r){const n=[];return Cr(!1,s,t,i,r,function(a){n.push(a)}),n}function Sa(s,t,i){let r=Ri();return s!=="undirected"&&(t!=="out"&&typeof i.in<"u"&&(r=di(r,jr(i.in))),t!=="in"&&typeof i.out<"u"&&(r=di(r,jr(i.out,t?void 0:i.key)))),s!=="directed"&&typeof i.undirected<"u"&&(r=di(r,jr(i.undirected))),r}function Tr(s,t,i,r,n,a,o){const f=i?ja:ba;let v;if(t!=="undirected"&&(typeof n.in<"u"&&r!=="out"&&(v=f(s,n.in,a,o),s&&v)||typeof n.out<"u"&&r!=="in"&&(r||n.key!==a)&&(v=f(s,n.out,a,o),s&&v))||t!=="directed"&&typeof n.undirected<"u"&&(v=f(s,n.undirected,a,o),s&&v))return v}function Aa(s,t,i,r,n){const a=[];return Tr(!1,s,t,i,r,n,function(o){a.push(o)}),a}function $a(s,t,i,r){let n=Ri();return s!=="undirected"&&(typeof i.in<"u"&&t!=="out"&&r in i.in&&(n=di(n,kr(i.in,r))),typeof i.out<"u"&&t!=="in"&&r in i.out&&(t||i.key!==r)&&(n=di(n,kr(i.out,r)))),s!=="directed"&&typeof i.undirected<"u"&&r in i.undirected&&(n=di(n,kr(i.undirected,r))),n}function Ga(s,t){const{name:i,type:r,direction:n}=t;s.prototype[i]=function(a,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return ka(this,r);if(arguments.length===1){a=""+a;const f=this._nodes.get(a);if(typeof f>"u")throw new U(`Graph.${i}: could not find the "${a}" node in the graph.`);return Ea(this.multi,r==="mixed"?this.type:r,n,f)}if(arguments.length===2){a=""+a,o=""+o;const f=this._nodes.get(a);if(!f)throw new U(`Graph.${i}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(o))throw new U(`Graph.${i}:  could not find the "${o}" target node in the graph.`);return Aa(r,this.multi,n,f,o)}throw new K(`Graph.${i}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Na(s,t){const{name:i,type:r,direction:n}=t,a="forEach"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(g,_,b){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return b=g,Kn(!1,this,r,b);if(arguments.length===2){g=""+g,b=_;const E=this._nodes.get(g);if(typeof E>"u")throw new U(`Graph.${a}: could not find the "${g}" node in the graph.`);return Cr(!1,this.multi,r==="mixed"?this.type:r,n,E,b)}if(arguments.length===3){g=""+g,_=""+_;const E=this._nodes.get(g);if(!E)throw new U(`Graph.${a}:  could not find the "${g}" source node in the graph.`);if(!this._nodes.has(_))throw new U(`Graph.${a}:  could not find the "${_}" target node in the graph.`);return Tr(!1,r,this.multi,n,E,_,b)}throw new K(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+i[0].toUpperCase()+i.slice(1);s.prototype[o]=function(){const g=Array.prototype.slice.call(arguments),_=g.pop();let b;if(g.length===0){let E=0;r!=="directed"&&(E+=this.undirectedSize),r!=="undirected"&&(E+=this.directedSize),b=new Array(E);let O=0;g.push((ne,de,x,B,wt,T,L)=>{b[O++]=_(ne,de,x,B,wt,T,L)})}else b=[],g.push((E,O,ne,de,x,B,wt)=>{b.push(_(E,O,ne,de,x,B,wt))});return this[a].apply(this,g),b};const f="filter"+i[0].toUpperCase()+i.slice(1);s.prototype[f]=function(){const g=Array.prototype.slice.call(arguments),_=g.pop(),b=[];return g.push((E,O,ne,de,x,B,wt)=>{_(E,O,ne,de,x,B,wt)&&b.push(E)}),this[a].apply(this,g),b};const v="reduce"+i[0].toUpperCase()+i.slice(1);s.prototype[v]=function(){let g=Array.prototype.slice.call(arguments);if(g.length<2||g.length>4)throw new K(`Graph.${v}: invalid number of arguments (expecting 2, 3 or 4 and got ${g.length}).`);if(typeof g[g.length-1]=="function"&&typeof g[g.length-2]!="function")throw new K(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let _,b;g.length===2?(_=g[0],b=g[1],g=[]):g.length===3?(_=g[1],b=g[2],g=[g[0]]):g.length===4&&(_=g[2],b=g[3],g=[g[0],g[1]]);let E=b;return g.push((O,ne,de,x,B,wt,T)=>{E=_(E,O,ne,de,x,B,wt,T)}),this[a].apply(this,g),E}}function La(s,t){const{name:i,type:r,direction:n}=t,a="find"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(v,g,_){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return _=v,Kn(!0,this,r,_);if(arguments.length===2){v=""+v,_=g;const b=this._nodes.get(v);if(typeof b>"u")throw new U(`Graph.${a}: could not find the "${v}" node in the graph.`);return Cr(!0,this.multi,r==="mixed"?this.type:r,n,b,_)}if(arguments.length===3){v=""+v,g=""+g;const b=this._nodes.get(v);if(!b)throw new U(`Graph.${a}:  could not find the "${v}" source node in the graph.`);if(!this._nodes.has(g))throw new U(`Graph.${a}:  could not find the "${g}" target node in the graph.`);return Tr(!0,r,this.multi,n,b,g,_)}throw new K(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[o]=function(){const v=Array.prototype.slice.call(arguments),g=v.pop();return v.push((b,E,O,ne,de,x,B)=>g(b,E,O,ne,de,x,B)),!!this[a].apply(this,v)};const f="every"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[f]=function(){const v=Array.prototype.slice.call(arguments),g=v.pop();return v.push((b,E,O,ne,de,x,B)=>!g(b,E,O,ne,de,x,B)),!this[a].apply(this,v)}}function Da(s,t){const{name:i,type:r,direction:n}=t,a=i.slice(0,-1)+"Entries";s.prototype[a]=function(o,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ri();if(!arguments.length)return xa(this,r);if(arguments.length===1){o=""+o;const v=this._nodes.get(o);if(!v)throw new U(`Graph.${a}: could not find the "${o}" node in the graph.`);return Sa(r,n,v)}if(arguments.length===2){o=""+o,f=""+f;const v=this._nodes.get(o);if(!v)throw new U(`Graph.${a}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(f))throw new U(`Graph.${a}:  could not find the "${f}" target node in the graph.`);return $a(r,n,v,f)}throw new K(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Ca(s){_a.forEach(t=>{Ga(s,t),Na(s,t),La(s,t),Da(s,t)})}const Ta=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function cr(){this.A=null,this.B=null}cr.prototype.wrap=function(s){this.A===null?this.A=s:this.B===null&&(this.B=s)};cr.prototype.has=function(s){return this.A!==null&&s in this.A||this.B!==null&&s in this.B};function Ki(s,t,i,r,n){for(const a in r){const o=r[a],f=o.source,v=o.target,g=f===i?v:f;if(t&&t.has(g.key))continue;const _=n(g.key,g.attributes);if(s&&_)return g.key}}function Rr(s,t,i,r,n){if(t!=="mixed"){if(t==="undirected")return Ki(s,null,r,r.undirected,n);if(typeof i=="string")return Ki(s,null,r,r[i],n)}const a=new cr;let o;if(t!=="undirected"){if(i!=="out"){if(o=Ki(s,null,r,r.in,n),s&&o)return o;a.wrap(r.in)}if(i!=="in"){if(o=Ki(s,a,r,r.out,n),s&&o)return o;a.wrap(r.out)}}if(t!=="directed"&&(o=Ki(s,a,r,r.undirected,n),s&&o))return o}function Ra(s,t,i){if(s!=="mixed"){if(s==="undirected")return Object.keys(i.undirected);if(typeof t=="string")return Object.keys(i[t])}const r=[];return Rr(!1,s,t,i,function(n){r.push(n)}),r}function Ji(s,t,i){const r=Object.keys(i),n=r.length;let a=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(a>=n)return s&&s.wrap(i),{done:!0};const f=i[r[a++]],v=f.source,g=f.target;if(o=v===t?g:v,s&&s.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Ia(s,t,i){if(s!=="mixed"){if(s==="undirected")return Ji(null,i,i.undirected);if(typeof t=="string")return Ji(null,i,i[t])}let r=Ri();const n=new cr;return s!=="undirected"&&(t!=="out"&&(r=di(r,Ji(n,i,i.in))),t!=="in"&&(r=di(r,Ji(n,i,i.out)))),s!=="directed"&&(r=di(r,Ji(n,i,i.undirected))),r}function Oa(s,t){const{name:i,type:r,direction:n}=t;s.prototype[i]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new U(`Graph.${i}: could not find the "${a}" node in the graph.`);return Ra(r==="mixed"?this.type:r,n,o)}}function Ua(s,t){const{name:i,type:r,direction:n}=t,a="forEach"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(g,_){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;g=""+g;const b=this._nodes.get(g);if(typeof b>"u")throw new U(`Graph.${a}: could not find the "${g}" node in the graph.`);Rr(!1,r==="mixed"?this.type:r,n,b,_)};const o="map"+i[0].toUpperCase()+i.slice(1);s.prototype[o]=function(g,_){const b=[];return this[a](g,(E,O)=>{b.push(_(E,O))}),b};const f="filter"+i[0].toUpperCase()+i.slice(1);s.prototype[f]=function(g,_){const b=[];return this[a](g,(E,O)=>{_(E,O)&&b.push(E)}),b};const v="reduce"+i[0].toUpperCase()+i.slice(1);s.prototype[v]=function(g,_,b){if(arguments.length<3)throw new K(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let E=b;return this[a](g,(O,ne)=>{E=_(E,O,ne)}),E}}function qa(s,t){const{name:i,type:r,direction:n}=t,a=i[0].toUpperCase()+i.slice(1,-1),o="find"+a;s.prototype[o]=function(g,_){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;g=""+g;const b=this._nodes.get(g);if(typeof b>"u")throw new U(`Graph.${o}: could not find the "${g}" node in the graph.`);return Rr(!0,r==="mixed"?this.type:r,n,b,_)};const f="some"+a;s.prototype[f]=function(g,_){return!!this[o](g,_)};const v="every"+a;s.prototype[v]=function(g,_){return!this[o](g,(E,O)=>!_(E,O))}}function za(s,t){const{name:i,type:r,direction:n}=t,a=i.slice(0,-1)+"Entries";s.prototype[a]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ri();o=""+o;const f=this._nodes.get(o);if(typeof f>"u")throw new U(`Graph.${a}: could not find the "${o}" node in the graph.`);return Ia(r==="mixed"?this.type:r,n,f)}}function Pa(s){Ta.forEach(t=>{Oa(s,t),Ua(s,t),qa(s,t),za(s,t)})}function sr(s,t,i,r,n){const a=r._nodes.values(),o=r.type;let f,v,g,_,b,E;for(;f=a.next(),f.done!==!0;){let O=!1;if(v=f.value,o!=="undirected"){_=v.out;for(g in _){b=_[g];do E=b.target,O=!0,n(v.key,E.key,v.attributes,E.attributes,b.key,b.attributes,b.undirected),b=b.next;while(b)}}if(o!=="directed"){_=v.undirected;for(g in _)if(!(t&&v.key>g)){b=_[g];do E=b.target,E.key!==g&&(E=b.source),O=!0,n(v.key,E.key,v.attributes,E.attributes,b.key,b.attributes,b.undirected),b=b.next;while(b)}}i&&!O&&n(v.key,null,v.attributes,null,null,null,null)}}function Ma(s,t){const i={key:s};return qn(t.attributes)||(i.attributes=Lt({},t.attributes)),i}function Fa(s,t,i){const r={key:t,source:i.source.key,target:i.target.key};return qn(i.attributes)||(r.attributes=Lt({},i.attributes)),s==="mixed"&&i.undirected&&(r.undirected=!0),r}function Ba(s){if(!Ot(s))throw new K('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in s))throw new K("Graph.import: serialized node is missing its key.");if("attributes"in s&&(!Ot(s.attributes)||s.attributes===null))throw new K("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Wa(s){if(!Ot(s))throw new K('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in s))throw new K("Graph.import: serialized edge is missing its source.");if(!("target"in s))throw new K("Graph.import: serialized edge is missing its target.");if("attributes"in s&&(!Ot(s.attributes)||s.attributes===null))throw new K("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in s&&typeof s.undirected!="boolean")throw new K("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Ka=Qs(),Ja=new Set(["directed","undirected","mixed"]),bn=new Set(["domain","_events","_eventsCount","_maxListeners"]),Qa=[{name:s=>`${s}Edge`,generateKey:!0},{name:s=>`${s}DirectedEdge`,generateKey:!0,type:"directed"},{name:s=>`${s}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:s=>`${s}EdgeWithKey`},{name:s=>`${s}DirectedEdgeWithKey`,type:"directed"},{name:s=>`${s}UndirectedEdgeWithKey`,type:"undirected"}],Ya={allowSelfLoops:!0,multi:!1,type:"mixed"};function Va(s,t,i){if(i&&!Ot(i))throw new K(`Graph.addNode: invalid attributes. Expecting an object but got "${i}"`);if(t=""+t,i=i||{},s._nodes.has(t))throw new re(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new s.NodeDataClass(t,i);return s._nodes.set(t,r),s.emit("nodeAdded",{key:t,attributes:i}),r}function jn(s,t,i){const r=new s.NodeDataClass(t,i);return s._nodes.set(t,r),s.emit("nodeAdded",{key:t,attributes:i}),r}function Jn(s,t,i,r,n,a,o,f){if(!r&&s.type==="undirected")throw new re(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&s.type==="directed")throw new re(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(f&&!Ot(f))throw new K(`Graph.${t}: invalid attributes. Expecting an object but got "${f}"`);if(a=""+a,o=""+o,f=f||{},!s.allowSelfLoops&&a===o)throw new re(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const v=s._nodes.get(a),g=s._nodes.get(o);if(!v)throw new U(`Graph.${t}: source node "${a}" not found.`);if(!g)throw new U(`Graph.${t}: target node "${o}" not found.`);const _={key:null,undirected:r,source:a,target:o,attributes:f};if(i)n=s._edgeKeyGenerator();else if(n=""+n,s._edges.has(n))throw new re(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!s.multi&&(r?typeof v.undirected[o]<"u":typeof v.out[o]<"u"))throw new re(`Graph.${t}: an edge linking "${a}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const b=new Ii(r,n,v,g,f);s._edges.set(n,b);const E=a===o;return r?(v.undirectedDegree++,g.undirectedDegree++,E&&(v.undirectedLoops++,s._undirectedSelfLoopCount++)):(v.outDegree++,g.inDegree++,E&&(v.directedLoops++,s._directedSelfLoopCount++)),s.multi?b.attachMulti():b.attach(),r?s._undirectedSize++:s._directedSize++,_.key=n,s.emit("edgeAdded",_),n}function Ha(s,t,i,r,n,a,o,f,v){if(!r&&s.type==="undirected")throw new re(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&s.type==="directed")throw new re(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(f){if(v){if(typeof f!="function")throw new K(`Graph.${t}: invalid updater function. Expecting a function but got "${f}"`)}else if(!Ot(f))throw new K(`Graph.${t}: invalid attributes. Expecting an object but got "${f}"`)}a=""+a,o=""+o;let g;if(v&&(g=f,f=void 0),!s.allowSelfLoops&&a===o)throw new re(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let _=s._nodes.get(a),b=s._nodes.get(o),E,O;if(!i&&(E=s._edges.get(n),E)){if((E.source.key!==a||E.target.key!==o)&&(!r||E.source.key!==o||E.target.key!==a))throw new re(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${a}" source & "${o}" target vs. ("${E.source.key}", "${E.target.key}").`);O=E}if(!O&&!s.multi&&_&&(O=r?_.undirected[o]:_.out[o]),O){const wt=[O.key,!1,!1,!1];if(v?!g:!f)return wt;if(v){const T=O.attributes;O.attributes=g(T),s.emit("edgeAttributesUpdated",{type:"replace",key:O.key,attributes:O.attributes})}else Lt(O.attributes,f),s.emit("edgeAttributesUpdated",{type:"merge",key:O.key,attributes:O.attributes,data:f});return wt}f=f||{},v&&g&&(f=g(f));const ne={key:null,undirected:r,source:a,target:o,attributes:f};if(i)n=s._edgeKeyGenerator();else if(n=""+n,s._edges.has(n))throw new re(`Graph.${t}: the "${n}" edge already exists in the graph.`);let de=!1,x=!1;_||(_=jn(s,a,{}),de=!0,a===o&&(b=_,x=!0)),b||(b=jn(s,o,{}),x=!0),E=new Ii(r,n,_,b,f),s._edges.set(n,E);const B=a===o;return r?(_.undirectedDegree++,b.undirectedDegree++,B&&(_.undirectedLoops++,s._undirectedSelfLoopCount++)):(_.outDegree++,b.inDegree++,B&&(_.directedLoops++,s._directedSelfLoopCount++)),s.multi?E.attachMulti():E.attach(),r?s._undirectedSize++:s._directedSize++,ne.key=n,s.emit("edgeAdded",ne),[n,!0,de,x]}function Di(s,t){s._edges.delete(t.key);const{source:i,target:r,attributes:n}=t,a=t.undirected,o=i===r;a?(i.undirectedDegree--,r.undirectedDegree--,o&&(i.undirectedLoops--,s._undirectedSelfLoopCount--)):(i.outDegree--,r.inDegree--,o&&(i.directedLoops--,s._directedSelfLoopCount--)),s.multi?t.detachMulti():t.detach(),a?s._undirectedSize--:s._directedSize--,s.emit("edgeDropped",{key:t.key,attributes:n,source:i.key,target:r.key,undirected:a})}class gt extends Ks.EventEmitter{constructor(t){if(super(),t=Lt({},Ya,t),typeof t.multi!="boolean")throw new K(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Ja.has(t.type))throw new K(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new K(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const i=t.type==="mixed"?zn:t.type==="directed"?Pn:Mn;Ht(this,"NodeDataClass",i);const r="geid_"+Ka()+"_";let n=0;const a=()=>{let o;do o=r+n++;while(this._edges.has(o));return o};Ht(this,"_attributes",{}),Ht(this,"_nodes",new Map),Ht(this,"_edges",new Map),Ht(this,"_directedSize",0),Ht(this,"_undirectedSize",0),Ht(this,"_directedSelfLoopCount",0),Ht(this,"_undirectedSelfLoopCount",0),Ht(this,"_edgeKeyGenerator",a),Ht(this,"_options",t),bn.forEach(o=>Ht(this,o,this[o])),ii(this,"order",()=>this._nodes.size),ii(this,"size",()=>this._edges.size),ii(this,"directedSize",()=>this._directedSize),ii(this,"undirectedSize",()=>this._undirectedSize),ii(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ii(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ii(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ii(this,"multi",this._options.multi),ii(this,"type",this._options.type),ii(this,"allowSelfLoops",this._options.allowSelfLoops),ii(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,i){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&!n.undirected}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(i):!1}throw new K(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,i){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&n.undirected}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(i):!1}throw new K(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,i){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?typeof r.out<"u"&&r.out.hasOwnProperty(i)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(i):!1}throw new K(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,i){if(this.type==="undirected")return;if(t=""+t,i=""+i,this.multi)throw new re("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new U(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new U(`Graph.directedEdge: could not find the "${i}" target node in the graph.`);const n=r.out&&r.out[i]||void 0;if(n)return n.key}undirectedEdge(t,i){if(this.type==="directed")return;if(t=""+t,i=""+i,this.multi)throw new re("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new U(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new U(`Graph.undirectedEdge: could not find the "${i}" target node in the graph.`);const n=r.undirected&&r.undirected[i]||void 0;if(n)return n.key}edge(t,i){if(this.multi)throw new re("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new U(`Graph.edge: could not find the "${i}" target node in the graph.`);const n=r.out&&r.out[i]||r.undirected&&r.undirected[i]||void 0;if(n)return n.key}areDirectedNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.in||i in r.out}areOutNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.out}areInNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.in}areUndirectedNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:i in r.undirected}areNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(i in r.in||i in r.out)||this.type!=="directed"&&i in r.undirected}areInboundNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in r.in||this.type!=="directed"&&i in r.undirected}areOutboundNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new U(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in r.out||this.type!=="directed"&&i in r.undirected}inDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree}outDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree}directedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree}undirectedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree}inboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.inDegree),r}outboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.outDegree),r}degree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.inDegree+i.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree-i.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree-i.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree-i.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree-i.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.inDegree,n+=i.directedLoops),r-n}outboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.outDegree,n+=i.directedLoops),r-n}degreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.inDegree+i.outDegree,n+=i.directedLoops*2),r-n}source(t){t=""+t;const i=this._edges.get(t);if(!i)throw new U(`Graph.source: could not find the "${t}" edge in the graph.`);return i.source.key}target(t){t=""+t;const i=this._edges.get(t);if(!i)throw new U(`Graph.target: could not find the "${t}" edge in the graph.`);return i.target.key}extremities(t){t=""+t;const i=this._edges.get(t);if(!i)throw new U(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[i.source.key,i.target.key]}opposite(t,i){t=""+t,i=""+i;const r=this._edges.get(i);if(!r)throw new U(`Graph.opposite: could not find the "${i}" edge in the graph.`);const n=r.source.key,a=r.target.key;if(t===n)return a;if(t===a)return n;throw new U(`Graph.opposite: the "${t}" node is not attached to the "${i}" edge (${n}, ${a}).`)}hasExtremity(t,i){t=""+t,i=""+i;const r=this._edges.get(t);if(!r)throw new U(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===i||r.target.key===i}isUndirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new U(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return i.undirected}isDirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new U(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!i.undirected}isSelfLoop(t){t=""+t;const i=this._edges.get(t);if(!i)throw new U(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return i.source===i.target}addNode(t,i){return Va(this,t,i).key}mergeNode(t,i){if(i&&!Ot(i))throw new K(`Graph.mergeNode: invalid attributes. Expecting an object but got "${i}"`);t=""+t,i=i||{};let r=this._nodes.get(t);return r?(i&&(Lt(r.attributes,i),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:i})),[t,!1]):(r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0])}updateNode(t,i){if(i&&typeof i!="function")throw new K(`Graph.updateNode: invalid updater function. Expecting a function but got "${i}"`);t=""+t;let r=this._nodes.get(t);if(r){if(i){const a=r.attributes;r.attributes=i(a),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const n=i?i({}):{};return r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0]}dropNode(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new U(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const n in i.out){r=i.out[n];do Di(this,r),r=r.next;while(r)}for(const n in i.in){r=i.in[n];do Di(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const n in i.undirected){r=i.undirected[n];do Di(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:i.attributes})}dropEdge(t){let i;if(arguments.length>1){const r=""+arguments[0],n=""+arguments[1];if(i=Xt(this,r,n,this.type),!i)throw new U(`Graph.dropEdge: could not find the "${r}" -> "${n}" edge in the graph.`)}else if(t=""+t,i=this._edges.get(t),!i)throw new U(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Di(this,i),this}dropDirectedEdge(t,i){if(arguments.length<2)throw new re("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new re("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,i=""+i;const r=Xt(this,t,i,"directed");if(!r)throw new U(`Graph.dropDirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Di(this,r),this}dropUndirectedEdge(t,i){if(arguments.length<2)throw new re("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new re("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Xt(this,t,i,"undirected");if(!r)throw new U(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Di(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let i;for(;i=t.next(),i.done!==!0;)i.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,i){return this._attributes[t]=i,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,i){if(typeof i!="function")throw new K("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=i(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Ot(t))throw new K("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Ot(t))throw new K("Graph.mergeAttributes: provided attributes are not a plain object.");return Lt(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new K("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,i){if(typeof t!="function")throw new K("Graph.updateEachNodeAttributes: expecting an updater function.");if(i&&!mn(i))throw new K("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let n,a;for(;n=r.next(),n.done!==!0;)a=n.value,a.attributes=t(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:i||null})}updateEachEdgeAttributes(t,i){if(typeof t!="function")throw new K("Graph.updateEachEdgeAttributes: expecting an updater function.");if(i&&!mn(i))throw new K("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let n,a,o,f;for(;n=r.next(),n.done!==!0;)a=n.value,o=a.source,f=a.target,a.attributes=t(a.key,a.attributes,o.key,f.key,o.attributes,f.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:i||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new K("Graph.forEachAdjacencyEntry: expecting a callback.");sr(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new K("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new K("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");sr(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new K("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new K("Graph.forEachNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)}findNode(t){if(typeof t!="function")throw new K("Graph.findNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return n.key}mapNodes(t){if(typeof t!="function")throw new K("Graph.mapNode: expecting a callback.");const i=this._nodes.values();let r,n;const a=new Array(this.order);let o=0;for(;r=i.next(),r.done!==!0;)n=r.value,a[o++]=t(n.key,n.attributes);return a}someNode(t){if(typeof t!="function")throw new K("Graph.someNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new K("Graph.everyNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,!t(n.key,n.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new K("Graph.filterNodes: expecting a callback.");const i=this._nodes.values();let r,n;const a=[];for(;r=i.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)&&a.push(n.key);return a}reduceNodes(t,i){if(typeof t!="function")throw new K("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new K("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=i;const n=this._nodes.values();let a,o;for(;a=n.next(),a.done!==!0;)o=a.value,r=t(r,o.key,o.attributes);return r}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const i=t.next();if(i.done)return i;const r=i.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let i=0;this._nodes.forEach((n,a)=>{t[i++]=Ma(a,n)});const r=new Array(this._edges.size);return i=0,this._edges.forEach((n,a)=>{r[i++]=Fa(this.type,a,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,i=!1){if(t instanceof gt)return t.forEachNode((v,g)=>{i?this.mergeNode(v,g):this.addNode(v,g)}),t.forEachEdge((v,g,_,b,E,O,ne)=>{i?ne?this.mergeUndirectedEdgeWithKey(v,_,b,g):this.mergeDirectedEdgeWithKey(v,_,b,g):ne?this.addUndirectedEdgeWithKey(v,_,b,g):this.addDirectedEdgeWithKey(v,_,b,g)}),this;if(!Ot(t))throw new K("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Ot(t.attributes))throw new K("Graph.import: invalid attributes. Expecting a plain object.");i?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,n,a,o,f;if(t.nodes){if(a=t.nodes,!Array.isArray(a))throw new K("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=a.length;r<n;r++){o=a[r],Ba(o);const{key:v,attributes:g}=o;i?this.mergeNode(v,g):this.addNode(v,g)}}if(t.edges){let v=!1;if(this.type==="undirected"&&(v=!0),a=t.edges,!Array.isArray(a))throw new K("Graph.import: invalid edges. Expecting an array.");for(r=0,n=a.length;r<n;r++){f=a[r],Wa(f);const{source:g,target:_,attributes:b,undirected:E=v}=f;let O;"key"in f?(O=i?E?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:E?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,O.call(this,f.key,g,_,b)):(O=i?E?this.mergeUndirectedEdge:this.mergeDirectedEdge:E?this.addUndirectedEdge:this.addDirectedEdge,O.call(this,g,_,b))}}return this}nullCopy(t){const i=new gt(Lt({},this._options,t));return i.replaceAttributes(Lt({},this.getAttributes())),i}emptyCopy(t){const i=this.nullCopy(t);return this._nodes.forEach((r,n)=>{const a=Lt({},r.attributes);r=new i.NodeDataClass(n,a),i._nodes.set(n,r)}),i}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new re(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new re("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new re("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const i=this.emptyCopy(t),r=this._edges.values();let n,a;for(;n=r.next(),n.done!==!0;)a=n.value,Jn(i,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,Lt({},a.attributes));return i}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((a,o)=>{t[o]=a.attributes});const i={},r={};this._edges.forEach((a,o)=>{const f=a.undirected?"--":"->";let v="",g=a.source.key,_=a.target.key,b;a.undirected&&g>_&&(b=g,g=_,_=b);const E=`(${g})${f}(${_})`;o.startsWith("geid_")?this.multi&&(typeof r[E]>"u"?r[E]=0:r[E]++,v+=`${r[E]}. `):v+=`[${o}]: `,v+=E,i[v]=a.attributes});const n={};for(const a in this)this.hasOwnProperty(a)&&!bn.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(n[a]=this[a]);return n.attributes=this._attributes,n.nodes=t,n.edges=i,Ht(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(gt.prototype[Symbol.for("nodejs.util.inspect.custom")]=gt.prototype.inspect);Qa.forEach(s=>{["add","merge","update"].forEach(t=>{const i=s.name(t),r=t==="add"?Jn:Ha;s.generateKey?gt.prototype[i]=function(n,a,o){return r(this,i,!0,(s.type||this.type)==="undirected",null,n,a,o,t==="update")}:gt.prototype[i]=function(n,a,o,f){return r(this,i,!1,(s.type||this.type)==="undirected",n,a,o,f,t==="update")}})});aa(gt);ya(gt);Ca(gt);Pa(gt);class Qn extends gt{constructor(t){const i=Lt({type:"directed"},t);if("multi"in i&&i.multi!==!1)throw new K("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="directed")throw new K('DirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Yn extends gt{constructor(t){const i=Lt({type:"undirected"},t);if("multi"in i&&i.multi!==!1)throw new K("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="undirected")throw new K('UndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Vn extends gt{constructor(t){const i=Lt({multi:!0},t);if("multi"in i&&i.multi!==!0)throw new K("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(i)}}class Hn extends gt{constructor(t){const i=Lt({type:"directed",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new K("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="directed")throw new K('MultiDirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Xn extends gt{constructor(t){const i=Lt({type:"undirected",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new K("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="undirected")throw new K('MultiUndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}function Oi(s){s.from=function(t,i){const r=Lt({},t.options,i),n=new s(r);return n.import(t),n}}Oi(gt);Oi(Qn);Oi(Yn);Oi(Vn);Oi(Hn);Oi(Xn);gt.Graph=gt;gt.DirectedGraph=Qn;gt.UndirectedGraph=Yn;gt.MultiGraph=Vn;gt.MultiDirectedGraph=Hn;gt.MultiUndirectedGraph=Xn;gt.InvalidArgumentsGraphError=K;gt.NotFoundGraphError=U;gt.UsageGraphError=re;var Ci={},ar={},xr,kn;function Zn(){return kn||(kn=1,xr=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"}),xr}var Ti={},or={},xn;function Xa(){return xn||(xn=1,or.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",or.SYMBOL_SUPPORT=typeof Symbol<"u"),or}var Er,En;function Za(){if(En)return Er;En=1;var s=Xa(),t=s.ARRAY_BUFFER_SUPPORT,i=s.SYMBOL_SUPPORT;return Er=function(n,a){var o,f,v,g,_;if(!n)throw new Error("obliterator/forEach: invalid iterable.");if(typeof a!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(n)||t&&ArrayBuffer.isView(n)||typeof n=="string"||n.toString()==="[object Arguments]"){for(v=0,g=n.length;v<g;v++)a(n[v],v);return}if(typeof n.forEach=="function"){n.forEach(a);return}if(i&&Symbol.iterator in n&&typeof n.next!="function"&&(n=n[Symbol.iterator]()),typeof n.next=="function"){for(o=n,v=0;_=o.next(),_.done!==!0;)a(_.value,v),v++;return}for(f in n)n.hasOwnProperty(f)&&a(n[f],f)},Er}var Sr={},Sn;function eo(){return Sn||(Sn=1,(function(s){var t=Math.pow(2,8)-1,i=Math.pow(2,16)-1,r=Math.pow(2,32)-1,n=Math.pow(2,7)-1,a=Math.pow(2,15)-1,o=Math.pow(2,31)-1;s.getPointerArray=function(v){var g=v-1;if(g<=t)return Uint8Array;if(g<=i)return Uint16Array;if(g<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},s.getSignedPointerArray=function(v){var g=v-1;return g<=n?Int8Array:g<=a?Int16Array:g<=o?Int32Array:Float64Array},s.getNumberType=function(v){return v===(v|0)?Math.sign(v)===-1?v<=127&&v>=-128?Int8Array:v<=32767&&v>=-32768?Int16Array:Int32Array:v<=255?Uint8Array:v<=65535?Uint16Array:Uint32Array:Float64Array};var f={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};s.getMinimalRepresentation=function(v,g){var _=null,b=0,E,O,ne,de,x;for(de=0,x=v.length;de<x;de++)ne=g?g(v[de]):v[de],O=s.getNumberType(ne),E=f[O.name],E>b&&(b=E,_=O);return _},s.isTypedArray=function(v){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(v)},s.concat=function(){var v=0,g,_,b;for(g=0,b=arguments.length;g<b;g++)v+=arguments[g].length;var E=new arguments[0].constructor(v);for(g=0,_=0;g<b;g++)E.set(arguments[g],_),_+=arguments[g].length;return E},s.indices=function(v){for(var g=s.getPointerArray(v),_=new g(v),b=0;b<v;b++)_[b]=b;return _}})(Sr)),Sr}var An;function to(){if(An)return Ti;An=1;var s=Za(),t=eo();function i(o){return Array.isArray(o)||t.isTypedArray(o)}function r(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function n(o){var f=r(o),v=typeof f=="number"?new Array(f):[],g=0;return s(o,function(_){v[g++]=_}),v}function a(o){var f=r(o),v=typeof f=="number"?t.getPointerArray(f):Array,g=typeof f=="number"?new Array(f):[],_=typeof f=="number"?new v(f):[],b=0;return s(o,function(E){g[b]=E,_[b]=b++}),[g,_]}return Ti.isArrayLike=i,Ti.guessLength=r,Ti.toArray=n,Ti.toArrayWithIndices=a,Ti}var Ar,$n;function io(){if($n)return Ar;$n=1;function s(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}return typeof Symbol<"u"&&(s.prototype[Symbol.iterator]=function(){return this}),s.of=function(){var t=arguments,i=t.length,r=0;return new s(function(){return r>=i?{done:!0}:{done:!1,value:t[r++]}})},s.empty=function(){var t=new s(function(){return{done:!0}});return t},s.fromSequence=function(t){var i=0,r=t.length;return new s(function(){return i>=r?{done:!0}:{done:!1,value:t[i++]}})},s.is=function(t){return t instanceof s?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"},Ar=s,Ar}var $r,Gn;function ro(){if(Gn)return $r;Gn=1;var s=to(),t=io();function i(r,n){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof n!="number"||n<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=n,this.items=new r(this.capacity),this.clear()}return i.prototype.clear=function(){this.start=0,this.size=0},i.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var n=this.start+this.size;return n>=this.capacity&&(n-=this.capacity),this.items[n]=r,++this.size},i.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var n=this.start-1;return this.start===0&&(n=this.capacity-1),this.items[n]=r,this.start=n,++this.size},i.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},i.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},i.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},i.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},i.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},i.prototype.forEach=function(r,n){n=arguments.length>1?n:this;for(var a=this.capacity,o=this.size,f=this.start,v=0;v<o;)r.call(n,this.items[f],v,this),f++,v++,f===a&&(f=0)},i.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var n=new this.ArrayClass(this.size),a=this.capacity,o=this.size,f=this.start,v=0;v<o;)n[v]=this.items[f],f++,v++,f===a&&(f=0);return n},i.prototype.values=function(){var r=this.items,n=this.capacity,a=this.size,o=this.start,f=0;return new t(function(){if(f>=a)return{done:!0};var v=r[o];return o++,f++,o===n&&(o=0),{value:v,done:!1}})},i.prototype.entries=function(){var r=this.items,n=this.capacity,a=this.size,o=this.start,f=0;return new t(function(){if(f>=a)return{done:!0};var v=r[o];return o++,o===n&&(o=0),{value:[f++,v],done:!1}})},typeof Symbol<"u"&&(i.prototype[Symbol.iterator]=i.prototype.values),i.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:i,enumerable:!1}),r},typeof Symbol<"u"&&(i.prototype[Symbol.for("nodejs.util.inspect.custom")]=i.prototype.inspect),i.from=function(r,n,a){if(arguments.length<3&&(a=s.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var o=new i(n,a);if(s.isArrayLike(r)){var f,v;for(f=0,v=r.length;f<v;f++)o.items[f]=r[f];return o.size=v,o}return s.forEach(r,function(g){o.push(g)}),o},$r=i,$r}var Gr,Nn;function no(){if(Nn)return Gr;Nn=1;var s=ro();function t(i){this.graph=i,this.queue=new s(Array,i.order),this.seen=new Set,this.size=0}return t.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},t.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},t.prototype.forEachNodeYetUnseen=function(i){var r=this.seen,n=this.graph;n.someNode(function(a,o){if(r.size===n.order)return!0;if(r.has(a))return!1;var f=i(a,o);return!!f})},t.prototype.has=function(i){return this.seen.has(i)},t.prototype.push=function(i){var r=this.seen.size;return this.seen.add(i),r===this.seen.size?!1:(this.queue.push(i),this.size++,!0)},t.prototype.pushWith=function(i,r){var n=this.seen.size;return this.seen.add(i),n===this.seen.size?!1:(this.queue.push(r),this.size++,!0)},t.prototype.shift=function(){var i=this.queue.shift();return this.size=this.queue.size,i},Gr=t,Gr}var lr={},Ln;function es(){if(Ln)return lr;Ln=1;function s(i,r,n){this.node=i,this.attributes=r,this.depth=n}function t(i){return i[0].toUpperCase()+i.slice(1)}return lr.TraversalRecord=s,lr.capitalize=t,lr}var Dn;function so(){if(Dn)return ar;Dn=1;var s=Zn(),t=no(),i=es(),r=i.TraversalRecord,n=i.capitalize;function a(o,f,v,g){if(g=g||{},!s(o))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if(typeof v!="function")throw new Error("graphology-traversal/bfs: given callback is not a function.");if(o.order===0)return;var _=new t(o),b=o["forEach"+n(g.mode||"outbound")+"Neighbor"].bind(o),E;f===null?E=_.forEachNodeYetUnseen.bind(_):E=function(x){f=""+f,x(f,o.getNodeAttributes(f))};var O,ne;function de(x,B){_.pushWith(x,new r(x,B,O.depth+1))}E(function(x,B){for(_.pushWith(x,new r(x,B,0));_.size!==0;)O=_.shift(),ne=v(O.node,O.attributes,O.depth),ne!==!0&&b(O.node,de)})}return ar.bfs=function(o,f,v){return a(o,null,f,v)},ar.bfsFromNode=a,ar}var dr={},Nr,Cn;function ao(){if(Cn)return Nr;Cn=1;function s(t){this.graph=t,this.stack=new Array(t.order),this.seen=new Set,this.size=0}return s.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},s.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},s.prototype.forEachNodeYetUnseen=function(t){var i=this.seen,r=this.graph;r.someNode(function(n,a){if(i.size===r.order)return!0;if(i.has(n))return!1;var o=t(n,a);return!!o})},s.prototype.has=function(t){return this.seen.has(t)},s.prototype.push=function(t){var i=this.seen.size;return this.seen.add(t),i===this.seen.size?!1:(this.stack[this.size++]=t,!0)},s.prototype.pushWith=function(t,i){var r=this.seen.size;return this.seen.add(t),r===this.seen.size?!1:(this.stack[this.size++]=i,!0)},s.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},Nr=s,Nr}var Tn;function oo(){if(Tn)return dr;Tn=1;var s=Zn(),t=ao(),i=es(),r=i.TraversalRecord,n=i.capitalize;function a(o,f,v,g){if(g=g||{},!s(o))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof v!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(o.order===0)return;var _=new t(o),b=o["forEach"+n(g.mode||"outbound")+"Neighbor"].bind(o),E;f===null?E=_.forEachNodeYetUnseen.bind(_):E=function(x){f=""+f,x(f,o.getNodeAttributes(f))};var O,ne;function de(x,B){_.pushWith(x,new r(x,B,O.depth+1))}E(function(x,B){for(_.pushWith(x,new r(x,B,0));_.size!==0;)O=_.pop(),ne=v(O.node,O.attributes,O.depth),ne!==!0&&b(O.node,de)})}return dr.dfs=function(o,f,v){return a(o,null,f,v)},dr.dfsFromNode=a,dr}var Rn;function lo(){if(Rn)return Ci;Rn=1;var s=so(),t=oo();return Ci.bfs=s.bfs,Ci.bfsFromNode=s.bfsFromNode,Ci.dfs=t.dfs,Ci.dfsFromNode=t.dfsFromNode,Ci}var Lr=lo(),co=j('<span class="status-badge local svelte-1jef3w8">Local changes</span>'),uo=j('<span class="status-badge default svelte-1jef3w8">Default</span>'),fo=j('<button class="btn danger-outline svelte-1jef3w8">Reset</button>'),ho=j('<span class="no-link-warning svelte-1jef3w8">No link type for this pair</span>'),vo=j('<span class="orphan-badge svelte-1jef3w8"> </span>'),po=j('<div class="hover-row svelte-1jef3w8"><span class="hover-label svelte-1jef3w8">Row:</span> <span class="hover-value svelte-1jef3w8"> </span></div>'),go=j('<div class="hover-col svelte-1jef3w8"><span class="hover-label svelte-1jef3w8">Col:</span> <span class="hover-value svelte-1jef3w8"> </span></div>'),yo=j('<div class="matrix-no-pair svelte-1jef3w8"><p class="svelte-1jef3w8"> </p></div>'),_o=j('<span class="verbose-label svelte-1jef3w8"> </span>'),wo=j("<th><!></th>"),mo=j('<span class="verbose-label svelte-1jef3w8"> </span>'),bo=j('<span class="cell-marker direct svelte-1jef3w8"></span>'),jo=j("<span> </span>"),ko=j("<td><!></td>"),xo=j("<tr><td><!></td><!></tr>"),Eo=j('<table class="matrix svelte-1jef3w8"><thead class="svelte-1jef3w8"><tr class="svelte-1jef3w8"><th class="row-header svelte-1jef3w8"> </th><!></tr></thead><tbody class="svelte-1jef3w8"></tbody></table>'),So=j('<div class="matrix-toolbar svelte-1jef3w8"><div class="matrix-selectors svelte-1jef3w8"><div class="selector-group svelte-1jef3w8"><label class="svelte-1jef3w8">Rows:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Questions</option><option class="svelte-1jef3w8">Risks</option><option class="svelte-1jef3w8">Control Categories</option><option class="svelte-1jef3w8">Regulations</option><option class="svelte-1jef3w8">Controls</option></select></div> <span class="selector-arrow svelte-1jef3w8"></span> <div class="selector-group svelte-1jef3w8"><label class="svelte-1jef3w8">Columns:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Questions</option><option class="svelte-1jef3w8">Risks</option><option class="svelte-1jef3w8">Control Categories</option><option class="svelte-1jef3w8">Regulations</option><option class="svelte-1jef3w8">Controls</option></select></div> <!></div> <div class="matrix-options svelte-1jef3w8"><label class="verbose-toggle svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> <span class="svelte-1jef3w8">Verbose</span></label> <label><input type="checkbox" class="svelte-1jef3w8"/> <span class="svelte-1jef3w8">Unlinked only</span> <!></label> <input type="text" placeholder="Search rows..." class="search svelte-1jef3w8"/></div></div> <div><!> <!></div> <div class="matrix-container svelte-1jef3w8"><!></div>',1),Ao=j('<div class="connection-banner svelte-1jef3w8">Connecting from: <strong class="svelte-1jef3w8"> </strong>  Click a node in the tree to link them <button class="svelte-1jef3w8">Cancel</button></div>'),$o=j('<option class="svelte-1jef3w8"> </option>'),Go=j('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a question...</option><!></select>'),No=j('<option class="svelte-1jef3w8"> </option>'),Lo=j('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a risk...</option><!></select>'),Do=j('<option class="svelte-1jef3w8"> </option>'),Co=j('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a control...</option><!></select>'),To=j(`<div class="trace-placeholder svelte-1jef3w8"><p class="svelte-1jef3w8">Select a starting point above to visualize the dependency flow.</p> <p class="hint svelte-1jef3w8">You'll see questions  risks  controls  regulations as a visual tree.</p></div>`),Ro=j('<div class="trace-placeholder svelte-1jef3w8"><p class="svelte-1jef3w8">No data found for <strong class="svelte-1jef3w8"> </strong> </p></div>'),Io=j('<button class="trace-link-btn svelte-1jef3w8" title="Edit link"></button>'),Oo=j('<strong class="svelte-1jef3w8"> </strong> ',1),Uo=j('<span class="trace-children-count svelte-1jef3w8"> </span>'),qo=j('<div class="trace-children svelte-1jef3w8"></div>'),zo=j('<div class="trace-row svelte-1jef3w8"><div><!> <span class="trace-node-type svelte-1jef3w8"> </span> <span class="trace-node-label svelte-1jef3w8"><!></span> <!></div> <!></div>'),Po=j("<span> </span>"),Mo=j('<p class="no-connections svelte-1jef3w8">No direct connections yet.</p>'),Fo=j('<span class="conn-phases svelte-1jef3w8"> </span>'),Bo=j('<button class="connection-item svelte-1jef3w8"><span> </span> <span class="conn-direction svelte-1jef3w8"> </span> <span> </span> <!></button>'),Wo=j('<div class="connection-list svelte-1jef3w8"></div>'),Ko=j('<h4 class="svelte-1jef3w8"><!></h4> <p class="trace-detail-text svelte-1jef3w8"><!></p> <button class="btn edit-entity svelte-1jef3w8"> </button>  <div class="connections-section svelte-1jef3w8"><h4 class="svelte-1jef3w8"> </h4> <!></div> <button class="btn connect-action svelte-1jef3w8">+ Create Connection</button>',1),Jo=j('<p class="no-data svelte-1jef3w8">Item not found</p>'),Qo=j('<aside class="trace-detail-panel svelte-1jef3w8"><div class="trace-detail-header svelte-1jef3w8"><span> </span> <button class="close-btn svelte-1jef3w8"></button></div> <!></aside>'),Yo=j('<div class="trace-flow svelte-1jef3w8"><!> <div class="trace-stats svelte-1jef3w8"></div></div> <!>',1),Vo=j('<!> <div class="trace-view svelte-1jef3w8"><div class="trace-toolbar svelte-1jef3w8"><div class="trace-start-selector svelte-1jef3w8"><label class="svelte-1jef3w8">Start from:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Question</option><option class="svelte-1jef3w8">Risk</option><option class="svelte-1jef3w8">Control</option></select> <!></div></div> <div class="trace-canvas svelte-1jef3w8"><!></div></div>',1),Ho=j('<div class="connection-banner svelte-1jef3w8">Connecting from: <strong class="svelte-1jef3w8"> </strong>  Click another item to link them <button class="svelte-1jef3w8">Cancel</button></div>'),Xo=j(`<div class="help-banner svelte-1jef3w8"><strong class="svelte-1jef3w8">How to link:</strong> Click an item to select it, then click <span class="plus-hint svelte-1jef3w8">+</span> on it (or another item) to create a connection.
				Questions trigger Risks. Risks link to Control Categories and Regulations.</div>`),Zo=j('<span class="dep-badge depends-on svelte-1jef3w8"> </span>'),el=j('<span class="dep-badge depended-by svelte-1jef3w8"> </span>'),tl=j('<div class="node-deps svelte-1jef3w8"><!> <!></div>'),il=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),rl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-id svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),nl=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),sl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),al=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),ol=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Risk links"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <div class="node-meta svelte-1jef3w8"><span class="control-count svelte-1jef3w8" title="Controls in this category"> </span></div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),ll=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),dl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),cl=j('<span class="subcategory svelte-1jef3w8" title="Subcategory"> </span>'),ul=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),fl=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),hl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <div class="node-meta svelte-1jef3w8"><span class="phases svelte-1jef3w8"> </span> <!></div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),vl=j('<div class="more-indicator svelte-1jef3w8"> </div>'),pl=j('<span class="option-tag svelte-1jef3w8"> </span>'),gl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <div class="detail-options svelte-1jef3w8"><strong class="svelte-1jef3w8">Options:</strong> <!></div> <button class="btn edit-entity svelte-1jef3w8">Edit Question</button>',1),yl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <p class="detail-desc svelte-1jef3w8"> </p> <button class="btn edit-entity svelte-1jef3w8">Edit Risk</button>',1),_l=j('<div class="control-item svelte-1jef3w8"><span class="control-name svelte-1jef3w8"> </span> <span class="control-phases svelte-1jef3w8"> </span></div>'),wl=j('<div class="control-item more svelte-1jef3w8"> </div>'),ml=j('<div class="detail-controls svelte-1jef3w8"><strong class="svelte-1jef3w8"> </strong> <div class="controls-list svelte-1jef3w8"><!> <!></div></div>'),bl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <!>',1),jl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span></div> <p class="detail-desc svelte-1jef3w8"> </p> <button class="btn edit-entity svelte-1jef3w8">Edit Regulation</button>',1),kl=j('<p class="detail-desc svelte-1jef3w8"> </p>'),xl=j('<span class="category-badge svelte-1jef3w8"> </span>'),El=j('<span class="svelte-1jef3w8"> </span>'),Sl=j('<span class="phase-badge svelte-1jef3w8"> </span>'),Al=j('<span class="tech-badge svelte-1jef3w8"> </span>'),$l=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <!> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Category:</strong> <!></div> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Phases:</strong> <div class="phase-badges svelte-1jef3w8"></div></div> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Tech Types:</strong> <div class="tech-badges svelte-1jef3w8"></div></div> <button class="btn edit-control svelte-1jef3w8">Edit Control</button>',1),Gl=j('<p class="no-connections svelte-1jef3w8">No connections yet. Click + on another node to create one.</p>'),Nl=j('<span class="conn-phases svelte-1jef3w8"> </span>'),Ll=j('<button class="connection-item svelte-1jef3w8"><span> </span> <span class="conn-direction svelte-1jef3w8"> </span> <span> </span> <!></button>'),Dl=j('<div class="connection-list svelte-1jef3w8"></div>'),Cl=j('<aside class="detail-panel svelte-1jef3w8"><div class="detail-header svelte-1jef3w8"><span> </span> <button class="close-btn svelte-1jef3w8"></button></div> <!> <div class="connections-section svelte-1jef3w8"><h4 class="svelte-1jef3w8"> </h4> <!></div> <button class="btn connect-action svelte-1jef3w8">+ Create Connection</button></aside>'),Tl=j('<!> <div class="graph-toolbar svelte-1jef3w8"><button> </button> <input type="text" placeholder="Search graph..." class="search svelte-1jef3w8"/></div> <div class="layout svelte-1jef3w8"><div class="columns svelte-1jef3w8"><div class="column questions svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">?</span> <h2 class="svelte-1jef3w8">Questions</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column risks svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">!</span> <h2 class="svelte-1jef3w8">Risks</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column mitigations svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">C</span> <h2 class="svelte-1jef3w8">Control Categories</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column regulations svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">R</span> <h2 class="svelte-1jef3w8">Regulations</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column controls svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8"></span> <h2 class="svelte-1jef3w8">Controls</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"><!> <!></div></div></div> <!></div>',1),Rl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 1: Discovery <span class="phase-tag p1 svelte-1jef3w8">P1</span></label> <textarea placeholder="Guidance for Phase 1 (Discovery) - retrospective data, algorithm development..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 2: Validation <span class="phase-tag p2 svelte-1jef3w8">P2</span></label> <textarea placeholder="Guidance for Phase 2 (Validation) - prospective testing, controlled settings..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 3: Deployment <span class="phase-tag p3 svelte-1jef3w8">P3</span></label> <textarea placeholder="Guidance for Phase 3 (Deployment) - live use, influences decisions..." rows="4" class="svelte-1jef3w8"></textarea></div>',1),Il=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Code (e.g., "1.4")</label> <input type="text" placeholder="1.4" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Short Name</label> <input type="text" placeholder="Brief name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Full Name</label> <input type="text" placeholder="Full descriptive name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Domain</label> <input type="text" placeholder="Risk domain" class="svelte-1jef3w8"/></div> <div class="phase-guidance-section svelte-1jef3w8"><h4 class="svelte-1jef3w8">Phase-Specific Guidance</h4> <p class="guidance-hint svelte-1jef3w8">Prose that researchers can adapt for their IRB protocols</p> <!></div>',1),Ol=j('<p class="no-conditions svelte-1jef3w8">Always shown (no conditions)</p>'),Ul=j('<div class="condition-item svelte-1jef3w8"><span class="condition-question svelte-1jef3w8"> </span> <span class="condition-equals svelte-1jef3w8">=</span> <span class="condition-values svelte-1jef3w8"><!></span> <button class="remove-condition svelte-1jef3w8" title="Remove condition"></button></div>'),ql=j('<div class="conditions-list svelte-1jef3w8"></div>'),zl=j('<option class="svelte-1jef3w8"> </option>'),Pl=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Ml=j('<div class="condition-values-select svelte-1jef3w8"><span class="when-label svelte-1jef3w8">when answer is:</span> <!></div> <button class="btn small svelte-1jef3w8">Add Condition</button>',1),Fl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">ID (no spaces, lowercase)</label> <input type="text" placeholder="my-question-id" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Question Text</label> <textarea placeholder="Enter the question..." rows="3" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Type</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Yes/No</option><option class="svelte-1jef3w8">Single Select</option><option class="svelte-1jef3w8">Multi Select</option></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Category</label> <input type="text" placeholder="Category" class="svelte-1jef3w8"/></div> <div class="form-group show-conditions svelte-1jef3w8"><label class="svelte-1jef3w8">Show Conditions <span class="hint svelte-1jef3w8">(Only show this question when...)</span></label> <!> <div class="add-condition svelte-1jef3w8"><select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select dependency question...</option><!></select> <!></div></div>',1),Bl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Citation (e.g., "45 CFR 46.111(a)(1)")</label> <input type="text" placeholder="45 CFR 46.111(a)(1)" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Description</label> <textarea placeholder="Description of the regulation..." rows="3" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Framework</label> <input type="text" placeholder="e.g., Common Rule, HIPAA" class="svelte-1jef3w8"/></div>',1),Wl=j('<option class="svelte-1jef3w8"> </option>'),Kl=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Jl=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Ql=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">ID</label> <input type="text" placeholder="e.g., A0001_Source2024" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Name</label> <input type="text" placeholder="Control name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Description</label> <textarea placeholder="Description of the control..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Source</label> <input type="text" placeholder="e.g., NIST2024, Bengio2025" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Subcategory</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select subcategory...</option><!></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Phases</label> <div class="checkbox-group svelte-1jef3w8"></div></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Technology Types</label> <div class="checkbox-group tech-types svelte-1jef3w8"><label class="checkbox-label all-types svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> All Types</label> <!></div></div>',1),Yl=j('<button class="btn danger svelte-1jef3w8">Delete</button>'),Vl=j('<div class="svelte-1jef3w8"></div>'),Hl=j('<div class="modal-overlay svelte-1jef3w8" role="dialog" aria-modal="true"><div class="modal entity-editor svelte-1jef3w8"><div class="modal-header svelte-1jef3w8"><h3 class="svelte-1jef3w8"> </h3> <button class="close-btn svelte-1jef3w8"></button></div> <div class="modal-body svelte-1jef3w8"><!></div> <div class="modal-footer svelte-1jef3w8"><!> <div class="footer-right svelte-1jef3w8"><button class="btn svelte-1jef3w8">Cancel</button> <button class="btn primary svelte-1jef3w8">Save</button></div></div></div></div>'),Xl=j('<button><span> </span> <span class="entity-name svelte-1jef3w8"> </span> <span class="entity-category svelte-1jef3w8"> </span></button>'),Zl=j('<div class="no-entities svelte-1jef3w8">No matching items found</div>'),ed=j('<div class="entity-selector svelte-1jef3w8"><div class="entity-selector-header svelte-1jef3w8"><span class="selector-label svelte-1jef3w8"> </span> <button class="close-selector svelte-1jef3w8"></button></div> <div class="entity-selector-toolbar svelte-1jef3w8"><input type="text" placeholder="Search..." class="selector-search svelte-1jef3w8"/> <select class="selector-sort svelte-1jef3w8"><option class="svelte-1jef3w8">Sort: Name</option><option class="svelte-1jef3w8">Sort: Code</option><option class="svelte-1jef3w8">Sort: Category</option></select></div> <div class="entity-selector-list svelte-1jef3w8"></div></div>'),td=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),id=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),rd=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Trigger when answer is:</label> <div class="answer-checkboxes svelte-1jef3w8"></div></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Logic (when multiple triggers for same risk)</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">OR - Any trigger activates</option><option class="svelte-1jef3w8">AND - All triggers required</option></select></div>',1),nd=j('<div class="guidance-input svelte-1jef3w8"><span class="guidance-phase svelte-1jef3w8"> </span> <textarea rows="2" class="svelte-1jef3w8"></textarea></div>'),sd=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase-specific Guidance</label> <!></div>'),ad=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Note</label> <input type="text" placeholder="Brief note about this regulatory link..." class="svelte-1jef3w8"/></div>'),od=j('<button class="btn danger svelte-1jef3w8">Delete Link</button>'),ld=j('<div class="modal-overlay svelte-1jef3w8" role="dialog" aria-modal="true"><div class="modal link-editor svelte-1jef3w8"><div class="modal-header svelte-1jef3w8"><h3 class="svelte-1jef3w8"> </h3> <button class="close-btn svelte-1jef3w8"></button></div> <div class="modal-body svelte-1jef3w8"><div class="link-preview svelte-1jef3w8"><button title="Click to change"> <span class="change-icon svelte-1jef3w8"></span></button> <span class="link-arrow svelte-1jef3w8"></span> <button title="Click to change"> <span class="change-icon svelte-1jef3w8"></span></button></div> <!> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Link Type</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Trigger (Question triggers Risk)</option><option class="svelte-1jef3w8">Dependency (Question depends on Question)</option><option class="svelte-1jef3w8">Control Category (Risk linked to Category)</option><option class="svelte-1jef3w8">Regulation (Risk linked to Regulation)</option><option class="svelte-1jef3w8">Control (Risk linked to Control)</option><option class="svelte-1jef3w8">Implementation (Category implements Control)</option><option class="svelte-1jef3w8">Custom</option></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Phases</label> <div class="phase-checkboxes svelte-1jef3w8"></div></div> <!> <!> <!></div> <div class="modal-footer svelte-1jef3w8"><!> <div class="footer-right svelte-1jef3w8"><button class="btn svelte-1jef3w8">Cancel</button> <button class="btn primary svelte-1jef3w8">Save</button></div></div></div></div>'),dd=j('<div class="admin svelte-1jef3w8"><header class="header svelte-1jef3w8"><div class="header-left svelte-1jef3w8"><h1 class="svelte-1jef3w8">Traceability</h1> <div class="view-tabs svelte-1jef3w8"><button>Matrix</button> <button>Trace</button> <button>Graph</button></div></div> <div class="header-right svelte-1jef3w8"><!> <!> <input type="file" accept=".json" style="display: none" class="svelte-1jef3w8"/> <button class="btn svelte-1jef3w8">Import</button> <button class="btn primary svelte-1jef3w8">Export</button> <!></div></header> <!></div> <!> <!>',1);function kd(s,t){In(t,!0);const i="ai-oversight-traceability",r="ai-oversight-version",n=t.data.traceability.version||"2.0.0";function a(){{if(localStorage.getItem(r)!==n)return localStorage.removeItem(i),localStorage.setItem(r,n),JSON.parse(JSON.stringify(t.data.traceability.links));const h=localStorage.getItem(i);if(h)try{return JSON.parse(h)}catch(p){console.error("Failed to parse saved links:",p)}}return JSON.parse(JSON.stringify(t.data.traceability.links))}let o=dt(tr(a())),f=dt(tr(localStorage.getItem(i)!==null));pn(()=>{e(o)&&(localStorage.setItem(i,JSON.stringify(e(o))),S(f,!0))});function v(){confirm("Reset to default? This will discard all local changes.")&&(S(o,JSON.parse(JSON.stringify(t.data.traceability.links)),!0),localStorage.removeItem(i),S(f,!1))}let g;function _(){g?.click()}function b(l){const h=l.target.files?.[0];if(!h)return;const p=new FileReader;p.onload=m=>{try{const N=JSON.parse(m.target?.result);N.links?(S(o,N.links,!0),S(f,!0)):Array.isArray(N)?(S(o,N,!0),S(f,!0)):alert("Invalid file format. Expected traceability JSON.")}catch(N){alert("Failed to parse file: "+N)}},p.readAsText(h)}const E=[{id:"phase-1",name:"Phase 1: Discovery",short:"P1"},{id:"phase-2",name:"Phase 2: Validation",short:"P2"},{id:"phase-3",name:"Phase 3: Deployment",short:"P3"}];let O=dt("matrix"),ne=dt("all"),de=dt("all"),x=dt(null),B=dt(null),wt=dt(!1),T=dt(null),L=dt(""),A=dt(!1),D=dt("question"),J=dt("risk"),he=dt(!1),Pe=dt(null),me=dt(null),Ut=dt(!1);function ui(l,h){const p={"question-risk":"trigger","risk-mitigation":"mitigation","risk-regulation":"regulation","risk-control":"control","mitigation-control":"implementation","question-question":"dependency"};return p[`${l}-${h}`]||p[`${h}-${l}`]||null}function Qi(l,h){const p={trigger:["question","risk"],mitigation:["risk","mitigation"],regulation:["risk","regulation"],control:["risk","control"],implementation:["mitigation","control"],dependency:["question","question"]},m=ui(l,h);if(!m||!p[m])return!1;const[N,be]=p[m];return l===be&&h===N}let qt=z(()=>e(ne)==="all"?e(o):e(o).filter(l=>!l.phases||l.phases.includes(e(ne)))),xi=z(()=>{const l=new gt({type:"directed",multi:!1,allowSelfLoops:!1});for(const h of e(qt)){const p=`${h.from.entity}:${h.from.id}`,m=`${h.to.entity}:${h.to.id}`;l.hasNode(p)||l.addNode(p,{type:h.from.entity,id:h.from.id}),l.hasNode(m)||l.addNode(m,{type:h.to.entity,id:h.to.id});const N=`${p}->${m}`;l.hasEdge(N)||l.addEdgeWithKey(N,p,m,{link:h})}return l});function ts(l,h,p,m){return e(qt).find(N=>N.from.entity===l&&N.from.id===h&&N.to.entity===p&&N.to.id===m||N.from.entity===p&&N.from.id===m&&N.to.entity===l&&N.to.id===h)}function Ir(l,h){if(!e(xi).hasNode(l))return!1;if(l===h)return!0;let p=!1;return Lr.bfsFromNode(e(xi),l,m=>m===h?(p=!0,!0):!1,{mode:"outbound"}),p}function is(l,h){if(!e(xi).hasNode(l)||!e(xi).hasNode(h))return!1;const p=new Set;Lr.bfsFromNode(e(xi),l,N=>(p.add(N),!1),{mode:"inbound"});let m=!1;return Lr.bfsFromNode(e(xi),h,N=>p.has(N)?(m=!0,!0):!1,{mode:"inbound"}),m}function Ei(l,h,p,m){const N=ts(l,h,p,m);if(N)return{...N,isDirect:!0};const be=`${l}:${h}`,Q=`${p}:${m}`;return Ir(be,Q)?{isDirect:!1,isTransitive:!0,direction:"downstream"}:Ir(Q,be)?{isDirect:!1,isTransitive:!0,direction:"upstream"}:is(be,Q)?{isDirect:!1,isTransitive:!0,direction:"sibling"}:null}function rs(l,h,p,m){const N=Ei(l,h,p,m);if(N?.isDirect){const{isDirect:be,...Q}=N;S(T,JSON.parse(JSON.stringify(Q)),!0),S(wt,!0)}else N?.isTransitive?confirm(`These are transitively connected via the traceability chain.

Create a direct link between them?`)&&Or(l,h,p,m):Or(l,h,p,m)}function Or(l,h,p,m){const N=ui(l,p)||"custom",be=Qi(l,p),Q=be?p:l,Le=be?m:h,R=be?l:p,M=be?h:m,Ee={id:`link-${Date.now()}`,type:N,from:{entity:Q,id:Le},to:{entity:R,id:M},phases:["phase-1","phase-2","phase-3"]};N==="trigger"?(Ee.answerValues=[],Ee.logic="OR"):N==="mitigation"&&(Ee.guidance={}),S(T,Ee,!0),S(wt,!0)}let vi=dt("question"),Kt=dt(""),at=dt(null),Yi=z(()=>{if(!e(Kt))return null;function l(R){return e(Gt).filter(M=>M.showIf&&Object.keys(M.showIf).includes(R)).map(M=>M.id)}function h(R){return e(qt).filter(M=>M.type==="trigger"&&M.from.entity==="question"&&M.from.id===R).map(M=>({risk:e(Rt).find(Ee=>Ee.id===M.to.id),link:M})).filter(M=>M.risk)}function p(R){return e(qt).filter(M=>M.type==="mitigation"&&M.from.entity==="risk"&&M.from.id===R).map(M=>({mitigation:e(ei).find(Ee=>Ee.id===M.to.id),link:M})).filter(M=>M.mitigation)}function m(R){return e(qt).filter(M=>M.type==="regulation"&&M.from.entity==="risk"&&M.from.id===R).map(M=>({regulation:e(ai).find(Ee=>Ee.id===M.to.id),link:M})).filter(M=>M.regulation)}function N(R){return e(It).filter(M=>M.subcategoryId===R).slice(0,5)}function be(R,M,Ee){if(Ee.has(R))return null;Ee.add(R);const je=e(Gt).find(ft=>ft.id===R);if(!je)return null;const Se={type:"question",id:je.id,label:je.text,shortLabel:je.id,children:[],depth:M},vt=l(R);for(const ft of vt){const At=be(ft,M+1,Ee);At&&Se.children.push(At)}const ut=h(R);for(const{risk:ft,link:At}of ut)Se.children.push(Q(ft,At,M+1));return Se}function Q(R,M,Ee){const je={type:"risk",id:R.id,label:R.shortName,shortLabel:R.code,children:[],link:M,depth:Ee},Se=p(R.id);for(const{mitigation:ut,link:ft}of Se)je.children.push(Le(ut,ft,Ee+1));const vt=m(R.id);for(const{regulation:ut,link:ft}of vt)je.children.push({type:"regulation",id:ut.id,label:ut.description,shortLabel:ut.citation.split("(")[0].trim(),children:[],link:ft,depth:Ee+1});return je}function Le(R,M,Ee){const je={type:"mitigation",id:R.id,label:R.name,shortLabel:R.code,children:[],link:M,depth:Ee},Se=N(R.id);for(const ut of Se)je.children.push({type:"control",id:ut.id,label:ut.name,shortLabel:ut.id.split("_")[0],children:[],depth:Ee+1});const vt=e(It).filter(ut=>ut.subcategoryId===R.id).length;return vt>5&&je.children.push({type:"more",id:`more-${R.id}`,label:`+${vt-5} more controls`,shortLabel:`+${vt-5}`,children:[],depth:Ee+1,isPlaceholder:!0}),je}if(e(vi)==="question")return be(e(Kt),0,new Set);if(e(vi)==="risk"){const R=e(Rt).find(Se=>Se.id===e(Kt));if(!R)return null;const M={type:"risk",id:R.id,label:R.shortName,shortLabel:R.code,children:[],depth:0},Ee=p(R.id);for(const{mitigation:Se,link:vt}of Ee)M.children.push(Le(Se,vt,1));const je=m(R.id);for(const{regulation:Se,link:vt}of je)M.children.push({type:"regulation",id:Se.id,label:Se.description,shortLabel:Se.citation.split("(")[0].trim(),children:[],link:vt,depth:1});return M}else{const R=e(It).find(je=>je.id===e(Kt));if(!R)return null;const M=e(ei).find(je=>je.id===R.subcategoryId),Ee={type:"control",id:R.id,label:R.name,shortLabel:R.id.split("_")[0],children:[],depth:0};if(M){const je=e(qt).filter(Se=>Se.type==="mitigation"&&Se.to.id===M.id).map(Se=>({risk:e(Rt).find(vt=>vt.id===Se.from.id),link:Se})).filter(Se=>Se.risk);for(const{risk:Se}of je.slice(0,5))Ee.children.push({type:"risk",id:Se.id,label:Se.shortName,shortLabel:Se.code,children:[],depth:1})}return Ee}}),ns=z(()=>{const l=new Map;if(!e(Yi))return l;function h(p){const m=l.get(p.type)||[];m.push(p),l.set(p.type,m),p.children.forEach(h)}return h(e(Yi)),l}),Zt=dt(null),pi=dt(""),Ui=dt("name"),Et=dt("risks"),Si=dt(!1),P=dt(null),Vi=dt(!1),gi=dt(""),Jt=dt(tr([]));const Ur="ai-oversight-entities";function ss(){{const l=localStorage.getItem(Ur);if(l)try{return JSON.parse(l)}catch(h){console.error("Failed to parse saved entities:",h)}}return null}let St=dt(tr(ss()||{questions:null,risks:null,regulations:null,controls:null})),as=z(()=>e(St).questions!==null||e(St).risks!==null||e(St).regulations!==null||e(St).controls!==null);pn(()=>{e(as)&&localStorage.setItem(Ur,JSON.stringify(e(St)))});let qr=z(()=>{const l=[];for(const h of t.data.questionCategories)for(const p of h.questions){let m=[];p.type==="yes-no"?m=[{value:"yes",label:"Yes"},{value:"no",label:"No"}]:p.options&&(m=p.options.map(N=>({value:N.value,label:N.label}))),l.push({id:p.id,text:p.question,type:p.type,category:h.name,options:m,showIf:p.showIf})}return l}),zr=z(()=>t.data.subdomains.map(l=>({id:l.id,code:l.code,name:l.name,shortName:l.shortName,domain:l.domain,phaseGuidance:l.phaseGuidance||{"phase-1":"","phase-2":"","phase-3":""}}))),os=z(()=>{const l=[];for(const h of t.data.controlSubcategories){const p=t.data.controlCategories.find(m=>m.id===h.categoryId);l.push({id:h.id,code:h.code,name:h.name,category:p?.name||h.categoryId})}return l}),Pr=z(()=>{const l=[];for(const[h,p]of Object.entries(t.data.regulations))for(const m of p.sections)l.push({id:m.id,citation:m.citation,description:m.description,framework:p.title});return l}),Mr=z(()=>t.data.controls.map(l=>({id:l.id,name:l.name,description:l.description,source:l.source,subcategoryId:l.subcategoryId,phases:l.phases||["phase-1","phase-2","phase-3"],techTypes:l.techTypes||["all"]}))),Gt=z(()=>e(St).questions??e(qr)),Rt=z(()=>e(St).risks??e(zr)),ei=z(()=>e(os)),ai=z(()=>e(St).regulations??e(Pr)),It=z(()=>e(St).controls??e(Mr));const oi={question:{label:"Questions",shortLabel:"Q",getAll:()=>e(Gt).filter(l=>!["phase","model-types"].includes(l.id)),getLabel:l=>l.text,getShortLabel:l=>l.id,searchText:l=>l.text+" "+l.id},risk:{label:"Risks",shortLabel:"Risk",getAll:()=>e(Rt),getLabel:l=>l.shortName,getShortLabel:l=>l.code,searchText:l=>l.shortName+" "+l.name+" "+l.code},mitigation:{label:"Control Categories",shortLabel:"Mit",getAll:()=>e(ei),getLabel:l=>l.name,getShortLabel:l=>l.code,searchText:l=>l.name+" "+l.code},regulation:{label:"Regulations",shortLabel:"Reg",getAll:()=>e(ai),getLabel:l=>l.citation,getShortLabel:l=>l.citation.split("(")[0].trim(),searchText:l=>l.citation+" "+l.description},control:{label:"Controls",shortLabel:"Ctrl",getAll:()=>{let l=e(It);return e(ne)!=="all"&&(l=l.filter(h=>h.phases?.includes(e(ne)))),e(de)!=="all"&&(l=l.filter(h=>h.techTypes?.includes("all")||h.techTypes?.includes(e(de)))),l.slice(0,100)},getLabel:l=>l.name,getShortLabel:l=>l.id.split("_")[0],searchText:l=>l.name+" "+l.id}};let ur=z(()=>{const l=oi[e(D)];let h=l.getAll();if(e(L)){const p=e(L).toLowerCase();h=h.filter(m=>l.searchText(m).toLowerCase().includes(p))}return e(Ut)&&(h=h.filter(p=>!e(qi).some(N=>Ei(e(D),p.id,e(J),N.id)))),h}),qi=z(()=>{let h=oi[e(J)].getAll();return e(Ut)&&(h=h.filter(p=>!oi[e(D)].getAll().some(N=>Ei(e(D),N.id,e(J),p.id)))),h}),Fr=z(()=>!0),zi=z(()=>{if(!e(Pe)&&!e(me))return null;let l="",h="";if(e(Pe)){const p=oi[e(D)],m=p.getAll().find(N=>N.id===e(Pe));l=m?`${p.getShortLabel(m)}: ${p.getLabel(m)}`:e(Pe)}if(e(me)){const p=oi[e(J)],m=p.getAll().find(N=>N.id===e(me));h=m?`${p.getShortLabel(m)}: ${p.getLabel(m)}`:e(me)}return{row:l,col:h}}),Ai=z(()=>{let l=e(It);return e(ne)!=="all"&&(l=l.filter(h=>h.phases?.includes(e(ne)))),e(de)!=="all"&&(l=l.filter(h=>h.techTypes?.includes("all")||h.techTypes?.includes(e(de)))),l}),Br=z(()=>{const l=fi(e(Gt),h=>h.text,"question");return!e(A)||!e(x)?l.length:l.filter(h=>{const p=e(x)?.type==="question"&&e(x)?.id===h.id,m=e(yi).has(`question:${h.id}`);return p||m}).length}),Wr=z(()=>{const l=fi(e(Rt),h=>h.shortName+" "+h.name,"risk");return!e(A)||!e(x)?l.length:l.filter(h=>{const p=e(x)?.type==="risk"&&e(x)?.id===h.id,m=e(yi).has(`risk:${h.id}`);return p||m}).length}),Kr=z(()=>{const l=fi(e(ei),h=>h.name,"mitigation");return!e(A)||!e(x)?l.length:l.filter(h=>{const p=e(x)?.type==="mitigation"&&e(x)?.id===h.id,m=e(yi).has(`mitigation:${h.id}`);return p||m}).length}),Jr=z(()=>{const l=fi(e(ai),h=>h.citation+" "+h.description,"regulation");return!e(A)||!e(x)?l.length:l.filter(h=>{const p=e(x)?.type==="regulation"&&e(x)?.id===h.id,m=e(yi).has(`regulation:${h.id}`);return p||m}).length}),Qr=z(()=>{const l=e(Ai).slice(0,50);return!e(A)||!e(x)?Math.min(e(Ai).length,50):l.filter(h=>{const p=e(x)?.type==="control"&&e(x)?.id===h.id,m=e(yi).has(`control:${h.id}`);return p||m}).length});function ls(l){const h=e(It).find(p=>p.id===l);return h?e(qt).filter(p=>p.type==="mitigation"&&p.to.entity==="mitigation"&&p.to.id===h.subcategoryId).length:0}let fr=z(()=>{const l={rows:0,cols:0,total:0};if(!e(Fr))return l;const h=oi[e(D)].getAll(),p=oi[e(J)].getAll();return h.forEach(m=>{p.some(be=>Ei(e(D),m.id,e(J),be.id))||l.rows++}),p.forEach(m=>{h.some(be=>Ei(e(D),be.id,e(J),m.id))||l.cols++}),l.total=l.rows+l.cols,l});function Yr(l,h){return e(qt).filter(p=>p.from.entity===l&&p.from.id===h||p.to.entity===l&&p.to.id===h)}let yi=z(()=>{if(!e(x))return new Set;const l=new Set,h=e(x).type,p=(Q,Le,R=!1)=>{Q===h&&!R||l.add(`${Q}:${Le}`)};if(l.add(`${e(x).type}:${e(x).id}`),h==="question"){const Q=e(Gt).find(Le=>Le.id===e(x).id);if(Q?.showIf)for(const Le of Object.keys(Q.showIf))l.add(`question:${Le}`);for(const Le of e(Gt))Le.showIf&&e(x).id in Le.showIf&&l.add(`question:${Le.id}`)}if(h==="control"){const Q=e(It).find(Le=>Le.id===e(x).id);if(Q?.subcategoryId){const Le=e(It).filter(R=>R.subcategoryId===Q.subcategoryId);for(const R of Le)l.add(`control:${R.id}`)}}const m=e(qt).filter(Q=>Q.from.entity===e(x).type&&Q.from.id===e(x).id||Q.to.entity===e(x).type&&Q.to.id===e(x).id),N=[],be=[];if(e(x).type==="control"){const Q=e(It).find(Le=>Le.id===e(x).id);Q?.subcategoryId&&(p("mitigation",Q.subcategoryId),be.push(Q.subcategoryId))}for(const Q of m)Q.from.entity===e(x).type&&Q.from.id===e(x).id?(p(Q.to.entity,Q.to.id),Q.to.entity==="risk"&&N.push(Q.to.id),Q.to.entity==="mitigation"&&be.push(Q.to.id)):(p(Q.from.entity,Q.from.id),Q.from.entity==="risk"&&N.push(Q.from.id),Q.from.entity==="mitigation"&&be.push(Q.from.id));for(const Q of N){const Le=e(qt).filter(R=>R.from.entity==="risk"&&R.from.id===Q||R.to.entity==="risk"&&R.to.id===Q);for(const R of Le)R.from.entity==="risk"&&R.from.id===Q?(p(R.to.entity,R.to.id),R.to.entity==="mitigation"&&be.push(R.to.id)):p(R.from.entity,R.from.id)}for(const Q of be){if(h!=="control"){const R=e(It).filter(M=>M.subcategoryId===Q);for(const M of R)p("control",M.id)}const Le=e(qt).filter(R=>R.type==="mitigation"&&R.to.entity==="mitigation"&&R.to.id===Q);for(const R of Le){const M=R.from.id;p("risk",M);const Ee=e(qt).filter(je=>je.type==="regulation"&&je.from.entity==="risk"&&je.from.id===M);for(const je of Ee)p(je.to.entity,je.to.id)}}return l});function Pi(l,h){return e(x)?e(yi).has(`${l}:${h}`):!1}function $i(l,h){return e(x)?e(qt).find(p=>p.from.entity===e(x).type&&p.from.id===e(x).id&&p.to.entity===l&&p.to.id===h||p.to.entity===e(x).type&&p.to.id===e(x).id&&p.from.entity===l&&p.from.id===h||p.from.entity===l&&p.from.id===h&&p.to.entity===e(x).type&&p.to.id===e(x).id||p.to.entity===l&&p.to.id===h&&p.from.entity===e(x).type&&p.from.id===e(x).id):null}function ds(l,h,p,m){return e(o).find(N=>N.from.entity===l&&N.from.id===h&&N.to.entity===p&&N.to.id===m||N.from.entity===p&&N.from.id===m&&N.to.entity===l&&N.to.id===h)}function ti(l,h){if(e(B))if(e(B).type===l&&e(B).id===h)S(B,null);else{const p=ds(e(B).type,e(B).id,l,h);if(p)S(T,JSON.parse(JSON.stringify(p)),!0),S(wt,!0);else{let m="custom";e(B).type==="question"&&l==="risk"||e(B).type==="risk"&&l==="question"?m="trigger":e(B).type==="question"&&l==="question"?m="dependency":e(B).type==="risk"&&l==="mitigation"||e(B).type==="mitigation"&&l==="risk"?m="mitigation":e(B).type==="risk"&&l==="regulation"||e(B).type==="regulation"&&l==="risk"?m="regulation":e(B).type==="risk"&&l==="control"||e(B).type==="control"&&l==="risk"?m="control":(e(B).type==="mitigation"&&l==="control"||e(B).type==="control"&&l==="mitigation")&&(m="implementation");let N,be;m==="dependency"?(N=e(B),be={type:l,id:h}):e(B).type==="question"||e(B).type==="risk"?(N=e(B),be={type:l,id:h}):(N={type:l,id:h},be=e(B)),S(T,{id:`link-${Date.now()}`,type:m,from:{entity:N.type,id:N.id},to:{entity:be.type,id:be.id},phases:["phase-1","phase-2","phase-3"],answerValues:[],logic:"OR",guidance:{}},!0),S(wt,!0)}S(B,null)}else{const p=$i(l,h);if(p){S(T,JSON.parse(JSON.stringify(p)),!0),S(wt,!0);return}e(x)?.type===l&&e(x)?.id===h?S(x,null):S(x,{type:l,id:h},!0)}}function _i(l,h,p){p.stopPropagation(),S(B,{type:l,id:h},!0),S(x,null)}function cs(){if(!e(T))return;const l=e(o).findIndex(h=>h.id===e(T).id);l>=0?e(o)[l]=e(T):S(o,[...e(o),e(T)],!0),S(wt,!1),S(T,null)}function us(){e(T)&&(S(o,e(o).filter(l=>l.id!==e(T).id),!0),S(wt,!1),S(T,null))}function Hi(l){return e(Gt).find(h=>h.id===l)}function Vr(l){return e(Rt).find(h=>h.id===l)}function Hr(l){return e(ei).find(h=>h.id===l)}function Xr(l){return e(ai).find(h=>h.id===l)}function fs(l){return e(It).find(h=>h.id===l)}function Zr(l){return t.data.controlSubcategories.find(h=>h.id===l)}function hs(l){const h=Hi(l),p=h?.showIf?Object.keys(h.showIf):[],m=e(Gt).filter(N=>N.showIf&&l in N.showIf).map(N=>N.id);return{dependsOn:p,dependedBy:m}}function vs(l,h){return h==="trigger"?l==="from"?e(Gt).map(p=>({id:p.id,name:p.text,code:p.id,category:p.category,type:"question"})):e(Rt).map(p=>({id:p.id,name:p.shortName,code:p.code,category:p.domain,type:"risk"})):h==="mitigation"?l==="from"?e(Rt).map(p=>({id:p.id,name:p.shortName,code:p.code,category:p.domain,type:"risk"})):e(ei).map(p=>({id:p.id,name:p.name,code:p.code,category:p.category,type:"mitigation"})):h==="regulation"?l==="from"?e(Rt).map(p=>({id:p.id,name:p.shortName,code:p.code,category:p.domain,type:"risk"})):e(ai).map(p=>({id:p.id,name:p.description,code:p.citation,category:p.framework,type:"regulation"})):[]}let ps=z(()=>{if(!e(Zt)||!e(T))return[];const l=vs(e(Zt),e(T).type);let h=l;if(e(pi)){const p=e(pi).toLowerCase();h=l.filter(m=>m.name.toLowerCase().includes(p)||m.code.toLowerCase().includes(p)||m.category.toLowerCase().includes(p))}return h.sort((p,m)=>e(Ui)==="name"?p.name.localeCompare(m.name):e(Ui)==="code"?p.code.localeCompare(m.code):e(Ui)==="category"?p.category.localeCompare(m.category):0),h});function gs(l){!e(T)||!e(Zt)||(e(T)[e(Zt)]={entity:l.type,id:l.id},S(Zt,null),S(pi,""))}function en(l){e(St)[l]===null&&(l==="questions"?e(St).questions=JSON.parse(JSON.stringify(e(qr))):l==="risks"?e(St).risks=JSON.parse(JSON.stringify(e(zr))):l==="regulations"?e(St).regulations=JSON.parse(JSON.stringify(e(Pr))):l==="controls"&&(e(St).controls=JSON.parse(JSON.stringify(e(Mr)))))}function ri(l){S(Vi,!1),S(P,JSON.parse(JSON.stringify(l)),!0),S(gi,""),S(Jt,[],!0),S(Si,!0)}function ys(){if(!e(P))return;e(Vi)&&!e(P).id&&(e(P).id=`${e(Et).slice(0,-1)}-${Date.now()}`),en(e(Et));const l=e(St)[e(Et)],h=l.findIndex(p=>p.id===e(P).id);h>=0?l[h]=e(P):l.push(e(P)),S(St,{...e(St)},!0),S(Si,!1),S(P,null)}function _s(){e(P)&&confirm("Delete this entity? This cannot be undone.")&&(en(e(Et)),e(St)[e(Et)]=e(St)[e(Et)].filter(l=>l.id!==e(P).id),S(St,{...e(St)},!0),S(Si,!1),S(P,null))}function Gi(l,h){return l==="question"?Hi(h)?.text||h:l==="risk"?Vr(h)?.shortName||h:l==="mitigation"?Hr(h)?.name||h:l==="regulation"&&Xr(h)?.citation||h}function ws(){const l={$schema:"./schemas/traceability.schema.json",version:"1.0.0",lastUpdated:new Date().toISOString().split("T")[0],description:"Graph-based traceability",nodes:t.data.traceability.nodes,links:e(o)},h=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),p=URL.createObjectURL(h),m=document.createElement("a");m.href=p,m.download="traceability.json",m.click(),URL.revokeObjectURL(p)}function fi(l,h,p){if(!e(L))return l;const m=e(L).toLowerCase();return l.filter(N=>!!(h(N).toLowerCase().includes(m)||N.id.toLowerCase().includes(m)||e(x)&&p&&e(yi).has(`${p}:${N.id}`)))}function Mi(l,h){return e(qt).filter(p=>p.from.entity===l&&p.from.id===h||p.to.entity===l&&p.to.id===h).length}let ce=z(()=>{if(!e(x))return null;const{type:l,id:h}=e(x),p=Yr(l,h);if(l==="question"){const m=Hi(h);return{type:l,item:m,connections:p}}else if(l==="risk"){const m=Vr(h);return{type:l,item:m,connections:p}}else if(l==="mitigation"){const m=Hr(h);return{type:l,item:m,connections:p}}else if(l==="regulation"){const m=Xr(h);return{type:l,item:m,connections:p}}else if(l==="control"){const m=fs(h);return{type:l,item:m,connections:p}}return null});var tn=dd();Ts("1jef3w8",l=>{Ds(()=>{Cs.title="Traceability Admin - AI Oversight Tools"})});var hr=le(tn),vr=c(hr),pr=c(vr),rn=u(c(pr),2),gr=c(rn);gr.__click=()=>S(O,"matrix");let nn;var yr=u(gr,2);yr.__click=()=>S(O,"trace");let sn;var an=u(yr,2);an.__click=()=>S(O,"graph");let on;d(rn),d(pr);var ln=u(pr,2),dn=c(ln);{var ms=l=>{var h=co();y(l,h)},bs=l=>{var h=uo();y(l,h)};C(dn,l=>{e(f)?l(ms):l(bs,!1)})}var cn=u(dn,2);Bs(cn,{get phases(){return E},get modelTypes(){return t.data.modelTypes},get selectedPhase(){return e(ne)},get selectedTechType(){return e(de)},onPhaseChange:l=>S(ne,l,!0),onTechTypeChange:l=>S(de,l,!0)});var _r=u(cn,2);_r.__change=b,qs(_r,l=>g=l,()=>g);var un=u(_r,2);un.__click=_;var fn=u(un,2);fn.__click=ws;var js=u(fn,2);{var ks=l=>{var h=fo();h.__click=v,y(l,h)};C(js,l=>{e(f)&&l(ks)})}d(ln),d(vr);var xs=u(vr,2);{var Es=l=>{var h=So(),p=le(h),m=c(p),N=c(m),be=u(c(N),2),Q=c(be);Q.value=Q.__value="question";var Le=u(Q);Le.value=Le.__value="risk";var R=u(Le);R.value=R.__value="mitigation";var M=u(R);M.value=M.__value="regulation";var Ee=u(M);Ee.value=Ee.__value="control",d(be),d(N);var je=u(N,4),Se=u(c(je),2),vt=c(Se);vt.value=vt.__value="question";var ut=u(vt);ut.value=ut.__value="risk";var ft=u(ut);ft.value=ft.__value="mitigation";var At=u(ft);At.value=At.__value="regulation";var Qt=u(At);Qt.value=Qt.__value="control",d(Se),d(je);var mt=u(je,2);{var xt=I=>{var Y=ho();y(I,Y)};C(mt,I=>{e(Fr)||I(xt)})}d(m);var Dt=u(m,2),Ct=c(Dt),Tt=c(Ct);kt(Tt),ir(2),d(Ct);var De=u(Ct,2);let We;var ot=c(De);kt(ot);var bt=u(ot,4);{var ht=I=>{var Y=vo(),ie=c(Y,!0);d(Y),G(()=>w(ie,e(fr).total)),y(I,Y)};C(bt,I=>{e(fr).total>0&&I(ht)})}d(De);var Ae=u(De,2);kt(Ae),d(Dt),d(p);var $e=u(p,2);let Be;var Ge=c($e);{var qe=I=>{var Y=po(),ie=u(c(Y),2),Te=c(ie,!0);d(ie),d(Y),G(()=>w(Te,e(zi).row)),y(I,Y)};C(Ge,I=>{e(zi)?.row&&I(qe)})}var Ke=u(Ge,2);{var Ye=I=>{var Y=go(),ie=u(c(Y),2),Te=c(ie,!0);d(ie),d(Y),G(()=>w(Te,e(zi).col)),y(I,Y)};C(Ke,I=>{e(zi)?.col&&I(Ye)})}d($e);var Ve=u($e,2),se=c(Ve);{var ge=I=>{var Y=yo(),ie=c(Y),Te=c(ie);d(ie),d(Y),G(()=>w(Te,`No items to display. ${e(ur).length??""} rows, ${e(qi).length??""} columns.`)),y(I,Y)},te=I=>{const Y=z(()=>oi[e(D)]),ie=z(()=>oi[e(J)]);var Te=Eo(),lt=c(Te),yt=c(lt),Je=c(yt),V=c(Je,!0);d(Je);var ve=u(Je);nt(ve,17,()=>e(qi),st,(_t,ye)=>{var q=wo();let k;q.__click=()=>{S(Et,e(J)==="question"?"questions":e(J)==="risk"?"risks":e(J)==="mitigation"?"mitigations":e(J)==="regulation"?"regulations":"controls",!0),ri(e(ye))};var X=c(q);{var $=F=>{var Z=_o(),_e=c(Z,!0);d(Z),G(ue=>w(_e,ue),[()=>e(ie).getLabel(e(ye))]),y(F,Z)},W=F=>{var Z=Mt();G(_e=>w(Z,_e),[()=>e(ie).getShortLabel(e(ye))]),y(F,Z)};C(X,F=>{e(he)?F($):F(W,!1)})}d(q),G(F=>{k=ct(q,1,"col-header clickable svelte-1jef3w8",null,k,{highlighted:e(me)===e(ye).id}),Wt(q,"title",F)},[()=>`${e(ie).getLabel(e(ye))} (click to edit)`]),rr("mouseenter",q,()=>S(me,e(ye).id,!0)),y(_t,q)}),d(yt),d(lt);var Me=u(lt);nt(Me,21,()=>e(ur),st,(_t,ye)=>{var q=xo();let k;var X=c(q);let $;X.__click=()=>{S(Et,e(D)==="question"?"questions":e(D)==="risk"?"risks":e(D)==="mitigation"?"mitigations":e(D)==="regulation"?"regulations":"controls",!0),ri(e(ye))};var W=c(X);{var F=ue=>{var Re=mo(),fe=c(Re,!0);d(Re),G(H=>w(fe,H),[()=>e(Y).getLabel(e(ye))]),y(ue,Re)},Z=ue=>{var Re=Mt();G(fe=>w(Re,fe),[()=>e(Y).getShortLabel(e(ye))]),y(ue,Re)};C(W,ue=>{e(he)?ue(F):ue(Z,!1)})}d(X);var _e=u(X);nt(_e,17,()=>e(qi),st,(ue,Re)=>{const fe=z(()=>Ei(e(D),e(ye).id,e(J),e(Re).id));var H=ko();let Fe;H.__click=()=>rs(e(D),e(ye).id,e(J),e(Re).id);var et=c(H);{var ae=Ie=>{var we=bo();y(Ie,we)},ze=Ie=>{var we=rt(),tt=le(we);{var oe=Ue=>{var Ne=jo(),it=c(Ne,!0);d(Ne),G(()=>{ct(Ne,1,`cell-marker transitive-${e(fe).direction??""}`,"svelte-1jef3w8"),w(it,e(fe).direction==="downstream"?"":e(fe).direction==="upstream"?"":"~")}),y(Ue,Ne)};C(tt,Ue=>{e(fe)?.isTransitive&&Ue(oe)},!0)}y(Ie,we)};C(et,Ie=>{e(fe)?.isDirect?Ie(ae):Ie(ze,!1)})}d(H),G(()=>{Fe=ct(H,1,"matrix-cell svelte-1jef3w8",null,Fe,{linked:e(fe)?.isDirect,"transitive-downstream":e(fe)?.isTransitive&&e(fe)?.direction==="downstream","transitive-upstream":e(fe)?.isTransitive&&e(fe)?.direction==="upstream","transitive-sibling":e(fe)?.isTransitive&&e(fe)?.direction==="sibling","col-highlighted":e(me)===e(Re).id,"row-highlighted":e(Pe)===e(ye).id}),Wt(H,"title",e(fe)?.isDirect?"Direct link (click to edit)":e(fe)?.isTransitive?`${e(fe).direction==="downstream"?"Downstream":e(fe).direction==="upstream"?"Upstream":"Sibling"} connection (click to create direct)`:"No connection (click to create)")}),rr("mouseenter",H,()=>{S(Pe,e(ye).id,!0),S(me,e(Re).id,!0)}),y(ue,H)}),d(q),G(ue=>{k=ct(q,1,"svelte-1jef3w8",null,k,{"row-highlighted":e(Pe)===e(ye).id}),$=ct(X,1,"row-label clickable svelte-1jef3w8",null,$,{highlighted:e(Pe)===e(ye).id}),Wt(X,"title",ue)},[()=>`${e(Y).getLabel(e(ye))} (click to edit)`]),rr("mouseenter",X,()=>S(Pe,e(ye).id,!0)),y(_t,q)}),d(Me),d(Te),G(()=>w(V,e(Y).label)),y(I,Te)};C(se,I=>{e(ur).length===0||e(qi).length===0?I(ge):I(te,!1)})}d(Ve),G(()=>{We=ct(De,1,"verbose-toggle svelte-1jef3w8",null,We,{warning:e(fr).total>0}),Be=ct($e,1,"matrix-hover-info svelte-1jef3w8",null,Be,{"has-content":e(zi)})}),Vt(be,()=>e(D),I=>S(D,I)),Vt(Se,()=>e(J),I=>S(J,I)),_n(Tt,()=>e(he),I=>S(he,I)),_n(ot,()=>e(Ut),I=>S(Ut,I)),$t(Ae,()=>e(L),I=>S(L,I)),rr("mouseleave",Ve,()=>{S(Pe,null),S(me,null)}),y(l,h)},Ss=l=>{var h=rt(),p=le(h);{var m=be=>{var Q=Vo(),Le=le(Q);{var R=De=>{var We=Ao(),ot=u(c(We)),bt=c(ot,!0);d(ot);var ht=u(ot,2);ht.__click=()=>S(B,null),d(We),G(Ae=>w(bt,Ae),[()=>Gi(e(B).type,e(B).id)]),y(De,We)};C(Le,De=>{e(B)&&De(R)})}var M=u(Le,2),Ee=c(M),je=c(Ee),Se=u(c(je),2),vt=c(Se);vt.value=vt.__value="question";var ut=u(vt);ut.value=ut.__value="risk";var ft=u(ut);ft.value=ft.__value="control",d(Se);var At=u(Se,2);{var Qt=De=>{var We=Go(),ot=c(We);ot.value=ot.__value="";var bt=u(ot);nt(bt,17,()=>e(Gt).filter(ht=>!ht.showIf||Object.keys(ht.showIf).length===0),st,(ht,Ae)=>{var $e=$o(),Be=c($e);d($e);var Ge={};G(qe=>{w(Be,`${e(Ae).id??""}: ${qe??""}...`),Ge!==(Ge=e(Ae).id)&&($e.value=($e.__value=e(Ae).id)??"")},[()=>e(Ae).text.slice(0,50)]),y(ht,$e)}),d(We),Vt(We,()=>e(Kt),ht=>S(Kt,ht)),y(De,We)},mt=De=>{var We=rt(),ot=le(We);{var bt=Ae=>{var $e=Lo(),Be=c($e);Be.value=Be.__value="";var Ge=u(Be);nt(Ge,17,()=>e(Rt),st,(qe,Ke)=>{var Ye=No(),Ve=c(Ye);d(Ye);var se={};G(()=>{w(Ve,`${e(Ke).code??""}: ${e(Ke).shortName??""}`),se!==(se=e(Ke).id)&&(Ye.value=(Ye.__value=e(Ke).id)??"")}),y(qe,Ye)}),d($e),Vt($e,()=>e(Kt),qe=>S(Kt,qe)),y(Ae,$e)},ht=Ae=>{var $e=Co(),Be=c($e);Be.value=Be.__value="";var Ge=u(Be);nt(Ge,17,()=>e(It).slice(0,100),st,(qe,Ke)=>{var Ye=Do(),Ve=c(Ye);d(Ye);var se={};G(ge=>{w(Ve,`${e(Ke).id??""}: ${ge??""}...`),se!==(se=e(Ke).id)&&(Ye.value=(Ye.__value=e(Ke).id)??"")},[()=>e(Ke).name.slice(0,40)]),y(qe,Ye)}),d($e),Vt($e,()=>e(Kt),qe=>S(Kt,qe)),y(Ae,$e)};C(ot,Ae=>{e(vi)==="risk"?Ae(bt):Ae(ht,!1)},!0)}y(De,We)};C(At,De=>{e(vi)==="question"?De(Qt):De(mt,!1)})}d(je),d(Ee);var xt=u(Ee,2),Dt=c(xt);{var Ct=De=>{var We=To();y(De,We)},Tt=De=>{var We=rt(),ot=le(We);{var bt=Ae=>{var $e=Ro(),Be=c($e),Ge=u(c(Be)),qe=c(Ge,!0);d(Ge);var Ke=u(Ge);d(Be),d($e),G(()=>{w(qe,e(vi)),w(Ke,`: ${e(Kt)??""}`)}),y(Ae,$e)},ht=Ae=>{var $e=Yo(),Be=le($e);{const Ve=(se,ge=gn,te=gn)=>{var I=zo(),Y=c(I);let ie;Y.__click=()=>{ge().isPlaceholder||(e(B)?ti(ge().type,ge().id):S(at,{type:ge().type,id:ge().id},!0))};var Te=c(Y);{var lt=$=>{var W=Io();W.__click=F=>{F.stopPropagation(),S(T,JSON.parse(JSON.stringify(ge().link)),!0),S(wt,!0)},y($,W)};C(Te,$=>{ge().link&&$(lt)})}var yt=u(Te,2),Je=c(yt,!0);d(yt);var V=u(yt,2),ve=c(V);{var Me=$=>{var W=Mt();G(()=>w(W,ge().label)),y($,W)},_t=$=>{var W=Oo(),F=le(W),Z=c(F,!0);d(F);var _e=u(F);G(()=>{w(Z,ge().shortLabel),w(_e,`: ${ge().label??""}`)}),y($,W)};C(ve,$=>{ge().isPlaceholder?$(Me):$(_t,!1)})}d(V);var ye=u(V,2);{var q=$=>{var W=Uo(),F=c(W,!0);d(W),G(()=>w(F,ge().children.length)),y($,W)};C(ye,$=>{ge().children.length>0&&$(q)})}d(Y);var k=u(Y,2);{var X=$=>{var W=qo();nt(W,21,()=>ge().children,st,(F,Z)=>{Ve(F,()=>e(Z),()=>te()+1)}),d(W),y($,W)};C(k,$=>{ge().children.length>0&&$(X)})}d(I),G($=>{Is(I,`--indent: ${te()??""}`),ie=ct(Y,1,`trace-node ${ge().type??""}`,"svelte-1jef3w8",ie,{selected:e(at)?.type===ge().type&&e(at)?.id===ge().id,placeholder:ge().isPlaceholder}),w(Je,$),Wt(V,"title",ge().label)},[()=>ge().type==="more"?"+":ge().type.charAt(0).toUpperCase()]),y(se,I)};var Ge=c(Be);Ve(Ge,()=>e(Yi),()=>0);var qe=u(Ge,2);nt(qe,21,()=>Array.from(e(ns).entries()),st,(se,ge)=>{var te=z(()=>yn(e(ge),2));let I=()=>e(te)[0],Y=()=>e(te)[1];var ie=Po(),Te=c(ie);d(ie),G(()=>{ct(ie,1,`trace-stat ${I()??""}`,"svelte-1jef3w8"),w(Te,`${Y().length??""} ${I()??""}${Y().length!==1?"s":""}`)}),y(se,ie)}),d(qe),d(Be)}var Ke=u(Be,2);{var Ye=Ve=>{const se=z(()=>(()=>{const Je=e(at).type,V=e(at).id;return Je==="question"?e(Gt).find(ve=>ve.id===V):Je==="risk"?e(Rt).find(ve=>ve.id===V):Je==="mitigation"?e(ei).find(ve=>ve.id===V):Je==="control"?e(It).find(ve=>ve.id===V):Je==="regulation"?e(ai).find(ve=>ve.id===V):null})());var ge=Qo(),te=c(ge),I=c(te),Y=c(I,!0);d(I);var ie=u(I,2);ie.__click=()=>S(at,null),d(te);var Te=u(te,2);{var lt=Je=>{const V=z(()=>Yr(e(at).type,e(at).id));var ve=Ko(),Me=le(ve),_t=c(Me);{var ye=ae=>{var ze=Mt();G(()=>w(ze,e(se).id)),y(ae,ze)},q=ae=>{var ze=rt(),Ie=le(ze);{var we=oe=>{var Ue=Mt();G(()=>w(Ue,e(se).code)),y(oe,Ue)},tt=oe=>{var Ue=rt(),Ne=le(Ue);{var it=xe=>{var Qe=Mt();G(()=>w(Qe,e(se).code)),y(xe,Qe)},ke=xe=>{var Qe=rt(),Ce=le(Qe);{var Oe=He=>{var Xe=Mt();G(()=>w(Xe,e(se).citation)),y(He,Xe)},Ze=He=>{var Xe=rt(),pt=le(Xe);{var ee=pe=>{var jt=Mt();G(()=>w(jt,e(se).id)),y(pe,jt)};C(pt,pe=>{e(at).type==="control"&&pe(ee)},!0)}y(He,Xe)};C(Ce,He=>{e(at).type==="regulation"?He(Oe):He(Ze,!1)},!0)}y(xe,Qe)};C(Ne,xe=>{e(at).type==="mitigation"?xe(it):xe(ke,!1)},!0)}y(oe,Ue)};C(Ie,oe=>{e(at).type==="risk"?oe(we):oe(tt,!1)},!0)}y(ae,ze)};C(_t,ae=>{e(at).type==="question"?ae(ye):ae(q,!1)})}d(Me);var k=u(Me,2),X=c(k);{var $=ae=>{var ze=Mt();G(()=>w(ze,e(se).text)),y(ae,ze)},W=ae=>{var ze=rt(),Ie=le(ze);{var we=oe=>{var Ue=Mt();G(()=>w(Ue,e(se).shortName)),y(oe,Ue)},tt=oe=>{var Ue=rt(),Ne=le(Ue);{var it=xe=>{var Qe=Mt();G(()=>w(Qe,e(se).name)),y(xe,Qe)},ke=xe=>{var Qe=rt(),Ce=le(Qe);{var Oe=He=>{var Xe=Mt();G(()=>w(Xe,e(se).description)),y(He,Xe)},Ze=He=>{var Xe=rt(),pt=le(Xe);{var ee=pe=>{var jt=Mt();G(()=>w(jt,e(se).name)),y(pe,jt)};C(pt,pe=>{e(at).type==="control"&&pe(ee)},!0)}y(He,Xe)};C(Ce,He=>{e(at).type==="regulation"?He(Oe):He(Ze,!1)},!0)}y(xe,Qe)};C(Ne,xe=>{e(at).type==="mitigation"?xe(it):xe(ke,!1)},!0)}y(oe,Ue)};C(Ie,oe=>{e(at).type==="risk"?oe(we):oe(tt,!1)},!0)}y(ae,ze)};C(X,ae=>{e(at).type==="question"?ae($):ae(W,!1)})}d(k);var F=u(k,2);F.__click=()=>{e(at)?.type==="question"?(S(Et,"questions"),ri(e(se))):e(at)?.type==="risk"?(S(Et,"risks"),ri(e(se))):e(at)?.type==="regulation"?(S(Et,"regulations"),ri(e(se))):e(at)?.type==="control"&&(S(Et,"controls"),ri(e(se)))};var Z=c(F);d(F);var _e=u(F,2),ue=c(_e),Re=c(ue);d(ue);var fe=u(ue,2);{var H=ae=>{var ze=Mo();y(ae,ze)},Fe=ae=>{var ze=Wo();nt(ze,21,()=>e(V),st,(Ie,we)=>{const tt=z(()=>e(we).from.entity===e(at).type&&e(we).from.id===e(at).id),oe=z(()=>e(tt)?e(we).to.entity:e(we).from.entity),Ue=z(()=>e(tt)?e(we).to.id:e(we).from.id);var Ne=Bo();Ne.__click=()=>{S(T,e(we),!0),S(wt,!0)};var it=c(Ne),ke=c(it,!0);d(it);var xe=u(it,2),Qe=c(xe,!0);d(xe);var Ce=u(xe,2),Oe=c(Ce,!0);d(Ce);var Ze=u(Ce,2);{var He=Xe=>{var pt=Fo(),ee=c(pt,!0);d(pt),G(pe=>w(ee,pe),[()=>e(we).phases.map(pe=>pe.replace("phase-","P")).join(", ")]),y(Xe,pt)};C(Ze,Xe=>{e(we).phases&&Xe(He)})}d(Ne),G(Xe=>{ct(it,1,`conn-type ${e(we).type??""}`,"svelte-1jef3w8"),w(ke,e(we).type),w(Qe,e(tt)?"":""),ct(Ce,1,`conn-target ${e(oe)??""}`,"svelte-1jef3w8"),w(Oe,Xe)},[()=>Gi(e(oe),e(Ue))]),y(Ie,Ne)}),d(ze),y(ae,ze)};C(fe,ae=>{e(V).length===0?ae(H):ae(Fe,!1)})}d(_e);var et=u(_e,2);et.__click=()=>_i(e(at).type,e(at).id,new Event("click")),G(()=>{w(Z,`Edit ${e(at).type??""}`),w(Re,`Connections (${e(V).length??""})`)}),y(Je,ve)},yt=Je=>{var V=Jo();y(Je,V)};C(Te,Je=>{e(se)?Je(lt):Je(yt,!1)})}d(ge),G(()=>{ct(I,1,`badge ${e(at).type??""}`,"svelte-1jef3w8"),w(Y,e(at).type)}),y(Ve,ge)};C(Ke,Ve=>{e(at)&&Ve(Ye)})}y(Ae,$e)};C(ot,Ae=>{e(Yi)?Ae(ht,!1):Ae(bt)},!0)}y(De,We)};C(Dt,De=>{e(Kt)?De(Tt,!1):De(Ct)})}d(xt),d(M),Vt(Se,()=>e(vi),De=>S(vi,De)),y(be,Q)},N=be=>{var Q=rt(),Le=le(Q);{var R=M=>{var Ee=Tl(),je=le(Ee);{var Se=q=>{var k=Ho(),X=u(c(k)),$=c(X,!0);d(X);var W=u(X,2);W.__click=()=>S(B,null),d(k),G(F=>w($,F),[()=>Gi(e(B).type,e(B).id)]),y(q,k)},vt=q=>{var k=rt(),X=le(k);{var $=W=>{var F=Xo();y(W,F)};C(X,W=>{e(x)||W($)},!0)}y(q,k)};C(je,q=>{e(B)?q(Se):q(vt,!1)})}var ut=u(je,2),ft=c(ut);let At;ft.__click=()=>S(A,!e(A));var Qt=c(ft,!0);d(ft);var mt=u(ft,2);kt(mt),d(ut);var xt=u(ut,2),Dt=c(xt),Ct=c(Dt),Tt=c(Ct),De=u(c(Tt),4),We=c(De,!0);d(De),d(Tt);var ot=u(Tt,2);nt(ot,21,()=>fi(e(Gt),q=>q.text,"question"),st,(q,k)=>{const X=z(()=>Mi("question",e(k).id)),$=z(()=>hs(e(k).id)),W=z(()=>e(x)?.type==="question"&&e(x)?.id===e(k).id),F=z(()=>Pi("question",e(k).id)),Z=z(()=>$i("question",e(k).id)),_e=z(()=>e(A)&&e(x)&&!e(W)&&!e(F));var ue=rt(),Re=le(ue);{var fe=H=>{var Fe=rl();let et;Fe.__click=()=>ti("question",e(k).id),Fe.__keydown=Ce=>Ce.key==="Enter"&&ti("question",e(k).id);var ae=c(Fe),ze=c(ae),Ie=c(ze,!0);d(ze);var we=u(ze,2),tt=c(we,!0);d(we),d(ae);var oe=u(ae,2),Ue=c(oe,!0);d(oe);var Ne=u(oe,2);{var it=Ce=>{var Oe=tl(),Ze=c(Oe);{var He=ee=>{var pe=Zo(),jt=c(pe);d(pe),G(Nt=>{Wt(pe,"title",`Depends on: ${Nt??""}`),w(jt,` ${e($).dependsOn.length??""}`)},[()=>e($).dependsOn.join(", ")]),y(ee,pe)};C(Ze,ee=>{e($).dependsOn.length>0&&ee(He)})}var Xe=u(Ze,2);{var pt=ee=>{var pe=el(),jt=c(pe);d(pe),G(Nt=>{Wt(pe,"title",`Required by: ${Nt??""}`),w(jt,`${e($).dependedBy.length??""} `)},[()=>e($).dependedBy.join(", ")]),y(ee,pe)};C(Xe,ee=>{e($).dependedBy.length>0&&ee(pt)})}d(Oe),y(Ce,Oe)};C(Ne,Ce=>{(e($).dependsOn.length>0||e($).dependedBy.length>0)&&Ce(it)})}var ke=u(Ne,2);{var xe=Ce=>{var Oe=il(),Ze=c(Oe,!0);d(Oe),G(()=>w(Ze,e(Z).type)),y(Ce,Oe)};C(ke,Ce=>{e(F)&&e(Z)&&Ce(xe)})}var Qe=u(ke,2);Qe.__click=Ce=>_i("question",e(k).id,Ce),d(Fe),G(()=>{et=ct(Fe,1,"node question svelte-1jef3w8",null,et,{selected:e(W),connected:e(F),"has-deps":e($).dependsOn.length>0||e($).dependedBy.length>0,connecting:e(B)?.type==="question"&&e(B)?.id===e(k).id}),w(Ie,e(k).id),w(tt,e(X)),w(Ue,e(k).text)}),y(H,Fe)};C(Re,H=>{e(_e)||H(fe)})}y(q,ue)}),d(ot),d(Ct);var bt=u(Ct,2),ht=c(bt),Ae=u(c(ht),4),$e=c(Ae,!0);d(Ae),d(ht);var Be=u(ht,2);nt(Be,21,()=>fi(e(Rt),q=>q.shortName+" "+q.name,"risk"),st,(q,k)=>{const X=z(()=>Mi("risk",e(k).id)),$=z(()=>e(x)?.type==="risk"&&e(x)?.id===e(k).id),W=z(()=>Pi("risk",e(k).id)),F=z(()=>$i("risk",e(k).id)),Z=z(()=>e(A)&&e(x)&&!e($)&&!e(W));var _e=rt(),ue=le(_e);{var Re=fe=>{var H=sl();let Fe;H.__click=()=>ti("risk",e(k).id),H.__keydown=ke=>ke.key==="Enter"&&ti("risk",e(k).id);var et=c(H),ae=c(et),ze=c(ae,!0);d(ae);var Ie=u(ae,2),we=c(Ie,!0);d(Ie),d(et);var tt=u(et,2),oe=c(tt,!0);d(tt);var Ue=u(tt,2);{var Ne=ke=>{var xe=nl(),Qe=c(xe,!0);d(xe),G(()=>w(Qe,e(F).type)),y(ke,xe)};C(Ue,ke=>{e(W)&&e(F)&&ke(Ne)})}var it=u(Ue,2);it.__click=ke=>_i("risk",e(k).id,ke),d(H),G(()=>{Fe=ct(H,1,"node risk svelte-1jef3w8",null,Fe,{selected:e($),connected:e(W),connecting:e(B)?.type==="risk"&&e(B)?.id===e(k).id}),w(ze,e(k).code),w(we,e(X)),w(oe,e(k).shortName)}),y(fe,H)};C(ue,fe=>{e(Z)||fe(Re)})}y(q,_e)}),d(Be),d(bt);var Ge=u(bt,2),qe=c(Ge),Ke=u(c(qe),4),Ye=c(Ke,!0);d(Ke),d(qe);var Ve=u(qe,2);nt(Ve,21,()=>fi(e(ei),q=>q.name,"mitigation"),st,(q,k)=>{const X=z(()=>Mi("mitigation",e(k).id)),$=z(()=>e(It).filter(H=>H.subcategoryId===e(k).id).length),W=z(()=>e(x)?.type==="mitigation"&&e(x)?.id===e(k).id),F=z(()=>Pi("mitigation",e(k).id)),Z=z(()=>$i("mitigation",e(k).id)),_e=z(()=>e(A)&&e(x)&&!e(W)&&!e(F));var ue=rt(),Re=le(ue);{var fe=H=>{var Fe=ol();let et;Fe.__click=()=>ti("mitigation",e(k).id),Fe.__keydown=Oe=>Oe.key==="Enter"&&ti("mitigation",e(k).id);var ae=c(Fe),ze=c(ae),Ie=c(ze,!0);d(ze);var we=u(ze,2),tt=c(we,!0);d(we),d(ae);var oe=u(ae,2),Ue=c(oe,!0);d(oe);var Ne=u(oe,2),it=c(Ne),ke=c(it);d(it),d(Ne);var xe=u(Ne,2);{var Qe=Oe=>{var Ze=al(),He=c(Ze,!0);d(Ze),G(()=>w(He,e(Z).type)),y(Oe,Ze)};C(xe,Oe=>{e(F)&&e(Z)&&Oe(Qe)})}var Ce=u(xe,2);Ce.__click=Oe=>_i("mitigation",e(k).id,Oe),d(Fe),G(()=>{et=ct(Fe,1,"node mitigation svelte-1jef3w8",null,et,{selected:e(W),connected:e(F),connecting:e(B)?.type==="mitigation"&&e(B)?.id===e(k).id}),w(Ie,e(k).code),w(tt,e(X)),w(Ue,e(k).name),w(ke,`${e($)??""} controls`)}),y(H,Fe)};C(Re,H=>{e(_e)||H(fe)})}y(q,ue)}),d(Ve),d(Ge);var se=u(Ge,2),ge=c(se),te=u(c(ge),4),I=c(te,!0);d(te),d(ge);var Y=u(ge,2);nt(Y,21,()=>fi(e(ai),q=>q.citation+" "+q.description,"regulation"),st,(q,k)=>{const X=z(()=>Mi("regulation",e(k).id)),$=z(()=>e(x)?.type==="regulation"&&e(x)?.id===e(k).id),W=z(()=>Pi("regulation",e(k).id)),F=z(()=>$i("regulation",e(k).id)),Z=z(()=>e(A)&&e(x)&&!e($)&&!e(W));var _e=rt(),ue=le(_e);{var Re=fe=>{var H=dl();let Fe;H.__click=()=>ti("regulation",e(k).id),H.__keydown=ke=>ke.key==="Enter"&&ti("regulation",e(k).id);var et=c(H),ae=c(et),ze=c(ae,!0);d(ae);var Ie=u(ae,2),we=c(Ie,!0);d(Ie),d(et);var tt=u(et,2),oe=c(tt,!0);d(tt);var Ue=u(tt,2);{var Ne=ke=>{var xe=ll(),Qe=c(xe,!0);d(xe),G(()=>w(Qe,e(F).type)),y(ke,xe)};C(Ue,ke=>{e(W)&&e(F)&&ke(Ne)})}var it=u(Ue,2);it.__click=ke=>_i("regulation",e(k).id,ke),d(H),G(()=>{Fe=ct(H,1,"node regulation svelte-1jef3w8",null,Fe,{selected:e($),connected:e(W),connecting:e(B)?.type==="regulation"&&e(B)?.id===e(k).id}),w(ze,e(k).citation),w(we,e(X)),w(oe,e(k).description)}),y(fe,H)};C(ue,fe=>{e(Z)||fe(Re)})}y(q,_e)}),d(Y),d(se);var ie=u(se,2),Te=c(ie),lt=u(c(Te),4),yt=c(lt,!0);d(lt),d(Te);var Je=u(Te,2),V=c(Je);nt(V,17,()=>e(Ai).slice(0,50),st,(q,k)=>{const X=z(()=>Mi("control",e(k).id)),$=z(()=>ls(e(k).id)),W=z(()=>e(X)+e($)),F=z(()=>Zr(e(k).subcategoryId)),Z=z(()=>e(x)?.type==="control"&&e(x)?.id===e(k).id),_e=z(()=>Pi("control",e(k).id)),ue=z(()=>$i("control",e(k).id)),Re=z(()=>e(A)&&e(x)&&!e(Z)&&!e(_e));var fe=rt(),H=le(fe);{var Fe=et=>{var ae=hl();let ze;ae.__click=()=>ti("control",e(k).id),ae.__keydown=ee=>ee.key==="Enter"&&ti("control",e(k).id);var Ie=c(ae),we=c(Ie),tt=c(we,!0);d(we);var oe=u(we,2),Ue=c(oe,!0);d(oe),d(Ie);var Ne=u(Ie,2),it=c(Ne,!0);d(Ne);var ke=u(Ne,2),xe=c(ke),Qe=c(xe,!0);d(xe);var Ce=u(xe,2);{var Oe=ee=>{var pe=cl(),jt=c(pe,!0);d(pe),G(()=>w(jt,e(F).code)),y(ee,pe)};C(Ce,ee=>{e(F)&&ee(Oe)})}d(ke);var Ze=u(ke,2);{var He=ee=>{var pe=ul(),jt=c(pe,!0);d(pe),G(()=>w(jt,e(ue).type)),y(ee,pe)},Xe=ee=>{var pe=rt(),jt=le(pe);{var Nt=Yt=>{var ni=fl(),zt=c(ni);d(ni),G(()=>w(zt,`via ${(e(F)?.code||"category")??""}`)),y(Yt,ni)};C(jt,Yt=>{e(_e)&&Yt(Nt)},!0)}y(ee,pe)};C(Ze,ee=>{e(_e)&&e(ue)?ee(He):ee(Xe,!1)})}var pt=u(Ze,2);pt.__click=ee=>_i("control",e(k).id,ee),d(ae),G((ee,pe)=>{ze=ct(ae,1,"node control svelte-1jef3w8",null,ze,{selected:e(Z),connected:e(_e),connecting:e(B)?.type==="control"&&e(B)?.id===e(k).id}),w(tt,ee),Wt(oe,"title",`Direct: ${e(X)??""}, Via category: ${e($)??""}`),w(Ue,e(W)),w(it,e(k).name),w(Qe,pe)},[()=>e(k).id.split("_")[0],()=>e(k).phases?.map(ee=>ee.replace("phase-","P")).join(" ")]),y(et,ae)};C(H,et=>{e(Re)||et(Fe)})}y(q,fe)});var ve=u(V,2);{var Me=q=>{var k=vl(),X=c(k);d(k),G(()=>w(X,`...and ${e(Ai).length-50} more (use filters)`)),y(q,k)};C(ve,q=>{e(Ai).length>50&&q(Me)})}d(Je),d(ie),d(Dt);var _t=u(Dt,2);{var ye=q=>{var k=Cl(),X=c(k),$=c(X),W=c($,!0);d($);var F=u($,2);F.__click=()=>S(x,null),d(X);var Z=u(X,2);{var _e=Ie=>{var we=gl(),tt=le(we),oe=c(tt,!0);d(tt);var Ue=u(tt,2),Ne=c(Ue),it=c(Ne);d(Ne);var ke=u(Ne,2),xe=c(ke);d(ke);var Qe=u(ke,2),Ce=c(Qe);d(Qe),d(Ue);var Oe=u(Ue,2),Ze=u(c(Oe),2);nt(Ze,17,()=>e(ce).item.options,st,(Xe,pt)=>{var ee=pl(),pe=c(ee,!0);d(ee),G(()=>w(pe,e(pt).label)),y(Xe,ee)}),d(Oe);var He=u(Oe,2);He.__click=()=>{S(Et,"questions"),ri(e(ce).item)},G(()=>{w(oe,e(ce).item.text),w(it,`ID: ${e(ce).item.id??""}`),w(xe,`Type: ${e(ce).item.type??""}`),w(Ce,`Category: ${e(ce).item.category??""}`)}),y(Ie,we)},ue=Ie=>{var we=rt(),tt=le(we);{var oe=Ne=>{var it=yl(),ke=le(it),xe=c(ke,!0);d(ke);var Qe=u(ke,2),Ce=c(Qe),Oe=c(Ce);d(Ce);var Ze=u(Ce,2),He=c(Ze);d(Ze),d(Qe);var Xe=u(Qe,2),pt=c(Xe,!0);d(Xe);var ee=u(Xe,2);ee.__click=()=>{S(Et,"risks"),ri(e(ce).item)},G(()=>{w(xe,e(ce).item.name),w(Oe,`Code: ${e(ce).item.code??""}`),w(He,`Domain: ${e(ce).item.domain??""}`),w(pt,e(ce).item.shortName)}),y(Ne,it)},Ue=Ne=>{var it=rt(),ke=le(it);{var xe=Ce=>{const Oe=z(()=>e(It).filter(zt=>zt.subcategoryId===e(ce).item?.id));var Ze=bl(),He=le(Ze),Xe=c(He,!0);d(He);var pt=u(He,2),ee=c(pt),pe=c(ee);d(ee);var jt=u(ee,2),Nt=c(jt);d(jt),d(pt);var Yt=u(pt,2);{var ni=zt=>{var wi=ml(),li=c(wi),Fi=c(li);d(li);var Xi=u(li,2),Bi=c(Xi);nt(Bi,17,()=>e(Oe).slice(0,10),st,(mi,si)=>{var bi=_l(),Wi=c(bi),mr=c(Wi,!0);d(Wi);var Ni=u(Wi,2),er=c(Ni,!0);d(Ni),d(bi),G(ji=>{w(mr,e(si).name),w(er,ji)},[()=>e(si).phases?.map(ji=>ji.replace("phase-","P")).join(", ")]),y(mi,bi)});var wr=u(Bi,2);{var Zi=mi=>{var si=wl(),bi=c(si);d(si),G(()=>w(bi,`...and ${e(Oe).length-10} more`)),y(mi,si)};C(wr,mi=>{e(Oe).length>10&&mi(Zi)})}d(Xi),d(wi),G(()=>w(Fi,`Controls (${e(Oe).length??""}):`)),y(zt,wi)};C(Yt,zt=>{e(Oe).length>0&&zt(ni)})}G(()=>{w(Xe,e(ce).item.name),w(pe,`Code: ${e(ce).item.code??""}`),w(Nt,`Category: ${e(ce).item.category??""}`)}),y(Ce,Ze)},Qe=Ce=>{var Oe=rt(),Ze=le(Oe);{var He=pt=>{var ee=jl(),pe=le(ee),jt=c(pe,!0);d(pe);var Nt=u(pe,2),Yt=c(Nt),ni=c(Yt,!0);d(Yt),d(Nt);var zt=u(Nt,2),wi=c(zt,!0);d(zt);var li=u(zt,2);li.__click=()=>{S(Et,"regulations"),ri(e(ce).item)},G(()=>{w(jt,e(ce).item.citation),w(ni,e(ce).item.framework),w(wi,e(ce).item.description)}),y(pt,ee)},Xe=pt=>{var ee=rt(),pe=le(ee);{var jt=Nt=>{const Yt=z(()=>Zr(e(ce).item.subcategoryId));var ni=$l(),zt=le(ni),wi=c(zt,!0);d(zt);var li=u(zt,2),Fi=c(li),Xi=c(Fi);d(Fi);var Bi=u(Fi,2),wr=c(Bi);d(Bi),d(li);var Zi=u(li,2);{var mi=Ft=>{var Pt=kl(),Bt=c(Pt,!0);d(Pt),G(()=>w(Bt,e(ce).item.description)),y(Ft,Pt)};C(Zi,Ft=>{e(ce).item.description&&Ft(mi)})}var si=u(Zi,2),bi=u(c(si),2);{var Wi=Ft=>{var Pt=xl(),Bt=c(Pt);d(Pt),G(()=>w(Bt,`${e(Yt).code??""}: ${e(Yt).name??""}`)),y(Ft,Pt)},mr=Ft=>{var Pt=El(),Bt=c(Pt,!0);d(Pt),G(()=>w(Bt,e(ce).item.subcategoryId)),y(Ft,Pt)};C(bi,Ft=>{e(Yt)?Ft(Wi):Ft(mr,!1)})}d(si);var Ni=u(si,2),er=u(c(Ni),2);nt(er,21,()=>e(ce).item.phases||[],st,(Ft,Pt)=>{var Bt=Sl(),br=c(Bt,!0);d(Bt),G(Ls=>w(br,Ls),[()=>e(Pt).replace("phase-","P")]),y(Ft,Bt)}),d(er),d(Ni);var ji=u(Ni,2),vn=u(c(ji),2);nt(vn,21,()=>e(ce).item.techTypes||[],st,(Ft,Pt)=>{var Bt=Al(),br=c(Bt,!0);d(Bt),G(()=>w(br,e(Pt))),y(Ft,Bt)}),d(vn),d(ji);var Ns=u(ji,2);Ns.__click=()=>{S(Et,"controls"),ri(e(ce).item)},G(()=>{w(wi,e(ce).item.name),w(Xi,`ID: ${e(ce).item.id??""}`),w(wr,`Source: ${e(ce).item.source??""}`)}),y(Nt,ni)};C(pe,Nt=>{e(ce).type==="control"&&e(ce).item&&Nt(jt)},!0)}y(pt,ee)};C(Ze,pt=>{e(ce).type==="regulation"&&e(ce).item?pt(He):pt(Xe,!1)},!0)}y(Ce,Oe)};C(ke,Ce=>{e(ce).type==="mitigation"&&e(ce).item?Ce(xe):Ce(Qe,!1)},!0)}y(Ne,it)};C(tt,Ne=>{e(ce).type==="risk"&&e(ce).item?Ne(oe):Ne(Ue,!1)},!0)}y(Ie,we)};C(Z,Ie=>{e(ce).type==="question"&&e(ce).item?Ie(_e):Ie(ue,!1)})}var Re=u(Z,2),fe=c(Re),H=c(fe);d(fe);var Fe=u(fe,2);{var et=Ie=>{var we=Gl();y(Ie,we)},ae=Ie=>{var we=Dl();nt(we,21,()=>e(ce).connections,st,(tt,oe)=>{const Ue=z(()=>e(oe).from.entity===e(ce).type&&e(oe).from.id===e(ce).item?.id),Ne=z(()=>e(Ue)?e(oe).to.entity:e(oe).from.entity),it=z(()=>e(Ue)?e(oe).to.id:e(oe).from.id);var ke=Ll();ke.__click=()=>{S(T,e(oe),!0),S(wt,!0)};var xe=c(ke),Qe=c(xe,!0);d(xe);var Ce=u(xe,2),Oe=c(Ce,!0);d(Ce);var Ze=u(Ce,2),He=c(Ze,!0);d(Ze);var Xe=u(Ze,2);{var pt=ee=>{var pe=Nl(),jt=c(pe,!0);d(pe),G(Nt=>w(jt,Nt),[()=>e(oe).phases.map(Nt=>Nt.replace("phase-","P")).join(", ")]),y(ee,pe)};C(Xe,ee=>{e(oe).phases&&ee(pt)})}d(ke),G(ee=>{ct(xe,1,`conn-type ${e(oe).type??""}`,"svelte-1jef3w8"),w(Qe,e(oe).type),w(Oe,e(Ue)?"":""),ct(Ze,1,`conn-target ${e(Ne)??""}`,"svelte-1jef3w8"),w(He,ee)},[()=>Gi(e(Ne),e(it))]),y(tt,ke)}),d(we),y(Ie,we)};C(Fe,Ie=>{e(ce).connections.length===0?Ie(et):Ie(ae,!1)})}d(Re);var ze=u(Re,2);ze.__click=()=>_i(e(ce).type,e(ce).item?.id||"",new Event("click")),d(k),G(()=>{ct($,1,`detail-type ${e(ce).type??""}`,"svelte-1jef3w8"),w(W,e(ce).type),w(H,`Connections (${e(ce).connections.length??""})`)}),y(q,k)};C(_t,q=>{e(ce)&&q(ye)})}d(xt),G(()=>{At=ct(ft,1,"btn focus-toggle svelte-1jef3w8",null,At,{active:e(A)}),w(Qt,e(A)?"Focus: ON":"Focus"),Wt(De,"title",`${e(Br)??""} of ${e(Gt).length??""}`),w(We,e(Br)),Wt(Ae,"title",`${e(Wr)??""} of ${e(Rt).length??""}`),w($e,e(Wr)),Wt(Ke,"title",`${e(Kr)??""} of ${e(ei).length??""}`),w(Ye,e(Kr)),Wt(te,"title",`${e(Jr)??""} of ${e(ai).length??""}`),w(I,e(Jr)),Wt(lt,"title",`${e(Qr)??""} of ${e(Ai).length??""}`),w(yt,e(Qr))}),$t(mt,()=>e(L),q=>S(L,q)),y(M,Ee)};C(Le,M=>{e(O)==="graph"&&M(R)},!0)}y(be,Q)};C(p,be=>{e(O)==="trace"?be(m):be(N,!1)},!0)}y(l,h)};C(xs,l=>{e(O)==="matrix"?l(Es):l(Ss,!1)})}d(hr);var hn=u(hr,2);{var As=l=>{var h=Hl(),p=c(h),m=c(p),N=c(m),be=c(N);d(N);var Q=u(N,2);Q.__click=()=>{S(Si,!1),S(P,null)},d(m);var Le=u(m,2),R=c(Le);{var M=mt=>{var xt=Il(),Dt=le(xt),Ct=u(c(Dt),2);kt(Ct),d(Dt);var Tt=u(Dt,2),De=u(c(Tt),2);kt(De),d(Tt);var We=u(Tt,2),ot=u(c(We),2);kt(ot),d(We);var bt=u(We,2),ht=u(c(bt),2);kt(ht),d(bt);var Ae=u(bt,2),$e=u(c(Ae),4);{var Be=Ge=>{var qe=Rl(),Ke=le(qe),Ye=u(c(Ke),2);ki(Ye),d(Ke);var Ve=u(Ke,2),se=u(c(Ve),2);ki(se),d(Ve);var ge=u(Ve,2),te=u(c(ge),2);ki(te),d(ge),$t(Ye,()=>e(P).phaseGuidance["phase-1"],I=>e(P).phaseGuidance["phase-1"]=I),$t(se,()=>e(P).phaseGuidance["phase-2"],I=>e(P).phaseGuidance["phase-2"]=I),$t(te,()=>e(P).phaseGuidance["phase-3"],I=>e(P).phaseGuidance["phase-3"]=I),y(Ge,qe)};C($e,Ge=>{e(P).phaseGuidance&&Ge(Be)})}d(Ae),$t(Ct,()=>e(P).code,Ge=>e(P).code=Ge),$t(De,()=>e(P).shortName,Ge=>e(P).shortName=Ge),$t(ot,()=>e(P).name,Ge=>e(P).name=Ge),$t(ht,()=>e(P).domain,Ge=>e(P).domain=Ge),y(mt,xt)},Ee=mt=>{var xt=rt(),Dt=le(xt);{var Ct=De=>{var We=Fl(),ot=le(We),bt=u(c(ot),2);kt(bt),d(ot);var ht=u(ot,2),Ae=u(c(ht),2);ki(Ae),d(ht);var $e=u(ht,2),Be=u(c($e),2),Ge=c(Be);Ge.value=Ge.__value="yes-no";var qe=u(Ge);qe.value=qe.__value="single-select";var Ke=u(qe);Ke.value=Ke.__value="multi-select",d(Be),d($e);var Ye=u($e,2),Ve=u(c(Ye),2);kt(Ve),d(Ye);var se=u(Ye,2),ge=u(c(se),2);{var te=V=>{var ve=Ol();y(V,ve)},I=V=>{var ve=ql();nt(ve,21,()=>Object.entries(e(P).showIf),st,(Me,_t)=>{var ye=z(()=>yn(e(_t),2));let q=()=>e(ye)[0],k=()=>e(ye)[1];const X=z(()=>e(Gt).find(H=>H.id===q()));var $=Ul(),W=c($),F=c(W,!0);d(W);var Z=u(W,4),_e=c(Z);{var ue=H=>{var Fe=Mt();G(et=>w(Fe,et),[()=>k().map(et=>e(X)?.options?.find(ze=>ze.value===et)?.label||et).join(" OR ")]),y(H,Fe)},Re=H=>{const Fe=z(()=>e(X)?.options?.find(ae=>ae.value===k()));var et=Mt();G(()=>w(et,e(Fe)?.label||k())),y(H,et)};C(_e,H=>{Array.isArray(k())?H(ue):H(Re,!1)})}d(Z);var fe=u(Z,2);fe.__click=()=>{const H={...e(P).showIf};delete H[q()],e(P).showIf=Object.keys(H).length>0?H:void 0},d($),G(()=>w(F,e(X)?.text||q())),y(Me,$)}),d(ve),y(V,ve)};C(ge,V=>{!e(P).showIf||Object.keys(e(P).showIf).length===0?V(te):V(I,!1)})}var Y=u(ge,2),ie=c(Y);ie.__change=()=>{S(Jt,[],!0)};var Te=c(ie);Te.value=Te.__value="";var lt=u(Te);nt(lt,17,()=>e(Gt).filter(V=>V.id!==e(P).id),st,(V,ve)=>{var Me=zl(),_t=c(Me,!0);d(Me);var ye={};G(q=>{Me.disabled=e(P).showIf?.[e(ve).id]!==void 0,w(_t,q),ye!==(ye=e(ve).id)&&(Me.value=(Me.__value=e(ve).id)??"")},[()=>e(ve).text.length>50?e(ve).text.slice(0,50)+"...":e(ve).text]),y(V,Me)}),d(ie);var yt=u(ie,2);{var Je=V=>{const ve=z(()=>e(Gt).find(q=>q.id===e(gi)));var Me=rt(),_t=le(Me);{var ye=q=>{var k=Ml(),X=le(k),$=u(c(X),2);nt($,17,()=>e(ve).options,st,(F,Z)=>{var _e=Pl(),ue=c(_e);kt(ue),ue.__change=fe=>{fe.currentTarget.checked?S(Jt,[...e(Jt),e(Z).value],!0):S(Jt,e(Jt).filter(H=>H!==e(Z).value),!0)};var Re=u(ue);d(_e),G(fe=>{Li(ue,fe),w(Re,` ${e(Z).label??""}`)},[()=>e(Jt).includes(e(Z).value)]),y(F,_e)}),d(X);var W=u(X,2);W.__click=()=>{const F={...e(P).showIf};F[e(gi)]=e(Jt).length===1?e(Jt)[0]:[...e(Jt)],e(P).showIf=F,S(gi,""),S(Jt,[],!0)},G(()=>W.disabled=e(Jt).length===0),y(q,k)};C(_t,q=>{e(ve)?.options&&q(ye)})}y(V,Me)};C(yt,V=>{e(gi)&&V(Je)})}d(Y),d(se),$t(bt,()=>e(P).id,V=>e(P).id=V),$t(Ae,()=>e(P).text,V=>e(P).text=V),Vt(Be,()=>e(P).type,V=>e(P).type=V),$t(Ve,()=>e(P).category,V=>e(P).category=V),Vt(ie,()=>e(gi),V=>S(gi,V)),y(De,We)},Tt=De=>{var We=rt(),ot=le(We);{var bt=Ae=>{var $e=Bl(),Be=le($e),Ge=u(c(Be),2);kt(Ge),d(Be);var qe=u(Be,2),Ke=u(c(qe),2);ki(Ke),d(qe);var Ye=u(qe,2),Ve=u(c(Ye),2);kt(Ve),d(Ye),$t(Ge,()=>e(P).citation,se=>e(P).citation=se),$t(Ke,()=>e(P).description,se=>e(P).description=se),$t(Ve,()=>e(P).framework,se=>e(P).framework=se),y(Ae,$e)},ht=Ae=>{var $e=rt(),Be=le($e);{var Ge=qe=>{var Ke=Ql(),Ye=le(Ke),Ve=u(c(Ye),2);kt(Ve),d(Ye);var se=u(Ye,2),ge=u(c(se),2);kt(ge),d(se);var te=u(se,2),I=u(c(te),2);ki(I),d(te);var Y=u(te,2),ie=u(c(Y),2);kt(ie),d(Y);var Te=u(Y,2),lt=u(c(Te),2),yt=c(lt);yt.value=yt.__value="";var Je=u(yt);nt(Je,17,()=>t.data.controlSubcategories,st,($,W)=>{var F=Wl(),Z=c(F);d(F);var _e={};G(()=>{w(Z,`${e(W).code??""} ${e(W).name??""}`),_e!==(_e=e(W).id)&&(F.value=(F.__value=e(W).id)??"")}),y($,F)}),d(lt),d(Te);var V=u(Te,2),ve=u(c(V),2);nt(ve,21,()=>E,st,($,W)=>{var F=Kl(),Z=c(F);kt(Z),Z.__change=ue=>{ue.currentTarget.checked?e(P).phases=[...e(P).phases||[],e(W).id]:e(P).phases=(e(P).phases||[]).filter(Re=>Re!==e(W).id)};var _e=u(Z);d(F),G(ue=>{Li(Z,ue),w(_e,` ${e(W).name??""}`)},[()=>e(P).phases?.includes(e(W).id)]),y($,F)}),d(ve),d(V);var Me=u(V,2),_t=u(c(Me),2),ye=c(_t),q=c(ye);kt(q),q.__change=$=>{$.currentTarget.checked?e(P).techTypes=["all"]:e(P).techTypes=[]},ir(),d(ye);var k=u(ye,2);{var X=$=>{var W=rt(),F=le(W);nt(F,17,()=>t.data.modelTypes,st,(Z,_e)=>{var ue=Jl(),Re=c(ue);kt(Re),Re.__change=H=>{H.currentTarget.checked?e(P).techTypes=[...(e(P).techTypes||[]).filter(Fe=>Fe!=="all"),e(_e).id]:e(P).techTypes=(e(P).techTypes||[]).filter(Fe=>Fe!==e(_e).id)};var fe=u(Re);d(ue),G(H=>{Li(Re,H),w(fe,` ${e(_e).name??""}`)},[()=>e(P).techTypes?.includes(e(_e).id)]),y(Z,ue)}),y($,W)};C(k,$=>{e(P).techTypes?.includes("all")||$(X)})}d(_t),d(Me),G($=>Li(q,$),[()=>e(P).techTypes?.includes("all")]),$t(Ve,()=>e(P).id,$=>e(P).id=$),$t(ge,()=>e(P).name,$=>e(P).name=$),$t(I,()=>e(P).description,$=>e(P).description=$),$t(ie,()=>e(P).source,$=>e(P).source=$),Vt(lt,()=>e(P).subcategoryId,$=>e(P).subcategoryId=$),y(qe,Ke)};C(Be,qe=>{e(Et)==="controls"&&qe(Ge)},!0)}y(Ae,$e)};C(ot,Ae=>{e(Et)==="regulations"?Ae(bt):Ae(ht,!1)},!0)}y(De,We)};C(Dt,De=>{e(Et)==="questions"?De(Ct):De(Tt,!1)},!0)}y(mt,xt)};C(R,mt=>{e(Et)==="risks"?mt(M):mt(Ee,!1)})}d(Le);var je=u(Le,2),Se=c(je);{var vt=mt=>{var xt=Yl();xt.__click=_s,y(mt,xt)},ut=mt=>{var xt=Vl();y(mt,xt)};C(Se,mt=>{e(Vi)?mt(ut,!1):mt(vt)})}var ft=u(Se,2),At=c(ft);At.__click=()=>{S(Si,!1),S(P,null)};var Qt=u(At,2);Qt.__click=ys,d(ft),d(je),d(p),d(h),G(mt=>w(be,`${e(Vi)?"New":"Edit"} ${mt??""}`),[()=>e(Et).slice(0,-1)]),y(l,h)};C(hn,l=>{e(Si)&&e(P)&&l(As)})}var $s=u(hn,2);{var Gs=l=>{var h=ld(),p=c(h),m=c(p),N=c(m),be=c(N);d(N);var Q=u(N,2);Q.__click=()=>{S(wt,!1),S(T,null)},d(m);var Le=u(m,2),R=c(Le),M=c(R);M.__click=()=>{S(Zt,"from"),S(pi,"")};var Ee=c(M);ir(),d(M);var je=u(M,4);je.__click=()=>{S(Zt,"to"),S(pi,"")};var Se=c(je);ir(),d(je),d(R);var vt=u(R,2);{var ut=te=>{var I=ed(),Y=c(I),ie=c(Y),Te=c(ie);d(ie);var lt=u(ie,2);lt.__click=()=>S(Zt,null),d(Y);var yt=u(Y,2),Je=c(yt);kt(Je);var V=u(Je,2),ve=c(V);ve.value=ve.__value="name";var Me=u(ve);Me.value=Me.__value="code";var _t=u(Me);_t.value=_t.__value="category",d(V),d(yt);var ye=u(yt,2);nt(ye,21,()=>e(ps),st,(q,k)=>{var X=Xl();let $;X.__click=()=>gs(e(k));var W=c(X),F=c(W,!0);d(W);var Z=u(W,2),_e=c(Z,!0);d(Z);var ue=u(Z,2),Re=c(ue,!0);d(ue),d(X),G(()=>{$=ct(X,1,"entity-option svelte-1jef3w8",null,$,{selected:e(T)[e(Zt)]?.id===e(k).id}),ct(W,1,`entity-code ${e(k).type??""}`,"svelte-1jef3w8"),w(F,e(k).code),w(_e,e(k).name),w(Re,e(k).category)}),y(q,X)},q=>{var k=Zl();y(q,k)}),d(ye),d(I),G(()=>w(Te,`Select ${e(Zt)==="from"?"source":"target"}:`)),$t(Je,()=>e(pi),q=>S(pi,q)),Vt(V,()=>e(Ui),q=>S(Ui,q)),y(te,I)};C(vt,te=>{e(Zt)&&te(ut)})}var ft=u(vt,2),At=u(c(ft),2);At.__change=()=>{e(T).type==="trigger"?(e(T).from={entity:"question",id:e(Gt)[0]?.id||""},e(T).to={entity:"risk",id:e(Rt)[0]?.id||""}):e(T).type==="dependency"?(e(T).from={entity:"question",id:e(Gt)[0]?.id||""},e(T).to={entity:"question",id:e(Gt)[1]?.id||e(Gt)[0]?.id||""}):e(T).type==="mitigation"?(e(T).from={entity:"risk",id:e(Rt)[0]?.id||""},e(T).to={entity:"mitigation",id:e(ei)[0]?.id||""}):e(T).type==="regulation"?(e(T).from={entity:"risk",id:e(Rt)[0]?.id||""},e(T).to={entity:"regulation",id:e(ai)[0]?.id||""}):e(T).type==="control"?(e(T).from={entity:"risk",id:e(Rt)[0]?.id||""},e(T).to={entity:"control",id:e(It)[0]?.id||""}):e(T).type==="implementation"&&(e(T).from={entity:"mitigation",id:e(ei)[0]?.id||""},e(T).to={entity:"control",id:e(It)[0]?.id||""})};var Qt=c(At);Qt.value=Qt.__value="trigger";var mt=u(Qt);mt.value=mt.__value="dependency";var xt=u(mt);xt.value=xt.__value="mitigation";var Dt=u(xt);Dt.value=Dt.__value="regulation";var Ct=u(Dt);Ct.value=Ct.__value="control";var Tt=u(Ct);Tt.value=Tt.__value="implementation";var De=u(Tt);De.value=De.__value="custom",d(At),d(ft);var We=u(ft,2),ot=u(c(We),2);nt(ot,21,()=>E,st,(te,I)=>{var Y=td(),ie=c(Y);kt(ie),ie.__change=lt=>{lt.currentTarget.checked?e(T).phases=[...e(T).phases||[],e(I).id]:e(T).phases=(e(T).phases||[]).filter(yt=>yt!==e(I).id)};var Te=u(ie);d(Y),G(lt=>{Li(ie,lt),w(Te,` ${e(I).name??""}`)},[()=>e(T).phases?.includes(e(I).id)||!1]),y(te,Y)}),d(ot),d(We);var bt=u(We,2);{var ht=te=>{const I=z(()=>Hi(e(T).from.id));var Y=rt(),ie=le(Y);{var Te=lt=>{var yt=rd(),Je=le(yt),V=u(c(Je),2);nt(V,21,()=>e(I).options,st,(q,k)=>{var X=id(),$=c(X);kt($),$.__change=F=>{F.currentTarget.checked?e(T).answerValues=[...e(T).answerValues||[],e(k).value]:e(T).answerValues=(e(T).answerValues||[]).filter(Z=>Z!==e(k).value)};var W=u($);d(X),G(F=>{Li($,F),w(W,` ${e(k).label??""}`)},[()=>e(T).answerValues?.includes(e(k).value)||!1]),y(q,X)}),d(V),d(Je);var ve=u(Je,2),Me=u(c(ve),2),_t=c(Me);_t.value=_t.__value="OR";var ye=u(_t);ye.value=ye.__value="AND",d(Me),d(ve),Vt(Me,()=>e(T).logic,q=>e(T).logic=q),y(lt,yt)};C(ie,lt=>{e(I)&&lt(Te)})}y(te,Y)};C(bt,te=>{e(T).type==="trigger"&&e(T).from.entity==="question"&&te(ht)})}var Ae=u(bt,2);{var $e=te=>{var I=sd(),Y=u(c(I),2);nt(Y,17,()=>E,st,(ie,Te)=>{var lt=rt(),yt=le(lt);{var Je=V=>{var ve=nd(),Me=c(ve),_t=c(Me,!0);d(Me);var ye=u(Me,2);ki(ye),ye.__input=q=>{e(T).guidance||(e(T).guidance={}),e(T).guidance[e(Te).id]=q.currentTarget.value},d(ve),G(()=>{w(_t,e(Te).short),Wt(ye,"placeholder",`Guidance for ${e(Te).name??""}...`),Rs(ye,e(T).guidance?.[e(Te).id]||"")}),y(V,ve)};C(yt,V=>{e(T).phases?.includes(e(Te).id)&&V(Je)})}y(ie,lt)}),d(I),y(te,I)};C(Ae,te=>{e(T).type==="mitigation"&&te($e)})}var Be=u(Ae,2);{var Ge=te=>{var I=ad(),Y=u(c(I),2);kt(Y),d(I),$t(Y,()=>e(T).note,ie=>e(T).note=ie),y(te,I)};C(Be,te=>{e(T).type==="regulation"&&te(Ge)})}d(Le);var qe=u(Le,2),Ke=c(qe);{var Ye=te=>{var I=od();I.__click=us,y(te,I)};C(Ke,te=>{e(o).some(I=>I.id===e(T).id)&&te(Ye)})}var Ve=u(Ke,2),se=c(Ve);se.__click=()=>{S(wt,!1),S(T,null)};var ge=u(se,2);ge.__click=cs,d(Ve),d(qe),d(p),d(h),G((te,I,Y)=>{w(be,`${te??""} Link`),ct(M,1,`link-node-btn ${e(T).from.entity??""}`,"svelte-1jef3w8"),w(Ee,`${I??""} `),ct(je,1,`link-node-btn ${e(T).to.entity??""}`,"svelte-1jef3w8"),w(Se,`${Y??""} `)},[()=>e(o).some(te=>te.id===e(T).id)?"Edit":"New",()=>Gi(e(T).from.entity,e(T).from.id),()=>Gi(e(T).to.entity,e(T).to.id)]),Vt(At,()=>e(T).type,te=>e(T).type=te),y(l,h)};C($s,l=>{e(wt)&&e(T)&&l(Gs)})}G(()=>{nn=ct(gr,1,"svelte-1jef3w8",null,nn,{active:e(O)==="matrix"}),sn=ct(yr,1,"svelte-1jef3w8",null,sn,{active:e(O)==="trace"}),on=ct(an,1,"svelte-1jef3w8",null,on,{active:e(O)==="graph"})}),y(s,tn),On()}Un(["click","change","keydown","input"]);export{kd as component,jd as universal};
