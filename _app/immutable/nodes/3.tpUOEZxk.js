import{b as hi}from"../chunks/nO5jAwqF.js";import{f as j,a as y,c as rt,t as Mt}from"../chunks/B1gL-7lK.js";import{a3 as On,a0 as c,Y as u,_ as $,a6 as Un,a1 as d,g as e,a4 as st,a5 as Ki,o as gn,s as E,Z as ae,a as Ts,a7 as P,$ as Rs,a2 as ir,a8 as ki,n as yn,b0 as _n}from"../chunks/B2ozAt4z.js";import{d as qn,s as m,e as rr}from"../chunks/cWCuwL6a.js";import{i as L}from"../chunks/Ihk7Vvt8.js";import{e as ot,i as at,s as ut}from"../chunks/D8ej239B.js";import{h as Is}from"../chunks/CvM5vjvj.js";import{r as Et,a as Li,s as Wt,b as Os}from"../chunks/Bw5DiEUF.js";import{s as Us}from"../chunks/itcv0iKE.js";import{a as wn,b as Gt}from"../chunks/Dw1h4QgV.js";import{i as qs,s as zs,b as Ht}from"../chunks/QgxjcirX.js";import{b as Ps}from"../chunks/DBz3EcEZ.js";const Ms=async({fetch:s})=>{const[t,i,r,n,o,a,f,p]=await Promise.all([s(`${hi}/data/assessment-questions.json`),s(`${hi}/data/traceability.json`),s(`${hi}/data/risk-subdomains.json`),s(`${hi}/data/risk-domains.json`),s(`${hi}/data/mitigation-strategies.json`),s(`${hi}/data/cfr-regulations.json`),s(`${hi}/data/technical-controls.json`),s(`${hi}/data/model-types.json`)]),g=await t.json(),w=await i.json(),b=await r.json(),S=await n.json(),R=await o.json(),de=await a.json(),ve=await f.json(),x=await p.json();return{questionCategories:g.questionCategories,traceability:w,subdomains:b.riskSubdomains,domains:S.riskDomains,mitigationCategories:R.mitigationCategories,regulations:de.regulations,controlCategories:ve.controlCategories,controlSubcategories:ve.controlSubcategories,controls:ve.controls,modelTypes:x.modelTypes}},Ad=Object.freeze(Object.defineProperty({__proto__:null,load:Ms},Symbol.toStringTag,{value:"Module"}));var Fs=j("<button> </button>"),Bs=j("<option> </option>"),Ws=j('<div class="global-filters svelte-9jwgxy"><div class="filter-group svelte-9jwgxy"><span class="filter-label svelte-9jwgxy">Phase:</span> <div class="phase-filter svelte-9jwgxy"><button>All</button> <!></div></div> <div class="filter-group svelte-9jwgxy"><span class="filter-label svelte-9jwgxy">Tech:</span> <select class="tech-filter svelte-9jwgxy"><option>All Types</option><!></select></div></div>');function Ks(s,t){On(t,!0);var i=Ws(),r=c(i),n=u(c(r),2),o=c(n);o.__click=()=>t.onPhaseChange("all");let a;var f=u(o,2);ot(f,17,()=>t.phases,at,(R,de)=>{var ve=Fs();ve.__click=()=>t.onPhaseChange(e(de).id);let x;var B=c(ve,!0);d(ve),$(()=>{x=ut(ve,1,"svelte-9jwgxy",null,x,{active:t.selectedPhase===e(de).id}),m(B,e(de).short)}),y(R,ve)}),d(n),d(r);var p=u(r,2),g=u(c(p),2);g.__change=R=>t.onTechTypeChange(R.target.value);var w=c(g);w.value=w.__value="all";var b=u(w);ot(b,17,()=>t.modelTypes,at,(R,de)=>{var ve=Bs(),x=c(ve,!0);d(ve);var B={};$(()=>{m(x,e(de).name),B!==(B=e(de).id)&&(ve.value=(ve.__value=e(de).id)??"")}),y(R,ve)}),d(g);var S;qs(g),d(p),d(i),$(()=>{a=ut(o,1,"svelte-9jwgxy",null,a,{active:t.selectedPhase==="all"}),S!==(S=t.selectedTechType)&&(g.value=(g.__value=t.selectedTechType)??"",zs(g,t.selectedTechType))}),y(s,i),Un()}qn(["click","change"]);var nr={exports:{}},mn;function Qs(){if(mn)return nr.exports;mn=1;var s=typeof Reflect=="object"?Reflect:null,t=s&&typeof s.apply=="function"?s.apply:function(A,C,Q){return Function.prototype.apply.call(A,C,Q)},i;s&&typeof s.ownKeys=="function"?i=s.ownKeys:Object.getOwnPropertySymbols?i=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:i=function(A){return Object.getOwnPropertyNames(A)};function r(D){console&&console.warn&&console.warn(D)}var n=Number.isNaN||function(A){return A!==A};function o(){o.init.call(this)}nr.exports=o,nr.exports.once=B,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function f(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(D){if(typeof D!="number"||D<0||n(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");a=D}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||n(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function p(D){return D._maxListeners===void 0?o.defaultMaxListeners:D._maxListeners}o.prototype.getMaxListeners=function(){return p(this)},o.prototype.emit=function(A){for(var C=[],Q=1;Q<arguments.length;Q++)C.push(arguments[Q]);var _e=A==="error",Me=this._events;if(Me!==void 0)_e=_e&&Me.error===void 0;else if(!_e)return!1;if(_e){var Ee;if(C.length>0&&(Ee=C[0]),Ee instanceof Error)throw Ee;var Ut=new Error("Unhandled error."+(Ee?" ("+Ee.message+")":""));throw Ut.context=Ee,Ut}var ui=Me[A];if(ui===void 0)return!1;if(typeof ui=="function")t(ui,this,C);else for(var Yi=ui.length,qt=de(ui,Yi),Q=0;Q<Yi;++Q)t(qt[Q],this,C);return!0};function g(D,A,C,Q){var _e,Me,Ee;if(f(C),Me=D._events,Me===void 0?(Me=D._events=Object.create(null),D._eventsCount=0):(Me.newListener!==void 0&&(D.emit("newListener",A,C.listener?C.listener:C),Me=D._events),Ee=Me[A]),Ee===void 0)Ee=Me[A]=C,++D._eventsCount;else if(typeof Ee=="function"?Ee=Me[A]=Q?[C,Ee]:[Ee,C]:Q?Ee.unshift(C):Ee.push(C),_e=p(D),_e>0&&Ee.length>_e&&!Ee.warned){Ee.warned=!0;var Ut=new Error("Possible EventEmitter memory leak detected. "+Ee.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ut.name="MaxListenersExceededWarning",Ut.emitter=D,Ut.type=A,Ut.count=Ee.length,r(Ut)}return D}o.prototype.addListener=function(A,C){return g(this,A,C,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(A,C){return g(this,A,C,!0)};function w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(D,A,C){var Q={fired:!1,wrapFn:void 0,target:D,type:A,listener:C},_e=w.bind(Q);return _e.listener=C,Q.wrapFn=_e,_e}o.prototype.once=function(A,C){return f(C),this.on(A,b(this,A,C)),this},o.prototype.prependOnceListener=function(A,C){return f(C),this.prependListener(A,b(this,A,C)),this},o.prototype.removeListener=function(A,C){var Q,_e,Me,Ee,Ut;if(f(C),_e=this._events,_e===void 0)return this;if(Q=_e[A],Q===void 0)return this;if(Q===C||Q.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete _e[A],_e.removeListener&&this.emit("removeListener",A,Q.listener||C));else if(typeof Q!="function"){for(Me=-1,Ee=Q.length-1;Ee>=0;Ee--)if(Q[Ee]===C||Q[Ee].listener===C){Ut=Q[Ee].listener,Me=Ee;break}if(Me<0)return this;Me===0?Q.shift():ve(Q,Me),Q.length===1&&(_e[A]=Q[0]),_e.removeListener!==void 0&&this.emit("removeListener",A,Ut||C)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(A){var C,Q,_e;if(Q=this._events,Q===void 0)return this;if(Q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Q[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete Q[A]),this;if(arguments.length===0){var Me=Object.keys(Q),Ee;for(_e=0;_e<Me.length;++_e)Ee=Me[_e],Ee!=="removeListener"&&this.removeAllListeners(Ee);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=Q[A],typeof C=="function")this.removeListener(A,C);else if(C!==void 0)for(_e=C.length-1;_e>=0;_e--)this.removeListener(A,C[_e]);return this};function S(D,A,C){var Q=D._events;if(Q===void 0)return[];var _e=Q[A];return _e===void 0?[]:typeof _e=="function"?C?[_e.listener||_e]:[_e]:C?x(_e):de(_e,_e.length)}o.prototype.listeners=function(A){return S(this,A,!0)},o.prototype.rawListeners=function(A){return S(this,A,!1)},o.listenerCount=function(D,A){return typeof D.listenerCount=="function"?D.listenerCount(A):R.call(D,A)},o.prototype.listenerCount=R;function R(D){var A=this._events;if(A!==void 0){var C=A[D];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function de(D,A){for(var C=new Array(A),Q=0;Q<A;++Q)C[Q]=D[Q];return C}function ve(D,A){for(;A+1<D.length;A++)D[A]=D[A+1];D.pop()}function x(D){for(var A=new Array(D.length),C=0;C<A.length;++C)A[C]=D[C].listener||D[C];return A}function B(D,A){return new Promise(function(C,Q){function _e(Ee){D.removeListener(A,Me),Q(Ee)}function Me(){typeof D.removeListener=="function"&&D.removeListener("error",_e),C([].slice.call(arguments))}T(D,A,Me,{once:!0}),A!=="error"&&_t(D,_e,{once:!0})})}function _t(D,A,C){typeof D.on=="function"&&T(D,"error",A,C)}function T(D,A,C,Q){if(typeof D.on=="function")Q.once?D.once(A,C):D.on(A,C);else if(typeof D.addEventListener=="function")D.addEventListener(A,function _e(Me){Q.once&&D.removeEventListener(A,_e),C(Me)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D)}return nr.exports}var Js=Qs();function Ys(){const s=arguments[0];for(let t=1,i=arguments.length;t<i;t++)if(arguments[t])for(const r in arguments[t])s[r]=arguments[t][r];return s}let Lt=Ys;typeof Object.assign=="function"&&(Lt=Object.assign);function Zt(s,t,i,r){const n=s._nodes.get(t);let o=null;return n&&(r==="mixed"?o=n.out&&n.out[i]||n.undirected&&n.undirected[i]:r==="directed"?o=n.out&&n.out[i]:o=n.undirected&&n.undirected[i]),o}function Ot(s){return typeof s=="object"&&s!==null}function zn(s){let t;for(t in s)return!1;return!0}function Xt(s,t,i){Object.defineProperty(s,t,{enumerable:!1,configurable:!1,writable:!0,value:i})}function ri(s,t,i){const r={enumerable:!0,configurable:!0};typeof i=="function"?r.get=i:(r.value=i,r.writable=!1),Object.defineProperty(s,t,r)}function bn(s){return!(!Ot(s)||s.attributes&&!Array.isArray(s.attributes))}function Vs(){let s=Math.floor(Math.random()*256)&255;return()=>s++}function di(){const s=arguments;let t=null,i=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(t===null){if(i++,i>=s.length)return{done:!0};t=s[i][Symbol.iterator]()}if(r=t.next(),r.done){t=null;continue}break}while(!0);return r}}}function Ri(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class Cr extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class W extends Cr{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,W.prototype.constructor)}}class I extends Cr{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,I.prototype.constructor)}}class le extends Cr{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,le.prototype.constructor)}}function Pn(s,t){this.key=s,this.attributes=t,this.clear()}Pn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function Mn(s,t){this.key=s,this.attributes=t,this.clear()}Mn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Fn(s,t){this.key=s,this.attributes=t,this.clear()}Fn.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ii(s,t,i,r,n){this.key=t,this.attributes=n,this.undirected=s,this.source=i,this.target=r}Ii.prototype.attach=function(){let s="out",t="in";this.undirected&&(s=t="undirected");const i=this.source.key,r=this.target.key;this.source[s][r]=this,!(this.undirected&&i===r)&&(this.target[t][i]=this)};Ii.prototype.attachMulti=function(){let s="out",t="in";const i=this.source.key,r=this.target.key;this.undirected&&(s=t="undirected");const n=this.source[s],o=n[r];if(typeof o>"u"){n[r]=this,this.undirected&&i===r||(this.target[t][i]=this);return}o.previous=this,this.next=o,n[r]=this,this.target[t][i]=this};Ii.prototype.detach=function(){const s=this.source.key,t=this.target.key;let i="out",r="in";this.undirected&&(i=r="undirected"),delete this.source[i][t],delete this.target[r][s]};Ii.prototype.detachMulti=function(){const s=this.source.key,t=this.target.key;let i="out",r="in";this.undirected&&(i=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[i][t],delete this.target[r][s]):(this.next.previous=void 0,this.source[i][t]=this.next,this.target[r][s]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Bn=0,Wn=1,Hs=2,Kn=3;function ci(s,t,i,r,n,o,a){let f,p,g,w;if(r=""+r,i===Bn){if(f=s._nodes.get(r),!f)throw new I(`Graph.${t}: could not find the "${r}" node in the graph.`);g=n,w=o}else if(i===Kn){if(n=""+n,p=s._edges.get(n),!p)throw new I(`Graph.${t}: could not find the "${n}" edge in the graph.`);const b=p.source.key,S=p.target.key;if(r===b)f=p.target;else if(r===S)f=p.source;else throw new I(`Graph.${t}: the "${r}" node is not attached to the "${n}" edge (${b}, ${S}).`);g=o,w=a}else{if(p=s._edges.get(r),!p)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`);i===Wn?f=p.source:f=p.target,g=n,w=o}return[f,g,w]}function Xs(s,t,i){s.prototype[t]=function(r,n,o){const[a,f]=ci(this,t,i,r,n,o);return a.attributes[f]}}function Zs(s,t,i){s.prototype[t]=function(r,n){const[o]=ci(this,t,i,r,n);return o.attributes}}function eo(s,t,i){s.prototype[t]=function(r,n,o){const[a,f]=ci(this,t,i,r,n,o);return a.attributes.hasOwnProperty(f)}}function to(s,t,i){s.prototype[t]=function(r,n,o,a){const[f,p,g]=ci(this,t,i,r,n,o,a);return f.attributes[p]=g,this.emit("nodeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:p}),this}}function io(s,t,i){s.prototype[t]=function(r,n,o,a){const[f,p,g]=ci(this,t,i,r,n,o,a);if(typeof g!="function")throw new W(`Graph.${t}: updater should be a function.`);const w=f.attributes,b=g(w[p]);return w[p]=b,this.emit("nodeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:p}),this}}function ro(s,t,i){s.prototype[t]=function(r,n,o){const[a,f]=ci(this,t,i,r,n,o);return delete a.attributes[f],this.emit("nodeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:f}),this}}function no(s,t,i){s.prototype[t]=function(r,n,o){const[a,f]=ci(this,t,i,r,n,o);if(!Ot(f))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=f,this.emit("nodeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function so(s,t,i){s.prototype[t]=function(r,n,o){const[a,f]=ci(this,t,i,r,n,o);if(!Ot(f))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return Lt(a.attributes,f),this.emit("nodeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:f}),this}}function oo(s,t,i){s.prototype[t]=function(r,n,o){const[a,f]=ci(this,t,i,r,n,o);if(typeof f!="function")throw new W(`Graph.${t}: provided updater is not a function.`);return a.attributes=f(a.attributes),this.emit("nodeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const ao=[{name:s=>`get${s}Attribute`,attacher:Xs},{name:s=>`get${s}Attributes`,attacher:Zs},{name:s=>`has${s}Attribute`,attacher:eo},{name:s=>`set${s}Attribute`,attacher:to},{name:s=>`update${s}Attribute`,attacher:io},{name:s=>`remove${s}Attribute`,attacher:ro},{name:s=>`replace${s}Attributes`,attacher:no},{name:s=>`merge${s}Attributes`,attacher:so},{name:s=>`update${s}Attributes`,attacher:oo}];function lo(s){ao.forEach(function({name:t,attacher:i}){i(s,t("Node"),Bn),i(s,t("Source"),Wn),i(s,t("Target"),Hs),i(s,t("Opposite"),Kn)})}function co(s,t,i){s.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,f=""+n;if(n=arguments[2],o=Zt(this,a,f,i),!o)throw new I(`Graph.${t}: could not find an edge for the given path ("${a}" - "${f}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[n]}}function uo(s,t,i){s.prototype[t]=function(r){let n;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,a=""+arguments[1];if(n=Zt(this,o,a,i),!n)throw new I(`Graph.${t}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,n=this._edges.get(r),!n)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return n.attributes}}function fo(s,t,i){s.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,f=""+n;if(n=arguments[2],o=Zt(this,a,f,i),!o)throw new I(`Graph.${t}: could not find an edge for the given path ("${a}" - "${f}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(n)}}function ho(s,t,i){s.prototype[t]=function(r,n,o){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+r,p=""+n;if(n=arguments[2],o=arguments[3],a=Zt(this,f,p,i),!a)throw new I(`Graph.${t}: could not find an edge for the given path ("${f}" - "${p}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes[n]=o,this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function vo(s,t,i){s.prototype[t]=function(r,n,o){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+r,p=""+n;if(n=arguments[2],o=arguments[3],a=Zt(this,f,p,i),!a)throw new I(`Graph.${t}: could not find an edge for the given path ("${f}" - "${p}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof o!="function")throw new W(`Graph.${t}: updater should be a function.`);return a.attributes[n]=o(a.attributes[n]),this.emit("edgeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:n}),this}}function po(s,t,i){s.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,f=""+n;if(n=arguments[2],o=Zt(this,a,f,i),!o)throw new I(`Graph.${t}: could not find an edge for the given path ("${a}" - "${f}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[n],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:n}),this}}function go(s,t,i){s.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,f=""+n;if(n=arguments[2],o=Zt(this,a,f,i),!o)throw new I(`Graph.${t}: could not find an edge for the given path ("${a}" - "${f}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!Ot(n))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=n,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function yo(s,t,i){s.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,f=""+n;if(n=arguments[2],o=Zt(this,a,f,i),!o)throw new I(`Graph.${t}: could not find an edge for the given path ("${a}" - "${f}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!Ot(n))throw new W(`Graph.${t}: provided attributes are not a plain object.`);return Lt(o.attributes,n),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:n}),this}}function _o(s,t,i){s.prototype[t]=function(r,n){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new le(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new le(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,f=""+n;if(n=arguments[2],o=Zt(this,a,f,i),!o)throw new I(`Graph.${t}: could not find an edge for the given path ("${a}" - "${f}").`)}else{if(i!=="mixed")throw new le(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new I(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof n!="function")throw new W(`Graph.${t}: provided updater is not a function.`);return o.attributes=n(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const wo=[{name:s=>`get${s}Attribute`,attacher:co},{name:s=>`get${s}Attributes`,attacher:uo},{name:s=>`has${s}Attribute`,attacher:fo},{name:s=>`set${s}Attribute`,attacher:ho},{name:s=>`update${s}Attribute`,attacher:vo},{name:s=>`remove${s}Attribute`,attacher:po},{name:s=>`replace${s}Attributes`,attacher:go},{name:s=>`merge${s}Attributes`,attacher:yo},{name:s=>`update${s}Attributes`,attacher:_o}];function mo(s){wo.forEach(function({name:t,attacher:i}){i(s,t("Edge"),"mixed"),i(s,t("DirectedEdge"),"directed"),i(s,t("UndirectedEdge"),"undirected")})}const bo=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function jo(s,t,i,r){let n=!1;for(const o in t){if(o===r)continue;const a=t[o];if(n=i(a.key,a.attributes,a.source.key,a.target.key,a.source.attributes,a.target.attributes,a.undirected),s&&n)return a.key}}function ko(s,t,i,r){let n,o,a,f=!1;for(const p in t)if(p!==r){n=t[p];do{if(o=n.source,a=n.target,f=i(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected),s&&f)return n.key;n=n.next}while(n!==void 0)}}function kr(s,t){const i=Object.keys(s),r=i.length;let n,o=0;return{[Symbol.iterator](){return this},next(){do if(n)n=n.next;else{if(o>=r)return{done:!0};const a=i[o++];if(a===t){n=void 0;continue}n=s[a]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}}}function xo(s,t,i,r){const n=t[i];if(!n)return;const o=n.source,a=n.target;if(r(n.key,n.attributes,o.key,a.key,o.attributes,a.attributes,n.undirected)&&s)return n.key}function Eo(s,t,i,r){let n=t[i];if(!n)return;let o=!1;do{if(o=r(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),s&&o)return n.key;n=n.next}while(n!==void 0)}function xr(s,t){let i=s[t];if(i.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!i)return{done:!0};const n={edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected};return i=i.next,{done:!1,value:n}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}})}}}function So(s,t){if(s.size===0)return[];if(t==="mixed"||t===s.type)return Array.from(s._edges.keys());const i=t==="undirected"?s.undirectedSize:s.directedSize,r=new Array(i),n=t==="undirected",o=s._edges.values();let a=0,f,p;for(;f=o.next(),f.done!==!0;)p=f.value,p.undirected===n&&(r[a++]=p.key);return r}function Qn(s,t,i,r){if(t.size===0)return;const n=i!=="mixed"&&i!==t.type,o=i==="undirected";let a,f,p=!1;const g=t._edges.values();for(;a=g.next(),a.done!==!0;){if(f=a.value,n&&f.undirected!==o)continue;const{key:w,attributes:b,source:S,target:R}=f;if(p=r(w,b,S.key,R.key,S.attributes,R.attributes,f.undirected),s&&p)return w}}function Ao(s,t){if(s.size===0)return Ri();const i=t!=="mixed"&&t!==s.type,r=t==="undirected",n=s._edges.values();return{[Symbol.iterator](){return this},next(){let o,a;for(;;){if(o=n.next(),o.done)return o;if(a=o.value,!(i&&a.undirected!==r))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}}}}function Tr(s,t,i,r,n,o){const a=t?ko:jo;let f;if(i!=="undirected"&&(r!=="out"&&(f=a(s,n.in,o),s&&f)||r!=="in"&&(f=a(s,n.out,o,r?void 0:n.key),s&&f))||i!=="directed"&&(f=a(s,n.undirected,o),s&&f))return f}function $o(s,t,i,r){const n=[];return Tr(!1,s,t,i,r,function(o){n.push(o)}),n}function Go(s,t,i){let r=Ri();return s!=="undirected"&&(t!=="out"&&typeof i.in<"u"&&(r=di(r,kr(i.in))),t!=="in"&&typeof i.out<"u"&&(r=di(r,kr(i.out,t?void 0:i.key)))),s!=="directed"&&typeof i.undirected<"u"&&(r=di(r,kr(i.undirected))),r}function Rr(s,t,i,r,n,o,a){const f=i?Eo:xo;let p;if(t!=="undirected"&&(typeof n.in<"u"&&r!=="out"&&(p=f(s,n.in,o,a),s&&p)||typeof n.out<"u"&&r!=="in"&&(r||n.key!==o)&&(p=f(s,n.out,o,a),s&&p))||t!=="directed"&&typeof n.undirected<"u"&&(p=f(s,n.undirected,o,a),s&&p))return p}function No(s,t,i,r,n){const o=[];return Rr(!1,s,t,i,r,n,function(a){o.push(a)}),o}function Lo(s,t,i,r){let n=Ri();return s!=="undirected"&&(typeof i.in<"u"&&t!=="out"&&r in i.in&&(n=di(n,xr(i.in,r))),typeof i.out<"u"&&t!=="in"&&r in i.out&&(t||i.key!==r)&&(n=di(n,xr(i.out,r)))),s!=="directed"&&typeof i.undirected<"u"&&r in i.undirected&&(n=di(n,xr(i.undirected,r))),n}function Do(s,t){const{name:i,type:r,direction:n}=t;s.prototype[i]=function(o,a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return So(this,r);if(arguments.length===1){o=""+o;const f=this._nodes.get(o);if(typeof f>"u")throw new I(`Graph.${i}: could not find the "${o}" node in the graph.`);return $o(this.multi,r==="mixed"?this.type:r,n,f)}if(arguments.length===2){o=""+o,a=""+a;const f=this._nodes.get(o);if(!f)throw new I(`Graph.${i}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new I(`Graph.${i}:  could not find the "${a}" target node in the graph.`);return No(r,this.multi,n,f,a)}throw new W(`Graph.${i}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Co(s,t){const{name:i,type:r,direction:n}=t,o="forEach"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[o]=function(g,w,b){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return b=g,Qn(!1,this,r,b);if(arguments.length===2){g=""+g,b=w;const S=this._nodes.get(g);if(typeof S>"u")throw new I(`Graph.${o}: could not find the "${g}" node in the graph.`);return Tr(!1,this.multi,r==="mixed"?this.type:r,n,S,b)}if(arguments.length===3){g=""+g,w=""+w;const S=this._nodes.get(g);if(!S)throw new I(`Graph.${o}:  could not find the "${g}" source node in the graph.`);if(!this._nodes.has(w))throw new I(`Graph.${o}:  could not find the "${w}" target node in the graph.`);return Rr(!1,r,this.multi,n,S,w,b)}throw new W(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const a="map"+i[0].toUpperCase()+i.slice(1);s.prototype[a]=function(){const g=Array.prototype.slice.call(arguments),w=g.pop();let b;if(g.length===0){let S=0;r!=="directed"&&(S+=this.undirectedSize),r!=="undirected"&&(S+=this.directedSize),b=new Array(S);let R=0;g.push((de,ve,x,B,_t,T,D)=>{b[R++]=w(de,ve,x,B,_t,T,D)})}else b=[],g.push((S,R,de,ve,x,B,_t)=>{b.push(w(S,R,de,ve,x,B,_t))});return this[o].apply(this,g),b};const f="filter"+i[0].toUpperCase()+i.slice(1);s.prototype[f]=function(){const g=Array.prototype.slice.call(arguments),w=g.pop(),b=[];return g.push((S,R,de,ve,x,B,_t)=>{w(S,R,de,ve,x,B,_t)&&b.push(S)}),this[o].apply(this,g),b};const p="reduce"+i[0].toUpperCase()+i.slice(1);s.prototype[p]=function(){let g=Array.prototype.slice.call(arguments);if(g.length<2||g.length>4)throw new W(`Graph.${p}: invalid number of arguments (expecting 2, 3 or 4 and got ${g.length}).`);if(typeof g[g.length-1]=="function"&&typeof g[g.length-2]!="function")throw new W(`Graph.${p}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let w,b;g.length===2?(w=g[0],b=g[1],g=[]):g.length===3?(w=g[1],b=g[2],g=[g[0]]):g.length===4&&(w=g[2],b=g[3],g=[g[0],g[1]]);let S=b;return g.push((R,de,ve,x,B,_t,T)=>{S=w(S,R,de,ve,x,B,_t,T)}),this[o].apply(this,g),S}}function To(s,t){const{name:i,type:r,direction:n}=t,o="find"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[o]=function(p,g,w){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return w=p,Qn(!0,this,r,w);if(arguments.length===2){p=""+p,w=g;const b=this._nodes.get(p);if(typeof b>"u")throw new I(`Graph.${o}: could not find the "${p}" node in the graph.`);return Tr(!0,this.multi,r==="mixed"?this.type:r,n,b,w)}if(arguments.length===3){p=""+p,g=""+g;const b=this._nodes.get(p);if(!b)throw new I(`Graph.${o}:  could not find the "${p}" source node in the graph.`);if(!this._nodes.has(g))throw new I(`Graph.${o}:  could not find the "${g}" target node in the graph.`);return Rr(!0,r,this.multi,n,b,g,w)}throw new W(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const a="some"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(){const p=Array.prototype.slice.call(arguments),g=p.pop();return p.push((b,S,R,de,ve,x,B)=>g(b,S,R,de,ve,x,B)),!!this[o].apply(this,p)};const f="every"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[f]=function(){const p=Array.prototype.slice.call(arguments),g=p.pop();return p.push((b,S,R,de,ve,x,B)=>!g(b,S,R,de,ve,x,B)),!this[o].apply(this,p)}}function Ro(s,t){const{name:i,type:r,direction:n}=t,o=i.slice(0,-1)+"Entries";s.prototype[o]=function(a,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ri();if(!arguments.length)return Ao(this,r);if(arguments.length===1){a=""+a;const p=this._nodes.get(a);if(!p)throw new I(`Graph.${o}: could not find the "${a}" node in the graph.`);return Go(r,n,p)}if(arguments.length===2){a=""+a,f=""+f;const p=this._nodes.get(a);if(!p)throw new I(`Graph.${o}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(f))throw new I(`Graph.${o}:  could not find the "${f}" target node in the graph.`);return Lo(r,n,p,f)}throw new W(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Io(s){bo.forEach(t=>{Do(s,t),Co(s,t),To(s,t),Ro(s,t)})}const Oo=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function cr(){this.A=null,this.B=null}cr.prototype.wrap=function(s){this.A===null?this.A=s:this.B===null&&(this.B=s)};cr.prototype.has=function(s){return this.A!==null&&s in this.A||this.B!==null&&s in this.B};function Qi(s,t,i,r,n){for(const o in r){const a=r[o],f=a.source,p=a.target,g=f===i?p:f;if(t&&t.has(g.key))continue;const w=n(g.key,g.attributes);if(s&&w)return g.key}}function Ir(s,t,i,r,n){if(t!=="mixed"){if(t==="undirected")return Qi(s,null,r,r.undirected,n);if(typeof i=="string")return Qi(s,null,r,r[i],n)}const o=new cr;let a;if(t!=="undirected"){if(i!=="out"){if(a=Qi(s,null,r,r.in,n),s&&a)return a;o.wrap(r.in)}if(i!=="in"){if(a=Qi(s,o,r,r.out,n),s&&a)return a;o.wrap(r.out)}}if(t!=="directed"&&(a=Qi(s,o,r,r.undirected,n),s&&a))return a}function Uo(s,t,i){if(s!=="mixed"){if(s==="undirected")return Object.keys(i.undirected);if(typeof t=="string")return Object.keys(i[t])}const r=[];return Ir(!1,s,t,i,function(n){r.push(n)}),r}function Ji(s,t,i){const r=Object.keys(i),n=r.length;let o=0;return{[Symbol.iterator](){return this},next(){let a=null;do{if(o>=n)return s&&s.wrap(i),{done:!0};const f=i[r[o++]],p=f.source,g=f.target;if(a=p===t?g:p,s&&s.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}}}}function qo(s,t,i){if(s!=="mixed"){if(s==="undirected")return Ji(null,i,i.undirected);if(typeof t=="string")return Ji(null,i,i[t])}let r=Ri();const n=new cr;return s!=="undirected"&&(t!=="out"&&(r=di(r,Ji(n,i,i.in))),t!=="in"&&(r=di(r,Ji(n,i,i.out)))),s!=="directed"&&(r=di(r,Ji(n,i,i.undirected))),r}function zo(s,t){const{name:i,type:r,direction:n}=t;s.prototype[i]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new I(`Graph.${i}: could not find the "${o}" node in the graph.`);return Uo(r==="mixed"?this.type:r,n,a)}}function Po(s,t){const{name:i,type:r,direction:n}=t,o="forEach"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[o]=function(g,w){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;g=""+g;const b=this._nodes.get(g);if(typeof b>"u")throw new I(`Graph.${o}: could not find the "${g}" node in the graph.`);Ir(!1,r==="mixed"?this.type:r,n,b,w)};const a="map"+i[0].toUpperCase()+i.slice(1);s.prototype[a]=function(g,w){const b=[];return this[o](g,(S,R)=>{b.push(w(S,R))}),b};const f="filter"+i[0].toUpperCase()+i.slice(1);s.prototype[f]=function(g,w){const b=[];return this[o](g,(S,R)=>{w(S,R)&&b.push(S)}),b};const p="reduce"+i[0].toUpperCase()+i.slice(1);s.prototype[p]=function(g,w,b){if(arguments.length<3)throw new W(`Graph.${p}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let S=b;return this[o](g,(R,de)=>{S=w(S,R,de)}),S}}function Mo(s,t){const{name:i,type:r,direction:n}=t,o=i[0].toUpperCase()+i.slice(1,-1),a="find"+o;s.prototype[a]=function(g,w){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;g=""+g;const b=this._nodes.get(g);if(typeof b>"u")throw new I(`Graph.${a}: could not find the "${g}" node in the graph.`);return Ir(!0,r==="mixed"?this.type:r,n,b,w)};const f="some"+o;s.prototype[f]=function(g,w){return!!this[a](g,w)};const p="every"+o;s.prototype[p]=function(g,w){return!this[a](g,(S,R)=>!w(S,R))}}function Fo(s,t){const{name:i,type:r,direction:n}=t,o=i.slice(0,-1)+"Entries";s.prototype[o]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ri();a=""+a;const f=this._nodes.get(a);if(typeof f>"u")throw new I(`Graph.${o}: could not find the "${a}" node in the graph.`);return qo(r==="mixed"?this.type:r,n,f)}}function Bo(s){Oo.forEach(t=>{zo(s,t),Po(s,t),Mo(s,t),Fo(s,t)})}function sr(s,t,i,r,n){const o=r._nodes.values(),a=r.type;let f,p,g,w,b,S;for(;f=o.next(),f.done!==!0;){let R=!1;if(p=f.value,a!=="undirected"){w=p.out;for(g in w){b=w[g];do S=b.target,R=!0,n(p.key,S.key,p.attributes,S.attributes,b.key,b.attributes,b.undirected),b=b.next;while(b)}}if(a!=="directed"){w=p.undirected;for(g in w)if(!(t&&p.key>g)){b=w[g];do S=b.target,S.key!==g&&(S=b.source),R=!0,n(p.key,S.key,p.attributes,S.attributes,b.key,b.attributes,b.undirected),b=b.next;while(b)}}i&&!R&&n(p.key,null,p.attributes,null,null,null,null)}}function Wo(s,t){const i={key:s};return zn(t.attributes)||(i.attributes=Lt({},t.attributes)),i}function Ko(s,t,i){const r={key:t,source:i.source.key,target:i.target.key};return zn(i.attributes)||(r.attributes=Lt({},i.attributes)),s==="mixed"&&i.undirected&&(r.undirected=!0),r}function Qo(s){if(!Ot(s))throw new W('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in s))throw new W("Graph.import: serialized node is missing its key.");if("attributes"in s&&(!Ot(s.attributes)||s.attributes===null))throw new W("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Jo(s){if(!Ot(s))throw new W('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in s))throw new W("Graph.import: serialized edge is missing its source.");if(!("target"in s))throw new W("Graph.import: serialized edge is missing its target.");if("attributes"in s&&(!Ot(s.attributes)||s.attributes===null))throw new W("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in s&&typeof s.undirected!="boolean")throw new W("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Yo=Vs(),Vo=new Set(["directed","undirected","mixed"]),jn=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ho=[{name:s=>`${s}Edge`,generateKey:!0},{name:s=>`${s}DirectedEdge`,generateKey:!0,type:"directed"},{name:s=>`${s}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:s=>`${s}EdgeWithKey`},{name:s=>`${s}DirectedEdgeWithKey`,type:"directed"},{name:s=>`${s}UndirectedEdgeWithKey`,type:"undirected"}],Xo={allowSelfLoops:!0,multi:!1,type:"mixed"};function Zo(s,t,i){if(i&&!Ot(i))throw new W(`Graph.addNode: invalid attributes. Expecting an object but got "${i}"`);if(t=""+t,i=i||{},s._nodes.has(t))throw new le(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new s.NodeDataClass(t,i);return s._nodes.set(t,r),s.emit("nodeAdded",{key:t,attributes:i}),r}function kn(s,t,i){const r=new s.NodeDataClass(t,i);return s._nodes.set(t,r),s.emit("nodeAdded",{key:t,attributes:i}),r}function Jn(s,t,i,r,n,o,a,f){if(!r&&s.type==="undirected")throw new le(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&s.type==="directed")throw new le(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(f&&!Ot(f))throw new W(`Graph.${t}: invalid attributes. Expecting an object but got "${f}"`);if(o=""+o,a=""+a,f=f||{},!s.allowSelfLoops&&o===a)throw new le(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const p=s._nodes.get(o),g=s._nodes.get(a);if(!p)throw new I(`Graph.${t}: source node "${o}" not found.`);if(!g)throw new I(`Graph.${t}: target node "${a}" not found.`);const w={key:null,undirected:r,source:o,target:a,attributes:f};if(i)n=s._edgeKeyGenerator();else if(n=""+n,s._edges.has(n))throw new le(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!s.multi&&(r?typeof p.undirected[a]<"u":typeof p.out[a]<"u"))throw new le(`Graph.${t}: an edge linking "${o}" to "${a}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const b=new Ii(r,n,p,g,f);s._edges.set(n,b);const S=o===a;return r?(p.undirectedDegree++,g.undirectedDegree++,S&&(p.undirectedLoops++,s._undirectedSelfLoopCount++)):(p.outDegree++,g.inDegree++,S&&(p.directedLoops++,s._directedSelfLoopCount++)),s.multi?b.attachMulti():b.attach(),r?s._undirectedSize++:s._directedSize++,w.key=n,s.emit("edgeAdded",w),n}function ea(s,t,i,r,n,o,a,f,p){if(!r&&s.type==="undirected")throw new le(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&s.type==="directed")throw new le(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(f){if(p){if(typeof f!="function")throw new W(`Graph.${t}: invalid updater function. Expecting a function but got "${f}"`)}else if(!Ot(f))throw new W(`Graph.${t}: invalid attributes. Expecting an object but got "${f}"`)}o=""+o,a=""+a;let g;if(p&&(g=f,f=void 0),!s.allowSelfLoops&&o===a)throw new le(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let w=s._nodes.get(o),b=s._nodes.get(a),S,R;if(!i&&(S=s._edges.get(n),S)){if((S.source.key!==o||S.target.key!==a)&&(!r||S.source.key!==a||S.target.key!==o))throw new le(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${o}" source & "${a}" target vs. ("${S.source.key}", "${S.target.key}").`);R=S}if(!R&&!s.multi&&w&&(R=r?w.undirected[a]:w.out[a]),R){const _t=[R.key,!1,!1,!1];if(p?!g:!f)return _t;if(p){const T=R.attributes;R.attributes=g(T),s.emit("edgeAttributesUpdated",{type:"replace",key:R.key,attributes:R.attributes})}else Lt(R.attributes,f),s.emit("edgeAttributesUpdated",{type:"merge",key:R.key,attributes:R.attributes,data:f});return _t}f=f||{},p&&g&&(f=g(f));const de={key:null,undirected:r,source:o,target:a,attributes:f};if(i)n=s._edgeKeyGenerator();else if(n=""+n,s._edges.has(n))throw new le(`Graph.${t}: the "${n}" edge already exists in the graph.`);let ve=!1,x=!1;w||(w=kn(s,o,{}),ve=!0,o===a&&(b=w,x=!0)),b||(b=kn(s,a,{}),x=!0),S=new Ii(r,n,w,b,f),s._edges.set(n,S);const B=o===a;return r?(w.undirectedDegree++,b.undirectedDegree++,B&&(w.undirectedLoops++,s._undirectedSelfLoopCount++)):(w.outDegree++,b.inDegree++,B&&(w.directedLoops++,s._directedSelfLoopCount++)),s.multi?S.attachMulti():S.attach(),r?s._undirectedSize++:s._directedSize++,de.key=n,s.emit("edgeAdded",de),[n,!0,ve,x]}function Di(s,t){s._edges.delete(t.key);const{source:i,target:r,attributes:n}=t,o=t.undirected,a=i===r;o?(i.undirectedDegree--,r.undirectedDegree--,a&&(i.undirectedLoops--,s._undirectedSelfLoopCount--)):(i.outDegree--,r.inDegree--,a&&(i.directedLoops--,s._directedSelfLoopCount--)),s.multi?t.detachMulti():t.detach(),o?s._undirectedSize--:s._directedSize--,s.emit("edgeDropped",{key:t.key,attributes:n,source:i.key,target:r.key,undirected:o})}class yt extends Js.EventEmitter{constructor(t){if(super(),t=Lt({},Xo,t),typeof t.multi!="boolean")throw new W(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Vo.has(t.type))throw new W(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new W(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const i=t.type==="mixed"?Pn:t.type==="directed"?Mn:Fn;Xt(this,"NodeDataClass",i);const r="geid_"+Yo()+"_";let n=0;const o=()=>{let a;do a=r+n++;while(this._edges.has(a));return a};Xt(this,"_attributes",{}),Xt(this,"_nodes",new Map),Xt(this,"_edges",new Map),Xt(this,"_directedSize",0),Xt(this,"_undirectedSize",0),Xt(this,"_directedSelfLoopCount",0),Xt(this,"_undirectedSelfLoopCount",0),Xt(this,"_edgeKeyGenerator",o),Xt(this,"_options",t),jn.forEach(a=>Xt(this,a,this[a])),ri(this,"order",()=>this._nodes.size),ri(this,"size",()=>this._edges.size),ri(this,"directedSize",()=>this._directedSize),ri(this,"undirectedSize",()=>this._undirectedSize),ri(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ri(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ri(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ri(this,"multi",this._options.multi),ri(this,"type",this._options.type),ri(this,"allowSelfLoops",this._options.allowSelfLoops),ri(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,i){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&!n.undirected}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(i):!1}throw new W(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,i){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&n.undirected}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(i):!1}throw new W(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,i){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?typeof r.out<"u"&&r.out.hasOwnProperty(i)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(i):!1}throw new W(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,i){if(this.type==="undirected")return;if(t=""+t,i=""+i,this.multi)throw new le("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new I(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new I(`Graph.directedEdge: could not find the "${i}" target node in the graph.`);const n=r.out&&r.out[i]||void 0;if(n)return n.key}undirectedEdge(t,i){if(this.type==="directed")return;if(t=""+t,i=""+i,this.multi)throw new le("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new I(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new I(`Graph.undirectedEdge: could not find the "${i}" target node in the graph.`);const n=r.undirected&&r.undirected[i]||void 0;if(n)return n.key}edge(t,i){if(this.multi)throw new le("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new I(`Graph.edge: could not find the "${i}" target node in the graph.`);const n=r.out&&r.out[i]||r.undirected&&r.undirected[i]||void 0;if(n)return n.key}areDirectedNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.in||i in r.out}areOutNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.out}areInNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.in}areUndirectedNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:i in r.undirected}areNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(i in r.in||i in r.out)||this.type!=="directed"&&i in r.undirected}areInboundNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in r.in||this.type!=="directed"&&i in r.undirected}areOutboundNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new I(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in r.out||this.type!=="directed"&&i in r.undirected}inDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree}outDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree}directedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree}undirectedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree}inboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.inDegree),r}outboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.outDegree),r}degree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.inDegree+i.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree-i.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree-i.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree-i.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree-i.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.inDegree,n+=i.directedLoops),r-n}outboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.outDegree,n+=i.directedLoops),r-n}degreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.inDegree+i.outDegree,n+=i.directedLoops*2),r-n}source(t){t=""+t;const i=this._edges.get(t);if(!i)throw new I(`Graph.source: could not find the "${t}" edge in the graph.`);return i.source.key}target(t){t=""+t;const i=this._edges.get(t);if(!i)throw new I(`Graph.target: could not find the "${t}" edge in the graph.`);return i.target.key}extremities(t){t=""+t;const i=this._edges.get(t);if(!i)throw new I(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[i.source.key,i.target.key]}opposite(t,i){t=""+t,i=""+i;const r=this._edges.get(i);if(!r)throw new I(`Graph.opposite: could not find the "${i}" edge in the graph.`);const n=r.source.key,o=r.target.key;if(t===n)return o;if(t===o)return n;throw new I(`Graph.opposite: the "${t}" node is not attached to the "${i}" edge (${n}, ${o}).`)}hasExtremity(t,i){t=""+t,i=""+i;const r=this._edges.get(t);if(!r)throw new I(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===i||r.target.key===i}isUndirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new I(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return i.undirected}isDirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new I(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!i.undirected}isSelfLoop(t){t=""+t;const i=this._edges.get(t);if(!i)throw new I(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return i.source===i.target}addNode(t,i){return Zo(this,t,i).key}mergeNode(t,i){if(i&&!Ot(i))throw new W(`Graph.mergeNode: invalid attributes. Expecting an object but got "${i}"`);t=""+t,i=i||{};let r=this._nodes.get(t);return r?(i&&(Lt(r.attributes,i),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:i})),[t,!1]):(r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0])}updateNode(t,i){if(i&&typeof i!="function")throw new W(`Graph.updateNode: invalid updater function. Expecting a function but got "${i}"`);t=""+t;let r=this._nodes.get(t);if(r){if(i){const o=r.attributes;r.attributes=i(o),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const n=i?i({}):{};return r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0]}dropNode(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new I(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const n in i.out){r=i.out[n];do Di(this,r),r=r.next;while(r)}for(const n in i.in){r=i.in[n];do Di(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const n in i.undirected){r=i.undirected[n];do Di(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:i.attributes})}dropEdge(t){let i;if(arguments.length>1){const r=""+arguments[0],n=""+arguments[1];if(i=Zt(this,r,n,this.type),!i)throw new I(`Graph.dropEdge: could not find the "${r}" -> "${n}" edge in the graph.`)}else if(t=""+t,i=this._edges.get(t),!i)throw new I(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Di(this,i),this}dropDirectedEdge(t,i){if(arguments.length<2)throw new le("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new le("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,i=""+i;const r=Zt(this,t,i,"directed");if(!r)throw new I(`Graph.dropDirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Di(this,r),this}dropUndirectedEdge(t,i){if(arguments.length<2)throw new le("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new le("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Zt(this,t,i,"undirected");if(!r)throw new I(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Di(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let i;for(;i=t.next(),i.done!==!0;)i.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,i){return this._attributes[t]=i,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,i){if(typeof i!="function")throw new W("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=i(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Ot(t))throw new W("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Ot(t))throw new W("Graph.mergeAttributes: provided attributes are not a plain object.");return Lt(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new W("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,i){if(typeof t!="function")throw new W("Graph.updateEachNodeAttributes: expecting an updater function.");if(i&&!bn(i))throw new W("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:i||null})}updateEachEdgeAttributes(t,i){if(typeof t!="function")throw new W("Graph.updateEachEdgeAttributes: expecting an updater function.");if(i&&!bn(i))throw new W("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let n,o,a,f;for(;n=r.next(),n.done!==!0;)o=n.value,a=o.source,f=o.target,o.attributes=t(o.key,o.attributes,a.key,f.key,a.attributes,f.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:i||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new W("Graph.forEachAdjacencyEntry: expecting a callback.");sr(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new W("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new W("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");sr(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new W("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new W("Graph.forEachNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)}findNode(t){if(typeof t!="function")throw new W("Graph.findNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return n.key}mapNodes(t){if(typeof t!="function")throw new W("Graph.mapNode: expecting a callback.");const i=this._nodes.values();let r,n;const o=new Array(this.order);let a=0;for(;r=i.next(),r.done!==!0;)n=r.value,o[a++]=t(n.key,n.attributes);return o}someNode(t){if(typeof t!="function")throw new W("Graph.someNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new W("Graph.everyNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,!t(n.key,n.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new W("Graph.filterNodes: expecting a callback.");const i=this._nodes.values();let r,n;const o=[];for(;r=i.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)&&o.push(n.key);return o}reduceNodes(t,i){if(typeof t!="function")throw new W("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new W("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=i;const n=this._nodes.values();let o,a;for(;o=n.next(),o.done!==!0;)a=o.value,r=t(r,a.key,a.attributes);return r}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const i=t.next();if(i.done)return i;const r=i.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let i=0;this._nodes.forEach((n,o)=>{t[i++]=Wo(o,n)});const r=new Array(this._edges.size);return i=0,this._edges.forEach((n,o)=>{r[i++]=Ko(this.type,o,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,i=!1){if(t instanceof yt)return t.forEachNode((p,g)=>{i?this.mergeNode(p,g):this.addNode(p,g)}),t.forEachEdge((p,g,w,b,S,R,de)=>{i?de?this.mergeUndirectedEdgeWithKey(p,w,b,g):this.mergeDirectedEdgeWithKey(p,w,b,g):de?this.addUndirectedEdgeWithKey(p,w,b,g):this.addDirectedEdgeWithKey(p,w,b,g)}),this;if(!Ot(t))throw new W("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Ot(t.attributes))throw new W("Graph.import: invalid attributes. Expecting a plain object.");i?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,n,o,a,f;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new W("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=o.length;r<n;r++){a=o[r],Qo(a);const{key:p,attributes:g}=a;i?this.mergeNode(p,g):this.addNode(p,g)}}if(t.edges){let p=!1;if(this.type==="undirected"&&(p=!0),o=t.edges,!Array.isArray(o))throw new W("Graph.import: invalid edges. Expecting an array.");for(r=0,n=o.length;r<n;r++){f=o[r],Jo(f);const{source:g,target:w,attributes:b,undirected:S=p}=f;let R;"key"in f?(R=i?S?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:S?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,R.call(this,f.key,g,w,b)):(R=i?S?this.mergeUndirectedEdge:this.mergeDirectedEdge:S?this.addUndirectedEdge:this.addDirectedEdge,R.call(this,g,w,b))}}return this}nullCopy(t){const i=new yt(Lt({},this._options,t));return i.replaceAttributes(Lt({},this.getAttributes())),i}emptyCopy(t){const i=this.nullCopy(t);return this._nodes.forEach((r,n)=>{const o=Lt({},r.attributes);r=new i.NodeDataClass(n,o),i._nodes.set(n,r)}),i}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new le(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new le("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new le("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const i=this.emptyCopy(t),r=this._edges.values();let n,o;for(;n=r.next(),n.done!==!0;)o=n.value,Jn(i,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,Lt({},o.attributes));return i}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,a)=>{t[a]=o.attributes});const i={},r={};this._edges.forEach((o,a)=>{const f=o.undirected?"--":"->";let p="",g=o.source.key,w=o.target.key,b;o.undirected&&g>w&&(b=g,g=w,w=b);const S=`(${g})${f}(${w})`;a.startsWith("geid_")?this.multi&&(typeof r[S]>"u"?r[S]=0:r[S]++,p+=`${r[S]}. `):p+=`[${a}]: `,p+=S,i[p]=o.attributes});const n={};for(const o in this)this.hasOwnProperty(o)&&!jn.has(o)&&typeof this[o]!="function"&&typeof o!="symbol"&&(n[o]=this[o]);return n.attributes=this._attributes,n.nodes=t,n.edges=i,Xt(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(yt.prototype[Symbol.for("nodejs.util.inspect.custom")]=yt.prototype.inspect);Ho.forEach(s=>{["add","merge","update"].forEach(t=>{const i=s.name(t),r=t==="add"?Jn:ea;s.generateKey?yt.prototype[i]=function(n,o,a){return r(this,i,!0,(s.type||this.type)==="undirected",null,n,o,a,t==="update")}:yt.prototype[i]=function(n,o,a,f){return r(this,i,!1,(s.type||this.type)==="undirected",n,o,a,f,t==="update")}})});lo(yt);mo(yt);Io(yt);Bo(yt);class Yn extends yt{constructor(t){const i=Lt({type:"directed"},t);if("multi"in i&&i.multi!==!1)throw new W("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="directed")throw new W('DirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Vn extends yt{constructor(t){const i=Lt({type:"undirected"},t);if("multi"in i&&i.multi!==!1)throw new W("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="undirected")throw new W('UndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Hn extends yt{constructor(t){const i=Lt({multi:!0},t);if("multi"in i&&i.multi!==!0)throw new W("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(i)}}class Xn extends yt{constructor(t){const i=Lt({type:"directed",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new W("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="directed")throw new W('MultiDirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Zn extends yt{constructor(t){const i=Lt({type:"undirected",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new W("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="undirected")throw new W('MultiUndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}function Oi(s){s.from=function(t,i){const r=Lt({},t.options,i),n=new s(r);return n.import(t),n}}Oi(yt);Oi(Yn);Oi(Vn);Oi(Hn);Oi(Xn);Oi(Zn);yt.Graph=yt;yt.DirectedGraph=Yn;yt.UndirectedGraph=Vn;yt.MultiGraph=Hn;yt.MultiDirectedGraph=Xn;yt.MultiUndirectedGraph=Zn;yt.InvalidArgumentsGraphError=W;yt.NotFoundGraphError=I;yt.UsageGraphError=le;var Ci={},or={},Er,xn;function es(){return xn||(xn=1,Er=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"}),Er}var Ti={},ar={},En;function ta(){return En||(En=1,ar.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",ar.SYMBOL_SUPPORT=typeof Symbol<"u"),ar}var Sr,Sn;function ia(){if(Sn)return Sr;Sn=1;var s=ta(),t=s.ARRAY_BUFFER_SUPPORT,i=s.SYMBOL_SUPPORT;return Sr=function(n,o){var a,f,p,g,w;if(!n)throw new Error("obliterator/forEach: invalid iterable.");if(typeof o!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(n)||t&&ArrayBuffer.isView(n)||typeof n=="string"||n.toString()==="[object Arguments]"){for(p=0,g=n.length;p<g;p++)o(n[p],p);return}if(typeof n.forEach=="function"){n.forEach(o);return}if(i&&Symbol.iterator in n&&typeof n.next!="function"&&(n=n[Symbol.iterator]()),typeof n.next=="function"){for(a=n,p=0;w=a.next(),w.done!==!0;)o(w.value,p),p++;return}for(f in n)n.hasOwnProperty(f)&&o(n[f],f)},Sr}var Ar={},An;function ra(){return An||(An=1,(function(s){var t=Math.pow(2,8)-1,i=Math.pow(2,16)-1,r=Math.pow(2,32)-1,n=Math.pow(2,7)-1,o=Math.pow(2,15)-1,a=Math.pow(2,31)-1;s.getPointerArray=function(p){var g=p-1;if(g<=t)return Uint8Array;if(g<=i)return Uint16Array;if(g<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},s.getSignedPointerArray=function(p){var g=p-1;return g<=n?Int8Array:g<=o?Int16Array:g<=a?Int32Array:Float64Array},s.getNumberType=function(p){return p===(p|0)?Math.sign(p)===-1?p<=127&&p>=-128?Int8Array:p<=32767&&p>=-32768?Int16Array:Int32Array:p<=255?Uint8Array:p<=65535?Uint16Array:Uint32Array:Float64Array};var f={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};s.getMinimalRepresentation=function(p,g){var w=null,b=0,S,R,de,ve,x;for(ve=0,x=p.length;ve<x;ve++)de=g?g(p[ve]):p[ve],R=s.getNumberType(de),S=f[R.name],S>b&&(b=S,w=R);return w},s.isTypedArray=function(p){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(p)},s.concat=function(){var p=0,g,w,b;for(g=0,b=arguments.length;g<b;g++)p+=arguments[g].length;var S=new arguments[0].constructor(p);for(g=0,w=0;g<b;g++)S.set(arguments[g],w),w+=arguments[g].length;return S},s.indices=function(p){for(var g=s.getPointerArray(p),w=new g(p),b=0;b<p;b++)w[b]=b;return w}})(Ar)),Ar}var $n;function na(){if($n)return Ti;$n=1;var s=ia(),t=ra();function i(a){return Array.isArray(a)||t.isTypedArray(a)}function r(a){if(typeof a.length=="number")return a.length;if(typeof a.size=="number")return a.size}function n(a){var f=r(a),p=typeof f=="number"?new Array(f):[],g=0;return s(a,function(w){p[g++]=w}),p}function o(a){var f=r(a),p=typeof f=="number"?t.getPointerArray(f):Array,g=typeof f=="number"?new Array(f):[],w=typeof f=="number"?new p(f):[],b=0;return s(a,function(S){g[b]=S,w[b]=b++}),[g,w]}return Ti.isArrayLike=i,Ti.guessLength=r,Ti.toArray=n,Ti.toArrayWithIndices=o,Ti}var $r,Gn;function sa(){if(Gn)return $r;Gn=1;function s(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}return typeof Symbol<"u"&&(s.prototype[Symbol.iterator]=function(){return this}),s.of=function(){var t=arguments,i=t.length,r=0;return new s(function(){return r>=i?{done:!0}:{done:!1,value:t[r++]}})},s.empty=function(){var t=new s(function(){return{done:!0}});return t},s.fromSequence=function(t){var i=0,r=t.length;return new s(function(){return i>=r?{done:!0}:{done:!1,value:t[i++]}})},s.is=function(t){return t instanceof s?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"},$r=s,$r}var Gr,Nn;function oa(){if(Nn)return Gr;Nn=1;var s=na(),t=sa();function i(r,n){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof n!="number"||n<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=n,this.items=new r(this.capacity),this.clear()}return i.prototype.clear=function(){this.start=0,this.size=0},i.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var n=this.start+this.size;return n>=this.capacity&&(n-=this.capacity),this.items[n]=r,++this.size},i.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var n=this.start-1;return this.start===0&&(n=this.capacity-1),this.items[n]=r,this.start=n,++this.size},i.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},i.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},i.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},i.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},i.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},i.prototype.forEach=function(r,n){n=arguments.length>1?n:this;for(var o=this.capacity,a=this.size,f=this.start,p=0;p<a;)r.call(n,this.items[f],p,this),f++,p++,f===o&&(f=0)},i.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var n=new this.ArrayClass(this.size),o=this.capacity,a=this.size,f=this.start,p=0;p<a;)n[p]=this.items[f],f++,p++,f===o&&(f=0);return n},i.prototype.values=function(){var r=this.items,n=this.capacity,o=this.size,a=this.start,f=0;return new t(function(){if(f>=o)return{done:!0};var p=r[a];return a++,f++,a===n&&(a=0),{value:p,done:!1}})},i.prototype.entries=function(){var r=this.items,n=this.capacity,o=this.size,a=this.start,f=0;return new t(function(){if(f>=o)return{done:!0};var p=r[a];return a++,a===n&&(a=0),{value:[f++,p],done:!1}})},typeof Symbol<"u"&&(i.prototype[Symbol.iterator]=i.prototype.values),i.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:i,enumerable:!1}),r},typeof Symbol<"u"&&(i.prototype[Symbol.for("nodejs.util.inspect.custom")]=i.prototype.inspect),i.from=function(r,n,o){if(arguments.length<3&&(o=s.guessLength(r),typeof o!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var a=new i(n,o);if(s.isArrayLike(r)){var f,p;for(f=0,p=r.length;f<p;f++)a.items[f]=r[f];return a.size=p,a}return s.forEach(r,function(g){a.push(g)}),a},Gr=i,Gr}var Nr,Ln;function aa(){if(Ln)return Nr;Ln=1;var s=oa();function t(i){this.graph=i,this.queue=new s(Array,i.order),this.seen=new Set,this.size=0}return t.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},t.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},t.prototype.forEachNodeYetUnseen=function(i){var r=this.seen,n=this.graph;n.someNode(function(o,a){if(r.size===n.order)return!0;if(r.has(o))return!1;var f=i(o,a);return!!f})},t.prototype.has=function(i){return this.seen.has(i)},t.prototype.push=function(i){var r=this.seen.size;return this.seen.add(i),r===this.seen.size?!1:(this.queue.push(i),this.size++,!0)},t.prototype.pushWith=function(i,r){var n=this.seen.size;return this.seen.add(i),n===this.seen.size?!1:(this.queue.push(r),this.size++,!0)},t.prototype.shift=function(){var i=this.queue.shift();return this.size=this.queue.size,i},Nr=t,Nr}var lr={},Dn;function ts(){if(Dn)return lr;Dn=1;function s(i,r,n){this.node=i,this.attributes=r,this.depth=n}function t(i){return i[0].toUpperCase()+i.slice(1)}return lr.TraversalRecord=s,lr.capitalize=t,lr}var Cn;function la(){if(Cn)return or;Cn=1;var s=es(),t=aa(),i=ts(),r=i.TraversalRecord,n=i.capitalize;function o(a,f,p,g){if(g=g||{},!s(a))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if(typeof p!="function")throw new Error("graphology-traversal/bfs: given callback is not a function.");if(a.order===0)return;var w=new t(a),b=a["forEach"+n(g.mode||"outbound")+"Neighbor"].bind(a),S;f===null?S=w.forEachNodeYetUnseen.bind(w):S=function(x){f=""+f,x(f,a.getNodeAttributes(f))};var R,de;function ve(x,B){w.pushWith(x,new r(x,B,R.depth+1))}S(function(x,B){for(w.pushWith(x,new r(x,B,0));w.size!==0;)R=w.shift(),de=p(R.node,R.attributes,R.depth),de!==!0&&b(R.node,ve)})}return or.bfs=function(a,f,p){return o(a,null,f,p)},or.bfsFromNode=o,or}var dr={},Lr,Tn;function da(){if(Tn)return Lr;Tn=1;function s(t){this.graph=t,this.stack=new Array(t.order),this.seen=new Set,this.size=0}return s.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},s.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},s.prototype.forEachNodeYetUnseen=function(t){var i=this.seen,r=this.graph;r.someNode(function(n,o){if(i.size===r.order)return!0;if(i.has(n))return!1;var a=t(n,o);return!!a})},s.prototype.has=function(t){return this.seen.has(t)},s.prototype.push=function(t){var i=this.seen.size;return this.seen.add(t),i===this.seen.size?!1:(this.stack[this.size++]=t,!0)},s.prototype.pushWith=function(t,i){var r=this.seen.size;return this.seen.add(t),r===this.seen.size?!1:(this.stack[this.size++]=i,!0)},s.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},Lr=s,Lr}var Rn;function ca(){if(Rn)return dr;Rn=1;var s=es(),t=da(),i=ts(),r=i.TraversalRecord,n=i.capitalize;function o(a,f,p,g){if(g=g||{},!s(a))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof p!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(a.order===0)return;var w=new t(a),b=a["forEach"+n(g.mode||"outbound")+"Neighbor"].bind(a),S;f===null?S=w.forEachNodeYetUnseen.bind(w):S=function(x){f=""+f,x(f,a.getNodeAttributes(f))};var R,de;function ve(x,B){w.pushWith(x,new r(x,B,R.depth+1))}S(function(x,B){for(w.pushWith(x,new r(x,B,0));w.size!==0;)R=w.pop(),de=p(R.node,R.attributes,R.depth),de!==!0&&b(R.node,ve)})}return dr.dfs=function(a,f,p){return o(a,null,f,p)},dr.dfsFromNode=o,dr}var In;function ua(){if(In)return Ci;In=1;var s=la(),t=ca();return Ci.bfs=s.bfs,Ci.bfsFromNode=s.bfsFromNode,Ci.dfs=t.dfs,Ci.dfsFromNode=t.dfsFromNode,Ci}var Dr=ua(),fa=j('<span class="status-badge local svelte-1jef3w8">Local changes</span>'),ha=j('<span class="status-badge default svelte-1jef3w8">Default</span>'),va=j('<button class="btn danger-outline svelte-1jef3w8">Reset</button>'),pa=j('<span class="no-link-warning svelte-1jef3w8">No link type for this pair</span>'),ga=j('<span class="orphan-badge svelte-1jef3w8"> </span>'),ya=j('<div class="hover-row svelte-1jef3w8"><span class="hover-label svelte-1jef3w8">Row:</span> <span class="hover-value svelte-1jef3w8"> </span></div>'),_a=j('<div class="hover-col svelte-1jef3w8"><span class="hover-label svelte-1jef3w8">Col:</span> <span class="hover-value svelte-1jef3w8"> </span></div>'),wa=j('<div class="matrix-no-pair svelte-1jef3w8"><p class="svelte-1jef3w8"> </p></div>'),ma=j('<span class="verbose-label svelte-1jef3w8"> </span>'),ba=j("<th><!></th>"),ja=j('<span class="verbose-label svelte-1jef3w8"> </span>'),ka=j('<span class="cell-marker showif svelte-1jef3w8"> </span>'),xa=j('<span class="cell-marker direct svelte-1jef3w8"></span>'),Ea=j("<span> </span>"),Sa=j("<td><!></td>"),Aa=j("<tr><td><!></td><!></tr>"),$a=j('<table class="matrix svelte-1jef3w8"><thead class="svelte-1jef3w8"><tr class="svelte-1jef3w8"><th class="row-header svelte-1jef3w8"> </th><!></tr></thead><tbody class="svelte-1jef3w8"></tbody></table>'),Ga=j('<div class="matrix-toolbar svelte-1jef3w8"><div class="matrix-selectors svelte-1jef3w8"><div class="selector-group svelte-1jef3w8"><label class="svelte-1jef3w8">Rows:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Questions</option><option class="svelte-1jef3w8">Risks</option><option class="svelte-1jef3w8">Control Categories</option><option class="svelte-1jef3w8">Regulations</option><option class="svelte-1jef3w8">Controls</option></select></div> <span class="selector-arrow svelte-1jef3w8"></span> <div class="selector-group svelte-1jef3w8"><label class="svelte-1jef3w8">Columns:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Questions</option><option class="svelte-1jef3w8">Risks</option><option class="svelte-1jef3w8">Control Categories</option><option class="svelte-1jef3w8">Regulations</option><option class="svelte-1jef3w8">Controls</option></select></div> <!></div> <div class="matrix-options svelte-1jef3w8"><label class="verbose-toggle svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> <span class="svelte-1jef3w8">Verbose</span></label> <label><input type="checkbox" class="svelte-1jef3w8"/> <span class="svelte-1jef3w8">Unlinked only</span> <!></label> <input type="text" placeholder="Search rows..." class="search svelte-1jef3w8"/></div></div> <div><!> <!></div> <div class="matrix-container svelte-1jef3w8"><!></div>',1),Na=j('<div class="connection-banner svelte-1jef3w8">Connecting from: <strong class="svelte-1jef3w8"> </strong>  Click a node in the tree to link them <button class="svelte-1jef3w8">Cancel</button></div>'),La=j('<option class="svelte-1jef3w8"> </option>'),Da=j('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a question...</option><!></select>'),Ca=j('<option class="svelte-1jef3w8"> </option>'),Ta=j('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a risk...</option><!></select>'),Ra=j('<option class="svelte-1jef3w8"> </option>'),Ia=j('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a control...</option><!></select>'),Oa=j(`<div class="trace-placeholder svelte-1jef3w8"><p class="svelte-1jef3w8">Select a starting point above to visualize the dependency flow.</p> <p class="hint svelte-1jef3w8">You'll see questions  risks  controls  regulations as a visual tree.</p></div>`),Ua=j('<div class="trace-placeholder svelte-1jef3w8"><p class="svelte-1jef3w8">No data found for <strong class="svelte-1jef3w8"> </strong> </p></div>'),qa=j('<button class="trace-collapse-btn svelte-1jef3w8"> </button>'),za=j('<span class="trace-collapse-spacer svelte-1jef3w8"></span>'),Pa=j('<button class="trace-link-btn svelte-1jef3w8" title="Edit link"></button>'),Ma=j('<strong class="svelte-1jef3w8"> </strong> ',1),Fa=j('<span class="trace-children-count svelte-1jef3w8"> </span>'),Ba=j('<div class="trace-children svelte-1jef3w8"></div>'),Wa=j('<div class="trace-row svelte-1jef3w8"><div><!> <!> <button class="trace-node-content svelte-1jef3w8"><span class="trace-node-type svelte-1jef3w8"> </span> <span class="trace-node-label svelte-1jef3w8"><!></span></button> <!></div> <!></div>'),Ka=j("<span> </span>"),Qa=j('<p class="no-connections svelte-1jef3w8">No direct connections yet.</p>'),Ja=j('<span class="conn-phases svelte-1jef3w8"> </span>'),Ya=j('<button class="connection-item svelte-1jef3w8"><span> </span> <span class="conn-direction svelte-1jef3w8"> </span> <span> </span> <!></button>'),Va=j('<div class="connection-list svelte-1jef3w8"></div>'),Ha=j('<h4 class="svelte-1jef3w8"><!></h4> <p class="trace-detail-text svelte-1jef3w8"><!></p> <button class="btn edit-entity svelte-1jef3w8"> </button>  <div class="connections-section svelte-1jef3w8"><h4 class="svelte-1jef3w8"> </h4> <!></div> <button class="btn connect-action svelte-1jef3w8">+ Create Connection</button>',1),Xa=j('<p class="no-data svelte-1jef3w8">Item not found</p>'),Za=j('<aside class="trace-detail-panel svelte-1jef3w8"><div class="trace-detail-header svelte-1jef3w8"><span> </span> <button class="close-btn svelte-1jef3w8"></button></div> <!></aside>'),el=j('<div class="trace-flow svelte-1jef3w8"><!> <div class="trace-stats svelte-1jef3w8"></div></div> <!>',1),tl=j('<!> <div class="trace-view svelte-1jef3w8"><div class="trace-toolbar svelte-1jef3w8"><div class="trace-start-selector svelte-1jef3w8"><label class="svelte-1jef3w8">Start from:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Question</option><option class="svelte-1jef3w8">Risk</option><option class="svelte-1jef3w8">Control</option></select> <!></div></div> <div class="trace-canvas svelte-1jef3w8"><!></div></div>',1),il=j('<div class="connection-banner svelte-1jef3w8">Connecting from: <strong class="svelte-1jef3w8"> </strong>  Click another item to link them <button class="svelte-1jef3w8">Cancel</button></div>'),rl=j(`<div class="help-banner svelte-1jef3w8"><strong class="svelte-1jef3w8">How to link:</strong> Click an item to select it, then click <span class="plus-hint svelte-1jef3w8">+</span> on it (or another item) to create a connection.
				Questions trigger Risks. Risks link to Control Categories and Regulations.</div>`),nl=j('<span class="dep-badge depends-on svelte-1jef3w8"> </span>'),sl=j('<span class="dep-badge depended-by svelte-1jef3w8"> </span>'),ol=j('<div class="node-deps svelte-1jef3w8"><!> <!></div>'),al=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),ll=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-id svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),dl=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),cl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),ul=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),fl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Risk links"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <div class="node-meta svelte-1jef3w8"><span class="control-count svelte-1jef3w8" title="Controls in this category"> </span></div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),hl=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),vl=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),pl=j('<span class="subcategory svelte-1jef3w8" title="Subcategory"> </span>'),gl=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),yl=j('<span class="conn-indicator svelte-1jef3w8"> </span>'),_l=j('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <div class="node-meta svelte-1jef3w8"><span class="phases svelte-1jef3w8"> </span> <!></div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),wl=j('<div class="more-indicator svelte-1jef3w8"> </div>'),ml=j('<span class="option-tag svelte-1jef3w8"> </span>'),bl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <div class="detail-options svelte-1jef3w8"><strong class="svelte-1jef3w8">Options:</strong> <!></div> <button class="btn edit-entity svelte-1jef3w8">Edit Question</button>',1),jl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <p class="detail-desc svelte-1jef3w8"> </p> <button class="btn edit-entity svelte-1jef3w8">Edit Risk</button>',1),kl=j('<div class="control-item svelte-1jef3w8"><span class="control-name svelte-1jef3w8"> </span> <span class="control-phases svelte-1jef3w8"> </span></div>'),xl=j('<div class="control-item more svelte-1jef3w8"> </div>'),El=j('<div class="detail-controls svelte-1jef3w8"><strong class="svelte-1jef3w8"> </strong> <div class="controls-list svelte-1jef3w8"><!> <!></div></div>'),Sl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <!>',1),Al=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span></div> <p class="detail-desc svelte-1jef3w8"> </p> <button class="btn edit-entity svelte-1jef3w8">Edit Regulation</button>',1),$l=j('<p class="detail-desc svelte-1jef3w8"> </p>'),Gl=j('<span class="category-badge svelte-1jef3w8"> </span>'),Nl=j('<span class="svelte-1jef3w8"> </span>'),Ll=j('<span class="phase-badge svelte-1jef3w8"> </span>'),Dl=j('<span class="tech-badge svelte-1jef3w8"> </span>'),Cl=j('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <!> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Category:</strong> <!></div> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Phases:</strong> <div class="phase-badges svelte-1jef3w8"></div></div> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Tech Types:</strong> <div class="tech-badges svelte-1jef3w8"></div></div> <button class="btn edit-control svelte-1jef3w8">Edit Control</button>',1),Tl=j('<p class="no-connections svelte-1jef3w8">No connections yet. Click + on another node to create one.</p>'),Rl=j('<span class="conn-phases svelte-1jef3w8"> </span>'),Il=j('<button class="connection-item svelte-1jef3w8"><span> </span> <span class="conn-direction svelte-1jef3w8"> </span> <span> </span> <!></button>'),Ol=j('<div class="connection-list svelte-1jef3w8"></div>'),Ul=j('<aside class="detail-panel svelte-1jef3w8"><div class="detail-header svelte-1jef3w8"><span> </span> <button class="close-btn svelte-1jef3w8"></button></div> <!> <div class="connections-section svelte-1jef3w8"><h4 class="svelte-1jef3w8"> </h4> <!></div> <button class="btn connect-action svelte-1jef3w8">+ Create Connection</button></aside>'),ql=j('<!> <div class="graph-toolbar svelte-1jef3w8"><button> </button> <input type="text" placeholder="Search graph..." class="search svelte-1jef3w8"/></div> <div class="layout svelte-1jef3w8"><div class="columns svelte-1jef3w8"><div class="column questions svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">?</span> <h2 class="svelte-1jef3w8">Questions</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column risks svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">!</span> <h2 class="svelte-1jef3w8">Risks</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column mitigations svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">C</span> <h2 class="svelte-1jef3w8">Control Categories</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column regulations svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">R</span> <h2 class="svelte-1jef3w8">Regulations</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column controls svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8"></span> <h2 class="svelte-1jef3w8">Controls</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"><!> <!></div></div></div> <!></div>',1),zl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 1: Discovery <span class="phase-tag p1 svelte-1jef3w8">P1</span></label> <textarea placeholder="Guidance for Phase 1 (Discovery) - retrospective data, algorithm development..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 2: Validation <span class="phase-tag p2 svelte-1jef3w8">P2</span></label> <textarea placeholder="Guidance for Phase 2 (Validation) - prospective testing, controlled settings..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 3: Deployment <span class="phase-tag p3 svelte-1jef3w8">P3</span></label> <textarea placeholder="Guidance for Phase 3 (Deployment) - live use, influences decisions..." rows="4" class="svelte-1jef3w8"></textarea></div>',1),Pl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Code (e.g., "1.4")</label> <input type="text" placeholder="1.4" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Short Name</label> <input type="text" placeholder="Brief name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Full Name</label> <input type="text" placeholder="Full descriptive name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Domain</label> <input type="text" placeholder="Risk domain" class="svelte-1jef3w8"/></div> <div class="phase-guidance-section svelte-1jef3w8"><h4 class="svelte-1jef3w8">Phase-Specific Guidance</h4> <p class="guidance-hint svelte-1jef3w8">Prose that researchers can adapt for their IRB protocols</p> <!></div>',1),Ml=j('<p class="no-conditions svelte-1jef3w8">Always shown (no conditions)</p>'),Fl=j('<div class="condition-item svelte-1jef3w8"><span class="condition-question svelte-1jef3w8"> </span> <span class="condition-equals svelte-1jef3w8">=</span> <span class="condition-values svelte-1jef3w8"><!></span> <button class="remove-condition svelte-1jef3w8" title="Remove condition"></button></div>'),Bl=j('<div class="conditions-list svelte-1jef3w8"></div>'),Wl=j('<option class="svelte-1jef3w8"> </option>'),Kl=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Ql=j('<div class="condition-values-select svelte-1jef3w8"><span class="when-label svelte-1jef3w8">when answer is:</span> <!></div> <button class="btn small svelte-1jef3w8">Add Condition</button>',1),Jl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">ID (no spaces, lowercase)</label> <input type="text" placeholder="my-question-id" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Question Text</label> <textarea placeholder="Enter the question..." rows="3" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Type</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Yes/No</option><option class="svelte-1jef3w8">Single Select</option><option class="svelte-1jef3w8">Multi Select</option></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Category</label> <input type="text" placeholder="Category" class="svelte-1jef3w8"/></div> <div class="form-group show-conditions svelte-1jef3w8"><label class="svelte-1jef3w8">Show Conditions <span class="hint svelte-1jef3w8">(Only show this question when...)</span></label> <!> <div class="add-condition svelte-1jef3w8"><select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select dependency question...</option><!></select> <!></div></div>',1),Yl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Citation (e.g., "45 CFR 46.111(a)(1)")</label> <input type="text" placeholder="45 CFR 46.111(a)(1)" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Description</label> <textarea placeholder="Description of the regulation..." rows="3" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Framework</label> <input type="text" placeholder="e.g., Common Rule, HIPAA" class="svelte-1jef3w8"/></div>',1),Vl=j('<option class="svelte-1jef3w8"> </option>'),Hl=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Xl=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Zl=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">ID</label> <input type="text" placeholder="e.g., A0001_Source2024" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Name</label> <input type="text" placeholder="Control name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Description</label> <textarea placeholder="Description of the control..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Source</label> <input type="text" placeholder="e.g., NIST2024, Bengio2025" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Subcategory</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select subcategory...</option><!></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Phases</label> <div class="checkbox-group svelte-1jef3w8"></div></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Technology Types</label> <div class="checkbox-group tech-types svelte-1jef3w8"><label class="checkbox-label all-types svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> All Types</label> <!></div></div>',1),ed=j('<button class="btn danger svelte-1jef3w8">Delete</button>'),td=j('<div class="svelte-1jef3w8"></div>'),id=j('<div class="modal-overlay svelte-1jef3w8" role="dialog" aria-modal="true"><div class="modal entity-editor svelte-1jef3w8"><div class="modal-header svelte-1jef3w8"><h3 class="svelte-1jef3w8"> </h3> <button class="close-btn svelte-1jef3w8"></button></div> <div class="modal-body svelte-1jef3w8"><!></div> <div class="modal-footer svelte-1jef3w8"><!> <div class="footer-right svelte-1jef3w8"><button class="btn svelte-1jef3w8">Cancel</button> <button class="btn primary svelte-1jef3w8">Save</button></div></div></div></div>'),rd=j('<button><span> </span> <span class="entity-name svelte-1jef3w8"> </span> <span class="entity-category svelte-1jef3w8"> </span></button>'),nd=j('<div class="no-entities svelte-1jef3w8">No matching items found</div>'),sd=j('<div class="entity-selector svelte-1jef3w8"><div class="entity-selector-header svelte-1jef3w8"><span class="selector-label svelte-1jef3w8"> </span> <button class="close-selector svelte-1jef3w8"></button></div> <div class="entity-selector-toolbar svelte-1jef3w8"><input type="text" placeholder="Search..." class="selector-search svelte-1jef3w8"/> <select class="selector-sort svelte-1jef3w8"><option class="svelte-1jef3w8">Sort: Name</option><option class="svelte-1jef3w8">Sort: Code</option><option class="svelte-1jef3w8">Sort: Category</option></select></div> <div class="entity-selector-list svelte-1jef3w8"></div></div>'),od=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),ad=j('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),ld=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Trigger when answer is:</label> <div class="answer-checkboxes svelte-1jef3w8"></div></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Logic (when multiple triggers for same risk)</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">OR - Any trigger activates</option><option class="svelte-1jef3w8">AND - All triggers required</option></select></div>',1),dd=j('<div class="guidance-input svelte-1jef3w8"><span class="guidance-phase svelte-1jef3w8"> </span> <textarea rows="2" class="svelte-1jef3w8"></textarea></div>'),cd=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase-specific Guidance</label> <!></div>'),ud=j('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Note</label> <input type="text" placeholder="Brief note about this regulatory link..." class="svelte-1jef3w8"/></div>'),fd=j('<button class="btn danger svelte-1jef3w8">Delete Link</button>'),hd=j('<div class="modal-overlay svelte-1jef3w8" role="dialog" aria-modal="true"><div class="modal link-editor svelte-1jef3w8"><div class="modal-header svelte-1jef3w8"><h3 class="svelte-1jef3w8"> </h3> <button class="close-btn svelte-1jef3w8"></button></div> <div class="modal-body svelte-1jef3w8"><div class="link-preview svelte-1jef3w8"><button title="Click to change"> <span class="change-icon svelte-1jef3w8"></span></button> <span class="link-arrow svelte-1jef3w8"></span> <button title="Click to change"> <span class="change-icon svelte-1jef3w8"></span></button></div> <!> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Link Type</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Trigger (Question triggers Risk)</option><option class="svelte-1jef3w8">Dependency (Question depends on Question)</option><option class="svelte-1jef3w8">Control Category (Risk linked to Category)</option><option class="svelte-1jef3w8">Regulation (Risk linked to Regulation)</option><option class="svelte-1jef3w8">Control (Risk linked to Control)</option><option class="svelte-1jef3w8">Implementation (Category implements Control)</option><option class="svelte-1jef3w8">Custom</option></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Phases</label> <div class="phase-checkboxes svelte-1jef3w8"></div></div> <!> <!> <!></div> <div class="modal-footer svelte-1jef3w8"><!> <div class="footer-right svelte-1jef3w8"><button class="btn svelte-1jef3w8">Cancel</button> <button class="btn primary svelte-1jef3w8">Save</button></div></div></div></div>'),vd=j('<div class="admin svelte-1jef3w8"><header class="header svelte-1jef3w8"><div class="header-left svelte-1jef3w8"><h1 class="svelte-1jef3w8">Traceability</h1> <div class="view-tabs svelte-1jef3w8"><button>Matrix</button> <button>Trace</button> <button>Graph</button></div></div> <div class="header-right svelte-1jef3w8"><!> <!> <input type="file" accept=".json" style="display: none" class="svelte-1jef3w8"/> <button class="btn svelte-1jef3w8">Import</button> <button class="btn primary svelte-1jef3w8">Export</button> <!></div></header> <!></div> <!> <!>',1);function $d(s,t){On(t,!0);const i="ai-oversight-traceability",r="ai-oversight-version",n=t.data.traceability.version||"2.0.0";function o(){{if(localStorage.getItem(r)!==n)return localStorage.removeItem(i),localStorage.setItem(r,n),JSON.parse(JSON.stringify(t.data.traceability.links));const h=localStorage.getItem(i);if(h)try{return JSON.parse(h)}catch(v){console.error("Failed to parse saved links:",v)}}return JSON.parse(JSON.stringify(t.data.traceability.links))}let a=st(Ki(o())),f=st(Ki(localStorage.getItem(i)!==null));gn(()=>{e(a)&&(localStorage.setItem(i,JSON.stringify(e(a))),E(f,!0))});function p(){confirm("Reset to default? This will discard all local changes.")&&(E(a,JSON.parse(JSON.stringify(t.data.traceability.links)),!0),localStorage.removeItem(i),E(f,!1))}let g;function w(){g?.click()}function b(l){const h=l.target.files?.[0];if(!h)return;const v=new FileReader;v.onload=_=>{try{const G=JSON.parse(_.target?.result);G.links?(E(a,G.links,!0),E(f,!0)):Array.isArray(G)?(E(a,G,!0),E(f,!0)):alert("Invalid file format. Expected traceability JSON.")}catch(G){alert("Failed to parse file: "+G)}},v.readAsText(h)}const S=[{id:"phase-1",name:"Phase 1: Discovery",short:"P1"},{id:"phase-2",name:"Phase 2: Validation",short:"P2"},{id:"phase-3",name:"Phase 3: Deployment",short:"P3"}];let R=st("matrix"),de=st("all"),ve=st("all"),x=st(null),B=st(null),_t=st(!1),T=st(null),D=st(""),A=st(!1),C=st("question"),Q=st("risk"),_e=st(!1),Me=st(null),Ee=st(null),Ut=st(!1);function ui(l,h){const v={"question-risk":"trigger","risk-mitigation":"mitigation","risk-regulation":"regulation","risk-control":"control","mitigation-control":"implementation","question-question":"dependency"};return v[`${l}-${h}`]||v[`${h}-${l}`]||null}function Yi(l,h){const v={trigger:["question","risk"],mitigation:["risk","mitigation"],regulation:["risk","regulation"],control:["risk","control"],implementation:["mitigation","control"],dependency:["question","question"]},_=ui(l,h);if(!_||!v[_])return!1;const[G,se]=v[_];return l===se&&h===G}let qt=P(()=>e(de)==="all"?e(a):e(a).filter(l=>!l.phases||l.phases.includes(e(de)))),xi=P(()=>{const l=new yt({type:"directed",multi:!1,allowSelfLoops:!1});for(const h of e(qt)){const v=`${h.from.entity}:${h.from.id}`,_=`${h.to.entity}:${h.to.id}`;l.hasNode(v)||l.addNode(v,{type:h.from.entity,id:h.from.id}),l.hasNode(_)||l.addNode(_,{type:h.to.entity,id:h.to.id});const G=`${v}->${_}`;l.hasEdge(G)||l.addEdgeWithKey(G,v,_,{link:h})}return l});function is(l,h,v,_){return e(qt).find(G=>G.from.entity===l&&G.from.id===h&&G.to.entity===v&&G.to.id===_||G.from.entity===v&&G.from.id===_&&G.to.entity===l&&G.to.id===h)}function Or(l,h){if(!e(xi).hasNode(l))return!1;if(l===h)return!0;let v=!1;return Dr.bfsFromNode(e(xi),l,_=>_===h?(v=!0,!0):!1,{mode:"outbound"}),v}function rs(l,h){if(!e(xi).hasNode(l)||!e(xi).hasNode(h))return!1;const v=new Set;Dr.bfsFromNode(e(xi),l,G=>(v.add(G),!1),{mode:"inbound"});let _=!1;return Dr.bfsFromNode(e(xi),h,G=>v.has(G)?(_=!0,!0):!1,{mode:"inbound"}),_}function Ei(l,h,v,_){const G=is(l,h,v,_);if(G)return{...G,isDirect:!0};if(l==="question"&&v==="question"&&h!==_){const Se=e(jt).find(z=>z.id===h),N=e(jt).find(z=>z.id===_);if(Se?.showIf&&_ in Se.showIf)return{isDirect:!0,isShowIf:!0,type:"dependency",direction:"depends-on",dependentQuestion:h,requiredQuestion:_,requiredValues:Se.showIf[_]};if(N?.showIf&&h in N.showIf)return{isDirect:!0,isShowIf:!0,type:"dependency",direction:"depended-by",dependentQuestion:_,requiredQuestion:h,requiredValues:N.showIf[h]}}const se=`${l}:${h}`,Y=`${v}:${_}`;return Or(se,Y)?{isDirect:!1,isTransitive:!0,direction:"downstream"}:Or(Y,se)?{isDirect:!1,isTransitive:!0,direction:"upstream"}:rs(se,Y)?{isDirect:!1,isTransitive:!0,direction:"sibling"}:null}function ns(l,h,v,_){const G=Ei(l,h,v,_);if(G?.isShowIf){const se=e(jt).find(Y=>Y.id===G.dependentQuestion);se&&(E(xt,"questions"),Jt(se))}else if(G?.isDirect){const{isDirect:se,...Y}=G;E(T,JSON.parse(JSON.stringify(Y)),!0),E(_t,!0)}else if(G?.isTransitive)confirm(`These are transitively connected via the traceability chain.

Create a direct link between them?`)&&Ur(l,h,v,_);else if(l==="question"&&v==="question"){const se=e(jt).find(Y=>Y.id===h);se&&(E(xt,"questions"),Jt(se))}else Ur(l,h,v,_)}function Ur(l,h,v,_){const G=ui(l,v)||"custom",se=Yi(l,v),Y=se?v:l,Se=se?_:h,N=se?l:v,z=se?h:_,Ge={id:`link-${Date.now()}`,type:G,from:{entity:Y,id:Se},to:{entity:N,id:z},phases:["phase-1","phase-2","phase-3"]};G==="trigger"?(Ge.answerValues=[],Ge.logic="OR"):G==="mitigation"&&(Ge.guidance={}),E(T,Ge,!0),E(_t,!0)}let vi=st("question"),Kt=st(""),lt=st(null),ur=st(Ki(new Set));function ss(l){const h=new Set(e(ur));h.has(l)?h.delete(l):h.add(l),E(ur,h,!0)}let Vi=P(()=>{if(!e(Kt))return null;function l(N){return e(jt).filter(z=>z.showIf&&Object.keys(z.showIf).includes(N)).map(z=>z.id)}function h(N){return e(qt).filter(z=>z.type==="trigger"&&z.from.entity==="question"&&z.from.id===N).map(z=>({risk:e(Rt).find(Ge=>Ge.id===z.to.id),link:z})).filter(z=>z.risk)}function v(N){return e(qt).filter(z=>z.type==="mitigation"&&z.from.entity==="risk"&&z.from.id===N).map(z=>({mitigation:e(ti).find(Ge=>Ge.id===z.to.id),link:z})).filter(z=>z.mitigation)}function _(N){return e(qt).filter(z=>z.type==="regulation"&&z.from.entity==="risk"&&z.from.id===N).map(z=>({regulation:e(oi).find(Ge=>Ge.id===z.to.id),link:z})).filter(z=>z.regulation)}function G(N){return e(It).filter(z=>z.subcategoryId===N).slice(0,5)}function se(N,z,Ge){if(Ge.has(N))return null;Ge.add(N);const Ae=e(jt).find(ht=>ht.id===N);if(!Ae)return null;const Ne={type:"question",id:Ae.id,label:Ae.text,shortLabel:Ae.id,children:[],depth:z},pt=l(N);for(const ht of pt){const $t=se(ht,z+1,Ge);$t&&Ne.children.push($t)}const ft=h(N);for(const{risk:ht,link:$t}of ft)Ne.children.push(Y(ht,$t,z+1));return Ne}function Y(N,z,Ge){const Ae={type:"risk",id:N.id,label:N.shortName,shortLabel:N.code,children:[],link:z,depth:Ge},Ne=v(N.id);for(const{mitigation:ft,link:ht}of Ne)Ae.children.push(Se(ft,ht,Ge+1));const pt=_(N.id);for(const{regulation:ft,link:ht}of pt)Ae.children.push({type:"regulation",id:ft.id,label:ft.description,shortLabel:ft.citation.split("(")[0].trim(),children:[],link:ht,depth:Ge+1});return Ae}function Se(N,z,Ge){const Ae={type:"mitigation",id:N.id,label:N.name,shortLabel:N.code,children:[],link:z,depth:Ge},Ne=G(N.id);for(const ft of Ne)Ae.children.push({type:"control",id:ft.id,label:ft.name,shortLabel:ft.id.split("_")[0],children:[],depth:Ge+1});const pt=e(It).filter(ft=>ft.subcategoryId===N.id).length;return pt>5&&Ae.children.push({type:"more",id:`more-${N.id}`,label:`+${pt-5} more controls`,shortLabel:`+${pt-5}`,children:[],depth:Ge+1,isPlaceholder:!0}),Ae}if(e(vi)==="question")return se(e(Kt),0,new Set);if(e(vi)==="risk"){const N=e(Rt).find(Ne=>Ne.id===e(Kt));if(!N)return null;const z={type:"risk",id:N.id,label:N.shortName,shortLabel:N.code,children:[],depth:0},Ge=v(N.id);for(const{mitigation:Ne,link:pt}of Ge)z.children.push(Se(Ne,pt,1));const Ae=_(N.id);for(const{regulation:Ne,link:pt}of Ae)z.children.push({type:"regulation",id:Ne.id,label:Ne.description,shortLabel:Ne.citation.split("(")[0].trim(),children:[],link:pt,depth:1});return z}else{const N=e(It).find(Ae=>Ae.id===e(Kt));if(!N)return null;const z=e(ti).find(Ae=>Ae.id===N.subcategoryId),Ge={type:"control",id:N.id,label:N.name,shortLabel:N.id.split("_")[0],children:[],depth:0};if(z){const Ae=e(qt).filter(Ne=>Ne.type==="mitigation"&&Ne.to.id===z.id).map(Ne=>({risk:e(Rt).find(pt=>pt.id===Ne.from.id),link:Ne})).filter(Ne=>Ne.risk);for(const{risk:Ne}of Ae.slice(0,5))Ge.children.push({type:"risk",id:Ne.id,label:Ne.shortName,shortLabel:Ne.code,children:[],depth:1})}return Ge}}),os=P(()=>{const l=new Map;if(!e(Vi))return l;function h(v){const _=l.get(v.type)||[];_.push(v),l.set(v.type,_),v.children.forEach(h)}return h(e(Vi)),l}),ei=st(null),pi=st(""),Ui=st("name"),xt=st("risks"),Si=st(!1),M=st(null),Hi=st(!1),gi=st(""),Qt=st(Ki([]));const qr="ai-oversight-entities";function as(){{const l=localStorage.getItem(qr);if(l)try{return JSON.parse(l)}catch(h){console.error("Failed to parse saved entities:",h)}}return null}let At=st(Ki(as()||{questions:null,risks:null,regulations:null,controls:null})),ls=P(()=>e(At).questions!==null||e(At).risks!==null||e(At).regulations!==null||e(At).controls!==null);gn(()=>{e(ls)&&localStorage.setItem(qr,JSON.stringify(e(At)))});let zr=P(()=>{const l=[];for(const h of t.data.questionCategories)for(const v of h.questions){let _=[];v.type==="yes-no"?_=[{value:"yes",label:"Yes"},{value:"no",label:"No"}]:v.options&&(_=v.options.map(G=>({value:G.value,label:G.label}))),l.push({id:v.id,text:v.question,type:v.type,category:h.name,options:_,showIf:v.showIf})}return l}),Pr=P(()=>t.data.subdomains.map(l=>({id:l.id,code:l.code,name:l.name,shortName:l.shortName,domain:l.domain,phaseGuidance:l.phaseGuidance||{"phase-1":"","phase-2":"","phase-3":""}}))),ds=P(()=>{const l=[];for(const h of t.data.controlSubcategories){const v=t.data.controlCategories.find(_=>_.id===h.categoryId);l.push({id:h.id,code:h.code,name:h.name,category:v?.name||h.categoryId})}return l}),Mr=P(()=>{const l=[];for(const[h,v]of Object.entries(t.data.regulations))for(const _ of v.sections)l.push({id:_.id,citation:_.citation,description:_.description,framework:v.title});return l}),Fr=P(()=>t.data.controls.map(l=>({id:l.id,name:l.name,description:l.description,source:l.source,subcategoryId:l.subcategoryId,phases:l.phases||["phase-1","phase-2","phase-3"],techTypes:l.techTypes||["all"]}))),jt=P(()=>e(At).questions??e(zr)),Rt=P(()=>e(At).risks??e(Pr)),ti=P(()=>e(ds)),oi=P(()=>e(At).regulations??e(Mr)),It=P(()=>e(At).controls??e(Fr));const ai={question:{label:"Questions",shortLabel:"Q",getAll:()=>e(jt).filter(l=>!["phase","model-types"].includes(l.id)),getLabel:l=>l.text,getShortLabel:l=>l.id,searchText:l=>l.text+" "+l.id},risk:{label:"Risks",shortLabel:"Risk",getAll:()=>e(Rt),getLabel:l=>l.shortName,getShortLabel:l=>l.code,searchText:l=>l.shortName+" "+l.name+" "+l.code},mitigation:{label:"Control Categories",shortLabel:"Mit",getAll:()=>e(ti),getLabel:l=>l.name,getShortLabel:l=>l.code,searchText:l=>l.name+" "+l.code},regulation:{label:"Regulations",shortLabel:"Reg",getAll:()=>e(oi),getLabel:l=>l.citation,getShortLabel:l=>l.citation.split("(")[0].trim(),searchText:l=>l.citation+" "+l.description},control:{label:"Controls",shortLabel:"Ctrl",getAll:()=>{let l=e(It);return e(de)!=="all"&&(l=l.filter(h=>h.phases?.includes(e(de)))),e(ve)!=="all"&&(l=l.filter(h=>h.techTypes?.includes("all")||h.techTypes?.includes(e(ve)))),l.slice(0,100)},getLabel:l=>l.name,getShortLabel:l=>l.id.split("_")[0],searchText:l=>l.name+" "+l.id}};let fr=P(()=>{const l=ai[e(C)];let h=l.getAll();if(e(D)){const v=e(D).toLowerCase();h=h.filter(_=>l.searchText(_).toLowerCase().includes(v))}return e(Ut)&&(h=h.filter(v=>!e(qi).some(G=>Ei(e(C),v.id,e(Q),G.id)))),h}),qi=P(()=>{let h=ai[e(Q)].getAll();return e(Ut)&&(h=h.filter(v=>!ai[e(C)].getAll().some(G=>Ei(e(C),G.id,e(Q),v.id)))),h}),Br=P(()=>!0),zi=P(()=>{if(!e(Me)&&!e(Ee))return null;let l="",h="";if(e(Me)){const v=ai[e(C)],_=v.getAll().find(G=>G.id===e(Me));l=_?`${v.getShortLabel(_)}: ${v.getLabel(_)}`:e(Me)}if(e(Ee)){const v=ai[e(Q)],_=v.getAll().find(G=>G.id===e(Ee));h=_?`${v.getShortLabel(_)}: ${v.getLabel(_)}`:e(Ee)}return{row:l,col:h}}),Ai=P(()=>{let l=e(It);return e(de)!=="all"&&(l=l.filter(h=>h.phases?.includes(e(de)))),e(ve)!=="all"&&(l=l.filter(h=>h.techTypes?.includes("all")||h.techTypes?.includes(e(ve)))),l}),Wr=P(()=>{const l=fi(e(jt),h=>h.text,"question");return!e(A)||!e(x)?l.length:l.filter(h=>{const v=e(x)?.type==="question"&&e(x)?.id===h.id,_=e(yi).has(`question:${h.id}`);return v||_}).length}),Kr=P(()=>{const l=fi(e(Rt),h=>h.shortName+" "+h.name,"risk");return!e(A)||!e(x)?l.length:l.filter(h=>{const v=e(x)?.type==="risk"&&e(x)?.id===h.id,_=e(yi).has(`risk:${h.id}`);return v||_}).length}),Qr=P(()=>{const l=fi(e(ti),h=>h.name,"mitigation");return!e(A)||!e(x)?l.length:l.filter(h=>{const v=e(x)?.type==="mitigation"&&e(x)?.id===h.id,_=e(yi).has(`mitigation:${h.id}`);return v||_}).length}),Jr=P(()=>{const l=fi(e(oi),h=>h.citation+" "+h.description,"regulation");return!e(A)||!e(x)?l.length:l.filter(h=>{const v=e(x)?.type==="regulation"&&e(x)?.id===h.id,_=e(yi).has(`regulation:${h.id}`);return v||_}).length}),Yr=P(()=>{const l=e(Ai).slice(0,50);return!e(A)||!e(x)?Math.min(e(Ai).length,50):l.filter(h=>{const v=e(x)?.type==="control"&&e(x)?.id===h.id,_=e(yi).has(`control:${h.id}`);return v||_}).length});function cs(l){const h=e(It).find(v=>v.id===l);return h?e(qt).filter(v=>v.type==="mitigation"&&v.to.entity==="mitigation"&&v.to.id===h.subcategoryId).length:0}let hr=P(()=>{const l={rows:0,cols:0,total:0};if(!e(Br))return l;const h=ai[e(C)].getAll(),v=ai[e(Q)].getAll();return h.forEach(_=>{v.some(se=>Ei(e(C),_.id,e(Q),se.id))||l.rows++}),v.forEach(_=>{h.some(se=>Ei(e(C),se.id,e(Q),_.id))||l.cols++}),l.total=l.rows+l.cols,l});function Vr(l,h){return e(qt).filter(v=>v.from.entity===l&&v.from.id===h||v.to.entity===l&&v.to.id===h)}let yi=P(()=>{if(!e(x))return new Set;const l=new Set,h=e(x).type,v=(Y,Se,N=!1)=>{Y===h&&!N||l.add(`${Y}:${Se}`)};if(l.add(`${e(x).type}:${e(x).id}`),h==="question"){const Y=e(jt).find(Se=>Se.id===e(x).id);if(Y?.showIf)for(const Se of Object.keys(Y.showIf))l.add(`question:${Se}`);for(const Se of e(jt))Se.showIf&&e(x).id in Se.showIf&&l.add(`question:${Se.id}`)}if(h==="control"){const Y=e(It).find(Se=>Se.id===e(x).id);if(Y?.subcategoryId){const Se=e(It).filter(N=>N.subcategoryId===Y.subcategoryId);for(const N of Se)l.add(`control:${N.id}`)}}const _=e(qt).filter(Y=>Y.from.entity===e(x).type&&Y.from.id===e(x).id||Y.to.entity===e(x).type&&Y.to.id===e(x).id),G=[],se=[];if(e(x).type==="control"){const Y=e(It).find(Se=>Se.id===e(x).id);Y?.subcategoryId&&(v("mitigation",Y.subcategoryId),se.push(Y.subcategoryId))}for(const Y of _)Y.from.entity===e(x).type&&Y.from.id===e(x).id?(v(Y.to.entity,Y.to.id),Y.to.entity==="risk"&&G.push(Y.to.id),Y.to.entity==="mitigation"&&se.push(Y.to.id)):(v(Y.from.entity,Y.from.id),Y.from.entity==="risk"&&G.push(Y.from.id),Y.from.entity==="mitigation"&&se.push(Y.from.id));for(const Y of G){const Se=e(qt).filter(N=>N.from.entity==="risk"&&N.from.id===Y||N.to.entity==="risk"&&N.to.id===Y);for(const N of Se)N.from.entity==="risk"&&N.from.id===Y?(v(N.to.entity,N.to.id),N.to.entity==="mitigation"&&se.push(N.to.id)):v(N.from.entity,N.from.id)}for(const Y of se){if(h!=="control"){const N=e(It).filter(z=>z.subcategoryId===Y);for(const z of N)v("control",z.id)}const Se=e(qt).filter(N=>N.type==="mitigation"&&N.to.entity==="mitigation"&&N.to.id===Y);for(const N of Se){const z=N.from.id;v("risk",z);const Ge=e(qt).filter(Ae=>Ae.type==="regulation"&&Ae.from.entity==="risk"&&Ae.from.id===z);for(const Ae of Ge)v(Ae.to.entity,Ae.to.id)}}return l});function Pi(l,h){return e(x)?e(yi).has(`${l}:${h}`):!1}function $i(l,h){return e(x)?e(qt).find(v=>v.from.entity===e(x).type&&v.from.id===e(x).id&&v.to.entity===l&&v.to.id===h||v.to.entity===e(x).type&&v.to.id===e(x).id&&v.from.entity===l&&v.from.id===h||v.from.entity===l&&v.from.id===h&&v.to.entity===e(x).type&&v.to.id===e(x).id||v.to.entity===l&&v.to.id===h&&v.from.entity===e(x).type&&v.from.id===e(x).id):null}function us(l,h,v,_){return e(a).find(G=>G.from.entity===l&&G.from.id===h&&G.to.entity===v&&G.to.id===_||G.from.entity===v&&G.from.id===_&&G.to.entity===l&&G.to.id===h)}function ii(l,h){if(e(B))if(e(B).type===l&&e(B).id===h)E(B,null);else{const v=us(e(B).type,e(B).id,l,h);if(v)E(T,JSON.parse(JSON.stringify(v)),!0),E(_t,!0);else{let _="custom";e(B).type==="question"&&l==="risk"||e(B).type==="risk"&&l==="question"?_="trigger":e(B).type==="question"&&l==="question"?_="dependency":e(B).type==="risk"&&l==="mitigation"||e(B).type==="mitigation"&&l==="risk"?_="mitigation":e(B).type==="risk"&&l==="regulation"||e(B).type==="regulation"&&l==="risk"?_="regulation":e(B).type==="risk"&&l==="control"||e(B).type==="control"&&l==="risk"?_="control":(e(B).type==="mitigation"&&l==="control"||e(B).type==="control"&&l==="mitigation")&&(_="implementation");let G,se;_==="dependency"?(G=e(B),se={type:l,id:h}):e(B).type==="question"||e(B).type==="risk"?(G=e(B),se={type:l,id:h}):(G={type:l,id:h},se=e(B)),E(T,{id:`link-${Date.now()}`,type:_,from:{entity:G.type,id:G.id},to:{entity:se.type,id:se.id},phases:["phase-1","phase-2","phase-3"],answerValues:[],logic:"OR",guidance:{}},!0),E(_t,!0)}E(B,null)}else{const v=$i(l,h);if(v){E(T,JSON.parse(JSON.stringify(v)),!0),E(_t,!0);return}e(x)?.type===l&&e(x)?.id===h?E(x,null):E(x,{type:l,id:h},!0)}}function _i(l,h,v){v.stopPropagation(),E(B,{type:l,id:h},!0),E(x,null)}function fs(){if(!e(T))return;const l=e(a).findIndex(h=>h.id===e(T).id);l>=0?e(a)[l]=e(T):E(a,[...e(a),e(T)],!0),E(_t,!1),E(T,null)}function hs(){e(T)&&(E(a,e(a).filter(l=>l.id!==e(T).id),!0),E(_t,!1),E(T,null))}function Xi(l){return e(jt).find(h=>h.id===l)}function Hr(l){return e(Rt).find(h=>h.id===l)}function Xr(l){return e(ti).find(h=>h.id===l)}function Zr(l){return e(oi).find(h=>h.id===l)}function vs(l){return e(It).find(h=>h.id===l)}function en(l){return t.data.controlSubcategories.find(h=>h.id===l)}function ps(l){const h=Xi(l),v=h?.showIf?Object.keys(h.showIf):[],_=e(jt).filter(G=>G.showIf&&l in G.showIf).map(G=>G.id);return{dependsOn:v,dependedBy:_}}function gs(l,h){return h==="trigger"?l==="from"?e(jt).map(v=>({id:v.id,name:v.text,code:v.id,category:v.category,type:"question"})):e(Rt).map(v=>({id:v.id,name:v.shortName,code:v.code,category:v.domain,type:"risk"})):h==="mitigation"?l==="from"?e(Rt).map(v=>({id:v.id,name:v.shortName,code:v.code,category:v.domain,type:"risk"})):e(ti).map(v=>({id:v.id,name:v.name,code:v.code,category:v.category,type:"mitigation"})):h==="regulation"?l==="from"?e(Rt).map(v=>({id:v.id,name:v.shortName,code:v.code,category:v.domain,type:"risk"})):e(oi).map(v=>({id:v.id,name:v.description,code:v.citation,category:v.framework,type:"regulation"})):[]}let ys=P(()=>{if(!e(ei)||!e(T))return[];const l=gs(e(ei),e(T).type);let h=l;if(e(pi)){const v=e(pi).toLowerCase();h=l.filter(_=>_.name.toLowerCase().includes(v)||_.code.toLowerCase().includes(v)||_.category.toLowerCase().includes(v))}return h.sort((v,_)=>e(Ui)==="name"?v.name.localeCompare(_.name):e(Ui)==="code"?v.code.localeCompare(_.code):e(Ui)==="category"?v.category.localeCompare(_.category):0),h});function _s(l){!e(T)||!e(ei)||(e(T)[e(ei)]={entity:l.type,id:l.id},E(ei,null),E(pi,""))}function tn(l){e(At)[l]===null&&(l==="questions"?e(At).questions=JSON.parse(JSON.stringify(e(zr))):l==="risks"?e(At).risks=JSON.parse(JSON.stringify(e(Pr))):l==="regulations"?e(At).regulations=JSON.parse(JSON.stringify(e(Mr))):l==="controls"&&(e(At).controls=JSON.parse(JSON.stringify(e(Fr)))))}function Jt(l){E(Hi,!1),E(M,JSON.parse(JSON.stringify(l)),!0),E(gi,""),E(Qt,[],!0),E(Si,!0)}function ws(){if(!e(M))return;e(Hi)&&!e(M).id&&(e(M).id=`${e(xt).slice(0,-1)}-${Date.now()}`),tn(e(xt));const l=e(At)[e(xt)],h=l.findIndex(v=>v.id===e(M).id);h>=0?l[h]=e(M):l.push(e(M)),E(At,{...e(At)},!0),E(Si,!1),E(M,null)}function ms(){e(M)&&confirm("Delete this entity? This cannot be undone.")&&(tn(e(xt)),e(At)[e(xt)]=e(At)[e(xt)].filter(l=>l.id!==e(M).id),E(At,{...e(At)},!0),E(Si,!1),E(M,null))}function Gi(l,h){return l==="question"?Xi(h)?.text||h:l==="risk"?Hr(h)?.shortName||h:l==="mitigation"?Xr(h)?.name||h:l==="regulation"&&Zr(h)?.citation||h}function bs(){const l={$schema:"./schemas/traceability.schema.json",version:"1.0.0",lastUpdated:new Date().toISOString().split("T")[0],description:"Graph-based traceability",nodes:t.data.traceability.nodes,links:e(a)},h=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),v=URL.createObjectURL(h),_=document.createElement("a");_.href=v,_.download="traceability.json",_.click(),URL.revokeObjectURL(v)}function fi(l,h,v){if(!e(D))return l;const _=e(D).toLowerCase();return l.filter(G=>!!(h(G).toLowerCase().includes(_)||G.id.toLowerCase().includes(_)||e(x)&&v&&e(yi).has(`${v}:${G.id}`)))}function Mi(l,h){return e(qt).filter(v=>v.from.entity===l&&v.from.id===h||v.to.entity===l&&v.to.id===h).length}let pe=P(()=>{if(!e(x))return null;const{type:l,id:h}=e(x),v=Vr(l,h);if(l==="question"){const _=Xi(h);return{type:l,item:_,connections:v}}else if(l==="risk"){const _=Hr(h);return{type:l,item:_,connections:v}}else if(l==="mitigation"){const _=Xr(h);return{type:l,item:_,connections:v}}else if(l==="regulation"){const _=Zr(h);return{type:l,item:_,connections:v}}else if(l==="control"){const _=vs(h);return{type:l,item:_,connections:v}}return null});var rn=vd();Is("1jef3w8",l=>{Ts(()=>{Rs.title="Traceability Admin - AI Oversight Tools"})});var vr=ae(rn),pr=c(vr),gr=c(pr),nn=u(c(gr),2),yr=c(nn);yr.__click=()=>E(R,"matrix");let sn;var _r=u(yr,2);_r.__click=()=>E(R,"trace");let on;var an=u(_r,2);an.__click=()=>E(R,"graph");let ln;d(nn),d(gr);var dn=u(gr,2),cn=c(dn);{var js=l=>{var h=fa();y(l,h)},ks=l=>{var h=ha();y(l,h)};L(cn,l=>{e(f)?l(js):l(ks,!1)})}var un=u(cn,2);Ks(un,{get phases(){return S},get modelTypes(){return t.data.modelTypes},get selectedPhase(){return e(de)},get selectedTechType(){return e(ve)},onPhaseChange:l=>E(de,l,!0),onTechTypeChange:l=>E(ve,l,!0)});var wr=u(un,2);wr.__change=b,Ps(wr,l=>g=l,()=>g);var fn=u(wr,2);fn.__click=w;var hn=u(fn,2);hn.__click=bs;var xs=u(hn,2);{var Es=l=>{var h=va();h.__click=p,y(l,h)};L(xs,l=>{e(f)&&l(Es)})}d(dn),d(pr);var Ss=u(pr,2);{var As=l=>{var h=Ga(),v=ae(h),_=c(v),G=c(_),se=u(c(G),2),Y=c(se);Y.value=Y.__value="question";var Se=u(Y);Se.value=Se.__value="risk";var N=u(Se);N.value=N.__value="mitigation";var z=u(N);z.value=z.__value="regulation";var Ge=u(z);Ge.value=Ge.__value="control",d(se),d(G);var Ae=u(G,4),Ne=u(c(Ae),2),pt=c(Ne);pt.value=pt.__value="question";var ft=u(pt);ft.value=ft.__value="risk";var ht=u(ft);ht.value=ht.__value="mitigation";var $t=u(ht);$t.value=$t.__value="regulation";var Yt=u($t);Yt.value=Yt.__value="control",d(Ne),d(Ae);var wt=u(Ae,2);{var St=O=>{var H=pa();y(O,H)};L(wt,O=>{e(Br)||O(St)})}d(_);var Dt=u(_,2),Ct=c(Dt),Tt=c(Ct);Et(Tt),ir(2),d(Ct);var Oe=u(Ct,2);let Ke;var dt=c(Oe);Et(dt);var bt=u(dt,4);{var vt=O=>{var H=ga(),ie=c(H,!0);d(H),$(()=>m(ie,e(hr).total)),y(O,H)};L(bt,O=>{e(hr).total>0&&O(vt)})}d(Oe);var Le=u(Oe,2);Et(Le),d(Dt),d(v);var De=u(v,2);let We;var Ce=c(De);{var qe=O=>{var H=ya(),ie=u(c(H),2),Re=c(ie,!0);d(ie),d(H),$(()=>m(Re,e(zi).row)),y(O,H)};L(Ce,O=>{e(zi)?.row&&O(qe)})}var Qe=u(Ce,2);{var Ve=O=>{var H=_a(),ie=u(c(H),2),Re=c(ie,!0);d(ie),d(H),$(()=>m(Re,e(zi).col)),y(O,H)};L(Qe,O=>{e(zi)?.col&&O(Ve)})}d(De);var He=u(De,2),ce=c(He);{var ue=O=>{var H=wa(),ie=c(H),Re=c(ie);d(ie),d(H),$(()=>m(Re,`No items to display. ${e(fr).length??""} rows, ${e(qi).length??""} columns.`)),y(O,H)},re=O=>{const H=P(()=>ai[e(C)]),ie=P(()=>ai[e(Q)]);var Re=$a(),nt=c(Re),mt=c(nt),Je=c(mt),X=c(Je,!0);d(Je);var ge=u(Je);ot(ge,17,()=>e(qi),at,(ct,ye)=>{var U=ba();let k;U.__click=()=>{E(xt,e(Q)==="question"?"questions":e(Q)==="risk"?"risks":e(Q)==="mitigation"?"mitigations":e(Q)==="regulation"?"regulations":"controls",!0),Jt(e(ye))};var ee=c(U);{var F=V=>{var ne=ma(),ke=c(ne,!0);d(ne),$(oe=>m(ke,oe),[()=>e(ie).getLabel(e(ye))]),y(V,ne)},Z=V=>{var ne=Mt();$(ke=>m(ne,ke),[()=>e(ie).getShortLabel(e(ye))]),y(V,ne)};L(ee,V=>{e(_e)?V(F):V(Z,!1)})}d(U),$(V=>{k=ut(U,1,"col-header clickable svelte-1jef3w8",null,k,{highlighted:e(Ee)===e(ye).id}),Wt(U,"title",V)},[()=>`${e(ie).getLabel(e(ye))} (click to edit)`]),rr("mouseenter",U,()=>E(Ee,e(ye).id,!0)),y(ct,U)}),d(mt),d(nt);var Fe=u(nt);ot(Fe,21,()=>e(fr),at,(ct,ye)=>{var U=Aa();let k;var ee=c(U);let F;ee.__click=()=>{E(xt,e(C)==="question"?"questions":e(C)==="risk"?"risks":e(C)==="mitigation"?"mitigations":e(C)==="regulation"?"regulations":"controls",!0),Jt(e(ye))};var Z=c(ee);{var V=oe=>{var J=ja(),q=c(J,!0);d(J),$(K=>m(q,K),[()=>e(H).getLabel(e(ye))]),y(oe,J)},ne=oe=>{var J=Mt();$(q=>m(J,q),[()=>e(H).getShortLabel(e(ye))]),y(oe,J)};L(Z,oe=>{e(_e)?oe(V):oe(ne,!1)})}d(ee);var ke=u(ee);ot(ke,17,()=>e(qi),at,(oe,J)=>{const q=P(()=>Ei(e(C),e(ye).id,e(Q),e(J).id));var K=Sa();let Te;K.__click=()=>ns(e(C),e(ye).id,e(Q),e(J).id);var Xe=c(K);{var fe=Ue=>{var we=ka(),Ze=c(we,!0);d(we),$(()=>m(Ze,e(q).direction==="depends-on"?"":"")),y(Ue,we)},ze=Ue=>{var we=rt(),Ze=ae(we);{var he=$e=>{var Ye=xa();y($e,Ye)},Be=$e=>{var Ye=rt(),be=ae(Ye);{var je=Pe=>{var xe=Ea(),Ie=c(xe,!0);d(xe),$(()=>{ut(xe,1,`cell-marker transitive-${e(q).direction??""}`,"svelte-1jef3w8"),m(Ie,e(q).direction==="downstream"?"":e(q).direction==="upstream"?"":"~")}),y(Pe,xe)};L(be,Pe=>{e(q)?.isTransitive&&Pe(je)},!0)}y($e,Ye)};L(Ze,$e=>{e(q)?.isDirect?$e(he):$e(Be,!1)},!0)}y(Ue,we)};L(Xe,Ue=>{e(q)?.isShowIf?Ue(fe):Ue(ze,!1)})}d(K),$(()=>{Te=ut(K,1,"matrix-cell svelte-1jef3w8",null,Te,{linked:e(q)?.isDirect&&!e(q)?.isShowIf,"showif-depends":e(q)?.isShowIf&&e(q)?.direction==="depends-on","showif-depended":e(q)?.isShowIf&&e(q)?.direction==="depended-by","transitive-downstream":e(q)?.isTransitive&&e(q)?.direction==="downstream","transitive-upstream":e(q)?.isTransitive&&e(q)?.direction==="upstream","transitive-sibling":e(q)?.isTransitive&&e(q)?.direction==="sibling","col-highlighted":e(Ee)===e(J).id,"row-highlighted":e(Me)===e(ye).id}),Wt(K,"title",e(q)?.isShowIf?`${e(q).direction==="depends-on"?"Row depends on column":"Column depends on row"} (click to edit showIf)`:e(q)?.isDirect?"Direct link (click to edit)":e(q)?.isTransitive?`${e(q).direction==="downstream"?"Downstream":e(q).direction==="upstream"?"Upstream":"Sibling"} connection (click to create direct)`:"No connection (click to create)")}),rr("mouseenter",K,()=>{E(Me,e(ye).id,!0),E(Ee,e(J).id,!0)}),y(oe,K)}),d(U),$(oe=>{k=ut(U,1,"svelte-1jef3w8",null,k,{"row-highlighted":e(Me)===e(ye).id}),F=ut(ee,1,"row-label clickable svelte-1jef3w8",null,F,{highlighted:e(Me)===e(ye).id}),Wt(ee,"title",oe)},[()=>`${e(H).getLabel(e(ye))} (click to edit)`]),rr("mouseenter",ee,()=>E(Me,e(ye).id,!0)),y(ct,U)}),d(Fe),d(Re),$(()=>m(X,e(H).label)),y(O,Re)};L(ce,O=>{e(fr).length===0||e(qi).length===0?O(ue):O(re,!1)})}d(He),$(()=>{Ke=ut(Oe,1,"verbose-toggle svelte-1jef3w8",null,Ke,{warning:e(hr).total>0}),We=ut(De,1,"matrix-hover-info svelte-1jef3w8",null,We,{"has-content":e(zi)})}),Ht(se,()=>e(C),O=>E(C,O)),Ht(Ne,()=>e(Q),O=>E(Q,O)),wn(Tt,()=>e(_e),O=>E(_e,O)),wn(dt,()=>e(Ut),O=>E(Ut,O)),Gt(Le,()=>e(D),O=>E(D,O)),rr("mouseleave",He,()=>{E(Me,null),E(Ee,null)}),y(l,h)},$s=l=>{var h=rt(),v=ae(h);{var _=se=>{var Y=tl(),Se=ae(Y);{var N=Oe=>{var Ke=Na(),dt=u(c(Ke)),bt=c(dt,!0);d(dt);var vt=u(dt,2);vt.__click=()=>E(B,null),d(Ke),$(Le=>m(bt,Le),[()=>Gi(e(B).type,e(B).id)]),y(Oe,Ke)};L(Se,Oe=>{e(B)&&Oe(N)})}var z=u(Se,2),Ge=c(z),Ae=c(Ge),Ne=u(c(Ae),2),pt=c(Ne);pt.value=pt.__value="question";var ft=u(pt);ft.value=ft.__value="risk";var ht=u(ft);ht.value=ht.__value="control",d(Ne);var $t=u(Ne,2);{var Yt=Oe=>{var Ke=Da(),dt=c(Ke);dt.value=dt.__value="";var bt=u(dt);ot(bt,17,()=>e(jt).filter(vt=>!vt.showIf||Object.keys(vt.showIf).length===0),at,(vt,Le)=>{var De=La(),We=c(De);d(De);var Ce={};$(qe=>{m(We,`${e(Le).id??""}: ${qe??""}...`),Ce!==(Ce=e(Le).id)&&(De.value=(De.__value=e(Le).id)??"")},[()=>e(Le).text.slice(0,50)]),y(vt,De)}),d(Ke),Ht(Ke,()=>e(Kt),vt=>E(Kt,vt)),y(Oe,Ke)},wt=Oe=>{var Ke=rt(),dt=ae(Ke);{var bt=Le=>{var De=Ta(),We=c(De);We.value=We.__value="";var Ce=u(We);ot(Ce,17,()=>e(Rt),at,(qe,Qe)=>{var Ve=Ca(),He=c(Ve);d(Ve);var ce={};$(()=>{m(He,`${e(Qe).code??""}: ${e(Qe).shortName??""}`),ce!==(ce=e(Qe).id)&&(Ve.value=(Ve.__value=e(Qe).id)??"")}),y(qe,Ve)}),d(De),Ht(De,()=>e(Kt),qe=>E(Kt,qe)),y(Le,De)},vt=Le=>{var De=Ia(),We=c(De);We.value=We.__value="";var Ce=u(We);ot(Ce,17,()=>e(It).slice(0,100),at,(qe,Qe)=>{var Ve=Ra(),He=c(Ve);d(Ve);var ce={};$(ue=>{m(He,`${e(Qe).id??""}: ${ue??""}...`),ce!==(ce=e(Qe).id)&&(Ve.value=(Ve.__value=e(Qe).id)??"")},[()=>e(Qe).name.slice(0,40)]),y(qe,Ve)}),d(De),Ht(De,()=>e(Kt),qe=>E(Kt,qe)),y(Le,De)};L(dt,Le=>{e(vi)==="risk"?Le(bt):Le(vt,!1)},!0)}y(Oe,Ke)};L($t,Oe=>{e(vi)==="question"?Oe(Yt):Oe(wt,!1)})}d(Ae),d(Ge);var St=u(Ge,2),Dt=c(St);{var Ct=Oe=>{var Ke=Oa();y(Oe,Ke)},Tt=Oe=>{var Ke=rt(),dt=ae(Ke);{var bt=Le=>{var De=Ua(),We=c(De),Ce=u(c(We)),qe=c(Ce,!0);d(Ce);var Qe=u(Ce);d(We),d(De),$(()=>{m(qe,e(vi)),m(Qe,`: ${e(Kt)??""}`)}),y(Le,De)},vt=Le=>{var De=el(),We=ae(De);{const He=(ce,ue=yn,re=yn)=>{const O=P(()=>`${ue().type}:${ue().id}`),H=P(()=>e(ur).has(e(O)));var ie=Wa(),Re=c(ie);let nt;var mt=c(Re);{var Je=J=>{var q=qa();q.__click=Te=>{Te.stopPropagation(),ss(e(O))};var K=c(q,!0);d(q),$(()=>{Wt(q,"title",e(H)?"Expand":"Collapse"),m(K,e(H)?"":"")}),y(J,q)},X=J=>{var q=za();y(J,q)};L(mt,J=>{ue().children.length>0?J(Je):J(X,!1)})}var ge=u(mt,2);{var Fe=J=>{var q=Pa();q.__click=K=>{K.stopPropagation(),E(T,JSON.parse(JSON.stringify(ue().link)),!0),E(_t,!0)},y(J,q)};L(ge,J=>{ue().link&&J(Fe)})}var ct=u(ge,2);ct.__click=()=>{ue().isPlaceholder||(e(B)?ii(ue().type,ue().id):E(lt,{type:ue().type,id:ue().id},!0))};var ye=c(ct),U=c(ye,!0);d(ye);var k=u(ye,2),ee=c(k);{var F=J=>{var q=Mt();$(()=>m(q,ue().label)),y(J,q)},Z=J=>{var q=Ma(),K=ae(q),Te=c(K,!0);d(K);var Xe=u(K);$(()=>{m(Te,ue().shortLabel),m(Xe,`: ${ue().label??""}`)}),y(J,q)};L(ee,J=>{ue().isPlaceholder?J(F):J(Z,!1)})}d(k),d(ct);var V=u(ct,2);{var ne=J=>{var q=Fa(),K=c(q,!0);d(q),$(()=>m(K,ue().children.length)),y(J,q)};L(V,J=>{ue().children.length>0&&J(ne)})}d(Re);var ke=u(Re,2);{var oe=J=>{var q=Ba();ot(q,21,()=>ue().children,at,(K,Te)=>{He(K,()=>e(Te),()=>re()+1)}),d(q),y(J,q)};L(ke,J=>{ue().children.length>0&&!e(H)&&J(oe)})}d(ie),$(J=>{Us(ie,`--indent: ${re()??""}`),nt=ut(Re,1,`trace-node ${ue().type??""}`,"svelte-1jef3w8",nt,{selected:e(lt)?.type===ue().type&&e(lt)?.id===ue().id,placeholder:ue().isPlaceholder,"has-children":ue().children.length>0}),m(U,J)},[()=>ue().type==="more"?"+":ue().type.charAt(0).toUpperCase()]),y(ce,ie)};var Ce=c(We);He(Ce,()=>e(Vi),()=>0);var qe=u(Ce,2);ot(qe,21,()=>Array.from(e(os).entries()),at,(ce,ue)=>{var re=P(()=>_n(e(ue),2));let O=()=>e(re)[0],H=()=>e(re)[1];var ie=Ka(),Re=c(ie);d(ie),$(()=>{ut(ie,1,`trace-stat ${O()??""}`,"svelte-1jef3w8"),m(Re,`${H().length??""} ${O()??""}${H().length!==1?"s":""}`)}),y(ce,ie)}),d(qe),d(We)}var Qe=u(We,2);{var Ve=He=>{const ce=P(()=>(()=>{const Je=e(lt).type,X=e(lt).id;return Je==="question"?e(jt).find(ge=>ge.id===X):Je==="risk"?e(Rt).find(ge=>ge.id===X):Je==="mitigation"?e(ti).find(ge=>ge.id===X):Je==="control"?e(It).find(ge=>ge.id===X):Je==="regulation"?e(oi).find(ge=>ge.id===X):null})());var ue=Za(),re=c(ue),O=c(re),H=c(O,!0);d(O);var ie=u(O,2);ie.__click=()=>E(lt,null),d(re);var Re=u(re,2);{var nt=Je=>{const X=P(()=>Vr(e(lt).type,e(lt).id));var ge=Ha(),Fe=ae(ge),ct=c(Fe);{var ye=fe=>{var ze=Mt();$(()=>m(ze,e(ce).id)),y(fe,ze)},U=fe=>{var ze=rt(),Ue=ae(ze);{var we=he=>{var Be=Mt();$(()=>m(Be,e(ce).code)),y(he,Be)},Ze=he=>{var Be=rt(),$e=ae(Be);{var Ye=je=>{var Pe=Mt();$(()=>m(Pe,e(ce).code)),y(je,Pe)},be=je=>{var Pe=rt(),xe=ae(Pe);{var Ie=et=>{var tt=Mt();$(()=>m(tt,e(ce).citation)),y(et,tt)},it=et=>{var tt=rt(),gt=ae(tt);{var te=me=>{var kt=Mt();$(()=>m(kt,e(ce).id)),y(me,kt)};L(gt,me=>{e(lt).type==="control"&&me(te)},!0)}y(et,tt)};L(xe,et=>{e(lt).type==="regulation"?et(Ie):et(it,!1)},!0)}y(je,Pe)};L($e,je=>{e(lt).type==="mitigation"?je(Ye):je(be,!1)},!0)}y(he,Be)};L(Ue,he=>{e(lt).type==="risk"?he(we):he(Ze,!1)},!0)}y(fe,ze)};L(ct,fe=>{e(lt).type==="question"?fe(ye):fe(U,!1)})}d(Fe);var k=u(Fe,2),ee=c(k);{var F=fe=>{var ze=Mt();$(()=>m(ze,e(ce).text)),y(fe,ze)},Z=fe=>{var ze=rt(),Ue=ae(ze);{var we=he=>{var Be=Mt();$(()=>m(Be,e(ce).shortName)),y(he,Be)},Ze=he=>{var Be=rt(),$e=ae(Be);{var Ye=je=>{var Pe=Mt();$(()=>m(Pe,e(ce).name)),y(je,Pe)},be=je=>{var Pe=rt(),xe=ae(Pe);{var Ie=et=>{var tt=Mt();$(()=>m(tt,e(ce).description)),y(et,tt)},it=et=>{var tt=rt(),gt=ae(tt);{var te=me=>{var kt=Mt();$(()=>m(kt,e(ce).name)),y(me,kt)};L(gt,me=>{e(lt).type==="control"&&me(te)},!0)}y(et,tt)};L(xe,et=>{e(lt).type==="regulation"?et(Ie):et(it,!1)},!0)}y(je,Pe)};L($e,je=>{e(lt).type==="mitigation"?je(Ye):je(be,!1)},!0)}y(he,Be)};L(Ue,he=>{e(lt).type==="risk"?he(we):he(Ze,!1)},!0)}y(fe,ze)};L(ee,fe=>{e(lt).type==="question"?fe(F):fe(Z,!1)})}d(k);var V=u(k,2);V.__click=()=>{e(lt)?.type==="question"?(E(xt,"questions"),Jt(e(ce))):e(lt)?.type==="risk"?(E(xt,"risks"),Jt(e(ce))):e(lt)?.type==="regulation"?(E(xt,"regulations"),Jt(e(ce))):e(lt)?.type==="control"&&(E(xt,"controls"),Jt(e(ce)))};var ne=c(V);d(V);var ke=u(V,2),oe=c(ke),J=c(oe);d(oe);var q=u(oe,2);{var K=fe=>{var ze=Qa();y(fe,ze)},Te=fe=>{var ze=Va();ot(ze,21,()=>e(X),at,(Ue,we)=>{const Ze=P(()=>e(we).from.entity===e(lt).type&&e(we).from.id===e(lt).id),he=P(()=>e(Ze)?e(we).to.entity:e(we).from.entity),Be=P(()=>e(Ze)?e(we).to.id:e(we).from.id);var $e=Ya();$e.__click=()=>{E(T,e(we),!0),E(_t,!0)};var Ye=c($e),be=c(Ye,!0);d(Ye);var je=u(Ye,2),Pe=c(je,!0);d(je);var xe=u(je,2),Ie=c(xe,!0);d(xe);var it=u(xe,2);{var et=tt=>{var gt=Ja(),te=c(gt,!0);d(gt),$(me=>m(te,me),[()=>e(we).phases.map(me=>me.replace("phase-","P")).join(", ")]),y(tt,gt)};L(it,tt=>{e(we).phases&&tt(et)})}d($e),$(tt=>{ut(Ye,1,`conn-type ${e(we).type??""}`,"svelte-1jef3w8"),m(be,e(we).type),m(Pe,e(Ze)?"":""),ut(xe,1,`conn-target ${e(he)??""}`,"svelte-1jef3w8"),m(Ie,tt)},[()=>Gi(e(he),e(Be))]),y(Ue,$e)}),d(ze),y(fe,ze)};L(q,fe=>{e(X).length===0?fe(K):fe(Te,!1)})}d(ke);var Xe=u(ke,2);Xe.__click=()=>_i(e(lt).type,e(lt).id,new Event("click")),$(()=>{m(ne,`Edit ${e(lt).type??""}`),m(J,`Connections (${e(X).length??""})`)}),y(Je,ge)},mt=Je=>{var X=Xa();y(Je,X)};L(Re,Je=>{e(ce)?Je(nt):Je(mt,!1)})}d(ue),$(()=>{ut(O,1,`badge ${e(lt).type??""}`,"svelte-1jef3w8"),m(H,e(lt).type)}),y(He,ue)};L(Qe,He=>{e(lt)&&He(Ve)})}y(Le,De)};L(dt,Le=>{e(Vi)?Le(vt,!1):Le(bt)},!0)}y(Oe,Ke)};L(Dt,Oe=>{e(Kt)?Oe(Tt,!1):Oe(Ct)})}d(St),d(z),Ht(Ne,()=>e(vi),Oe=>E(vi,Oe)),y(se,Y)},G=se=>{var Y=rt(),Se=ae(Y);{var N=z=>{var Ge=ql(),Ae=ae(Ge);{var Ne=U=>{var k=il(),ee=u(c(k)),F=c(ee,!0);d(ee);var Z=u(ee,2);Z.__click=()=>E(B,null),d(k),$(V=>m(F,V),[()=>Gi(e(B).type,e(B).id)]),y(U,k)},pt=U=>{var k=rt(),ee=ae(k);{var F=Z=>{var V=rl();y(Z,V)};L(ee,Z=>{e(x)||Z(F)},!0)}y(U,k)};L(Ae,U=>{e(B)?U(Ne):U(pt,!1)})}var ft=u(Ae,2),ht=c(ft);let $t;ht.__click=()=>E(A,!e(A));var Yt=c(ht,!0);d(ht);var wt=u(ht,2);Et(wt),d(ft);var St=u(ft,2),Dt=c(St),Ct=c(Dt),Tt=c(Ct),Oe=u(c(Tt),4),Ke=c(Oe,!0);d(Oe),d(Tt);var dt=u(Tt,2);ot(dt,21,()=>fi(e(jt),U=>U.text,"question"),at,(U,k)=>{const ee=P(()=>Mi("question",e(k).id)),F=P(()=>ps(e(k).id)),Z=P(()=>e(x)?.type==="question"&&e(x)?.id===e(k).id),V=P(()=>Pi("question",e(k).id)),ne=P(()=>$i("question",e(k).id)),ke=P(()=>e(A)&&e(x)&&!e(Z)&&!e(V));var oe=rt(),J=ae(oe);{var q=K=>{var Te=ll();let Xe;Te.__click=()=>ii("question",e(k).id),Te.__keydown=xe=>xe.key==="Enter"&&ii("question",e(k).id);var fe=c(Te),ze=c(fe),Ue=c(ze,!0);d(ze);var we=u(ze,2),Ze=c(we,!0);d(we),d(fe);var he=u(fe,2),Be=c(he,!0);d(he);var $e=u(he,2);{var Ye=xe=>{var Ie=ol(),it=c(Ie);{var et=te=>{var me=nl(),kt=c(me);d(me),$(Nt=>{Wt(me,"title",`Depends on: ${Nt??""}`),m(kt,` ${e(F).dependsOn.length??""}`)},[()=>e(F).dependsOn.join(", ")]),y(te,me)};L(it,te=>{e(F).dependsOn.length>0&&te(et)})}var tt=u(it,2);{var gt=te=>{var me=sl(),kt=c(me);d(me),$(Nt=>{Wt(me,"title",`Required by: ${Nt??""}`),m(kt,`${e(F).dependedBy.length??""} `)},[()=>e(F).dependedBy.join(", ")]),y(te,me)};L(tt,te=>{e(F).dependedBy.length>0&&te(gt)})}d(Ie),y(xe,Ie)};L($e,xe=>{(e(F).dependsOn.length>0||e(F).dependedBy.length>0)&&xe(Ye)})}var be=u($e,2);{var je=xe=>{var Ie=al(),it=c(Ie,!0);d(Ie),$(()=>m(it,e(ne).type)),y(xe,Ie)};L(be,xe=>{e(V)&&e(ne)&&xe(je)})}var Pe=u(be,2);Pe.__click=xe=>_i("question",e(k).id,xe),d(Te),$(()=>{Xe=ut(Te,1,"node question svelte-1jef3w8",null,Xe,{selected:e(Z),connected:e(V),"has-deps":e(F).dependsOn.length>0||e(F).dependedBy.length>0,connecting:e(B)?.type==="question"&&e(B)?.id===e(k).id}),m(Ue,e(k).id),m(Ze,e(ee)),m(Be,e(k).text)}),y(K,Te)};L(J,K=>{e(ke)||K(q)})}y(U,oe)}),d(dt),d(Ct);var bt=u(Ct,2),vt=c(bt),Le=u(c(vt),4),De=c(Le,!0);d(Le),d(vt);var We=u(vt,2);ot(We,21,()=>fi(e(Rt),U=>U.shortName+" "+U.name,"risk"),at,(U,k)=>{const ee=P(()=>Mi("risk",e(k).id)),F=P(()=>e(x)?.type==="risk"&&e(x)?.id===e(k).id),Z=P(()=>Pi("risk",e(k).id)),V=P(()=>$i("risk",e(k).id)),ne=P(()=>e(A)&&e(x)&&!e(F)&&!e(Z));var ke=rt(),oe=ae(ke);{var J=q=>{var K=cl();let Te;K.__click=()=>ii("risk",e(k).id),K.__keydown=be=>be.key==="Enter"&&ii("risk",e(k).id);var Xe=c(K),fe=c(Xe),ze=c(fe,!0);d(fe);var Ue=u(fe,2),we=c(Ue,!0);d(Ue),d(Xe);var Ze=u(Xe,2),he=c(Ze,!0);d(Ze);var Be=u(Ze,2);{var $e=be=>{var je=dl(),Pe=c(je,!0);d(je),$(()=>m(Pe,e(V).type)),y(be,je)};L(Be,be=>{e(Z)&&e(V)&&be($e)})}var Ye=u(Be,2);Ye.__click=be=>_i("risk",e(k).id,be),d(K),$(()=>{Te=ut(K,1,"node risk svelte-1jef3w8",null,Te,{selected:e(F),connected:e(Z),connecting:e(B)?.type==="risk"&&e(B)?.id===e(k).id}),m(ze,e(k).code),m(we,e(ee)),m(he,e(k).shortName)}),y(q,K)};L(oe,q=>{e(ne)||q(J)})}y(U,ke)}),d(We),d(bt);var Ce=u(bt,2),qe=c(Ce),Qe=u(c(qe),4),Ve=c(Qe,!0);d(Qe),d(qe);var He=u(qe,2);ot(He,21,()=>fi(e(ti),U=>U.name,"mitigation"),at,(U,k)=>{const ee=P(()=>Mi("mitigation",e(k).id)),F=P(()=>e(It).filter(K=>K.subcategoryId===e(k).id).length),Z=P(()=>e(x)?.type==="mitigation"&&e(x)?.id===e(k).id),V=P(()=>Pi("mitigation",e(k).id)),ne=P(()=>$i("mitigation",e(k).id)),ke=P(()=>e(A)&&e(x)&&!e(Z)&&!e(V));var oe=rt(),J=ae(oe);{var q=K=>{var Te=fl();let Xe;Te.__click=()=>ii("mitigation",e(k).id),Te.__keydown=Ie=>Ie.key==="Enter"&&ii("mitigation",e(k).id);var fe=c(Te),ze=c(fe),Ue=c(ze,!0);d(ze);var we=u(ze,2),Ze=c(we,!0);d(we),d(fe);var he=u(fe,2),Be=c(he,!0);d(he);var $e=u(he,2),Ye=c($e),be=c(Ye);d(Ye),d($e);var je=u($e,2);{var Pe=Ie=>{var it=ul(),et=c(it,!0);d(it),$(()=>m(et,e(ne).type)),y(Ie,it)};L(je,Ie=>{e(V)&&e(ne)&&Ie(Pe)})}var xe=u(je,2);xe.__click=Ie=>_i("mitigation",e(k).id,Ie),d(Te),$(()=>{Xe=ut(Te,1,"node mitigation svelte-1jef3w8",null,Xe,{selected:e(Z),connected:e(V),connecting:e(B)?.type==="mitigation"&&e(B)?.id===e(k).id}),m(Ue,e(k).code),m(Ze,e(ee)),m(Be,e(k).name),m(be,`${e(F)??""} controls`)}),y(K,Te)};L(J,K=>{e(ke)||K(q)})}y(U,oe)}),d(He),d(Ce);var ce=u(Ce,2),ue=c(ce),re=u(c(ue),4),O=c(re,!0);d(re),d(ue);var H=u(ue,2);ot(H,21,()=>fi(e(oi),U=>U.citation+" "+U.description,"regulation"),at,(U,k)=>{const ee=P(()=>Mi("regulation",e(k).id)),F=P(()=>e(x)?.type==="regulation"&&e(x)?.id===e(k).id),Z=P(()=>Pi("regulation",e(k).id)),V=P(()=>$i("regulation",e(k).id)),ne=P(()=>e(A)&&e(x)&&!e(F)&&!e(Z));var ke=rt(),oe=ae(ke);{var J=q=>{var K=vl();let Te;K.__click=()=>ii("regulation",e(k).id),K.__keydown=be=>be.key==="Enter"&&ii("regulation",e(k).id);var Xe=c(K),fe=c(Xe),ze=c(fe,!0);d(fe);var Ue=u(fe,2),we=c(Ue,!0);d(Ue),d(Xe);var Ze=u(Xe,2),he=c(Ze,!0);d(Ze);var Be=u(Ze,2);{var $e=be=>{var je=hl(),Pe=c(je,!0);d(je),$(()=>m(Pe,e(V).type)),y(be,je)};L(Be,be=>{e(Z)&&e(V)&&be($e)})}var Ye=u(Be,2);Ye.__click=be=>_i("regulation",e(k).id,be),d(K),$(()=>{Te=ut(K,1,"node regulation svelte-1jef3w8",null,Te,{selected:e(F),connected:e(Z),connecting:e(B)?.type==="regulation"&&e(B)?.id===e(k).id}),m(ze,e(k).citation),m(we,e(ee)),m(he,e(k).description)}),y(q,K)};L(oe,q=>{e(ne)||q(J)})}y(U,ke)}),d(H),d(ce);var ie=u(ce,2),Re=c(ie),nt=u(c(Re),4),mt=c(nt,!0);d(nt),d(Re);var Je=u(Re,2),X=c(Je);ot(X,17,()=>e(Ai).slice(0,50),at,(U,k)=>{const ee=P(()=>Mi("control",e(k).id)),F=P(()=>cs(e(k).id)),Z=P(()=>e(ee)+e(F)),V=P(()=>en(e(k).subcategoryId)),ne=P(()=>e(x)?.type==="control"&&e(x)?.id===e(k).id),ke=P(()=>Pi("control",e(k).id)),oe=P(()=>$i("control",e(k).id)),J=P(()=>e(A)&&e(x)&&!e(ne)&&!e(ke));var q=rt(),K=ae(q);{var Te=Xe=>{var fe=_l();let ze;fe.__click=()=>ii("control",e(k).id),fe.__keydown=te=>te.key==="Enter"&&ii("control",e(k).id);var Ue=c(fe),we=c(Ue),Ze=c(we,!0);d(we);var he=u(we,2),Be=c(he,!0);d(he),d(Ue);var $e=u(Ue,2),Ye=c($e,!0);d($e);var be=u($e,2),je=c(be),Pe=c(je,!0);d(je);var xe=u(je,2);{var Ie=te=>{var me=pl(),kt=c(me,!0);d(me),$(()=>m(kt,e(V).code)),y(te,me)};L(xe,te=>{e(V)&&te(Ie)})}d(be);var it=u(be,2);{var et=te=>{var me=gl(),kt=c(me,!0);d(me),$(()=>m(kt,e(oe).type)),y(te,me)},tt=te=>{var me=rt(),kt=ae(me);{var Nt=Vt=>{var ni=yl(),zt=c(ni);d(ni),$(()=>m(zt,`via ${(e(V)?.code||"category")??""}`)),y(Vt,ni)};L(kt,Vt=>{e(ke)&&Vt(Nt)},!0)}y(te,me)};L(it,te=>{e(ke)&&e(oe)?te(et):te(tt,!1)})}var gt=u(it,2);gt.__click=te=>_i("control",e(k).id,te),d(fe),$((te,me)=>{ze=ut(fe,1,"node control svelte-1jef3w8",null,ze,{selected:e(ne),connected:e(ke),connecting:e(B)?.type==="control"&&e(B)?.id===e(k).id}),m(Ze,te),Wt(he,"title",`Direct: ${e(ee)??""}, Via category: ${e(F)??""}`),m(Be,e(Z)),m(Ye,e(k).name),m(Pe,me)},[()=>e(k).id.split("_")[0],()=>e(k).phases?.map(te=>te.replace("phase-","P")).join(" ")]),y(Xe,fe)};L(K,Xe=>{e(J)||Xe(Te)})}y(U,q)});var ge=u(X,2);{var Fe=U=>{var k=wl(),ee=c(k);d(k),$(()=>m(ee,`...and ${e(Ai).length-50} more (use filters)`)),y(U,k)};L(ge,U=>{e(Ai).length>50&&U(Fe)})}d(Je),d(ie),d(Dt);var ct=u(Dt,2);{var ye=U=>{var k=Ul(),ee=c(k),F=c(ee),Z=c(F,!0);d(F);var V=u(F,2);V.__click=()=>E(x,null),d(ee);var ne=u(ee,2);{var ke=Ue=>{var we=bl(),Ze=ae(we),he=c(Ze,!0);d(Ze);var Be=u(Ze,2),$e=c(Be),Ye=c($e);d($e);var be=u($e,2),je=c(be);d(be);var Pe=u(be,2),xe=c(Pe);d(Pe),d(Be);var Ie=u(Be,2),it=u(c(Ie),2);ot(it,17,()=>e(pe).item.options,at,(tt,gt)=>{var te=ml(),me=c(te,!0);d(te),$(()=>m(me,e(gt).label)),y(tt,te)}),d(Ie);var et=u(Ie,2);et.__click=()=>{E(xt,"questions"),Jt(e(pe).item)},$(()=>{m(he,e(pe).item.text),m(Ye,`ID: ${e(pe).item.id??""}`),m(je,`Type: ${e(pe).item.type??""}`),m(xe,`Category: ${e(pe).item.category??""}`)}),y(Ue,we)},oe=Ue=>{var we=rt(),Ze=ae(we);{var he=$e=>{var Ye=jl(),be=ae(Ye),je=c(be,!0);d(be);var Pe=u(be,2),xe=c(Pe),Ie=c(xe);d(xe);var it=u(xe,2),et=c(it);d(it),d(Pe);var tt=u(Pe,2),gt=c(tt,!0);d(tt);var te=u(tt,2);te.__click=()=>{E(xt,"risks"),Jt(e(pe).item)},$(()=>{m(je,e(pe).item.name),m(Ie,`Code: ${e(pe).item.code??""}`),m(et,`Domain: ${e(pe).item.domain??""}`),m(gt,e(pe).item.shortName)}),y($e,Ye)},Be=$e=>{var Ye=rt(),be=ae(Ye);{var je=xe=>{const Ie=P(()=>e(It).filter(zt=>zt.subcategoryId===e(pe).item?.id));var it=Sl(),et=ae(it),tt=c(et,!0);d(et);var gt=u(et,2),te=c(gt),me=c(te);d(te);var kt=u(te,2),Nt=c(kt);d(kt),d(gt);var Vt=u(gt,2);{var ni=zt=>{var wi=El(),li=c(wi),Fi=c(li);d(li);var Zi=u(li,2),Bi=c(Zi);ot(Bi,17,()=>e(Ie).slice(0,10),at,(mi,si)=>{var bi=kl(),Wi=c(bi),br=c(Wi,!0);d(Wi);var Ni=u(Wi,2),tr=c(Ni,!0);d(Ni),d(bi),$(ji=>{m(br,e(si).name),m(tr,ji)},[()=>e(si).phases?.map(ji=>ji.replace("phase-","P")).join(", ")]),y(mi,bi)});var mr=u(Bi,2);{var er=mi=>{var si=xl(),bi=c(si);d(si),$(()=>m(bi,`...and ${e(Ie).length-10} more`)),y(mi,si)};L(mr,mi=>{e(Ie).length>10&&mi(er)})}d(Zi),d(wi),$(()=>m(Fi,`Controls (${e(Ie).length??""}):`)),y(zt,wi)};L(Vt,zt=>{e(Ie).length>0&&zt(ni)})}$(()=>{m(tt,e(pe).item.name),m(me,`Code: ${e(pe).item.code??""}`),m(Nt,`Category: ${e(pe).item.category??""}`)}),y(xe,it)},Pe=xe=>{var Ie=rt(),it=ae(Ie);{var et=gt=>{var te=Al(),me=ae(te),kt=c(me,!0);d(me);var Nt=u(me,2),Vt=c(Nt),ni=c(Vt,!0);d(Vt),d(Nt);var zt=u(Nt,2),wi=c(zt,!0);d(zt);var li=u(zt,2);li.__click=()=>{E(xt,"regulations"),Jt(e(pe).item)},$(()=>{m(kt,e(pe).item.citation),m(ni,e(pe).item.framework),m(wi,e(pe).item.description)}),y(gt,te)},tt=gt=>{var te=rt(),me=ae(te);{var kt=Nt=>{const Vt=P(()=>en(e(pe).item.subcategoryId));var ni=Cl(),zt=ae(ni),wi=c(zt,!0);d(zt);var li=u(zt,2),Fi=c(li),Zi=c(Fi);d(Fi);var Bi=u(Fi,2),mr=c(Bi);d(Bi),d(li);var er=u(li,2);{var mi=Ft=>{var Pt=$l(),Bt=c(Pt,!0);d(Pt),$(()=>m(Bt,e(pe).item.description)),y(Ft,Pt)};L(er,Ft=>{e(pe).item.description&&Ft(mi)})}var si=u(er,2),bi=u(c(si),2);{var Wi=Ft=>{var Pt=Gl(),Bt=c(Pt);d(Pt),$(()=>m(Bt,`${e(Vt).code??""}: ${e(Vt).name??""}`)),y(Ft,Pt)},br=Ft=>{var Pt=Nl(),Bt=c(Pt,!0);d(Pt),$(()=>m(Bt,e(pe).item.subcategoryId)),y(Ft,Pt)};L(bi,Ft=>{e(Vt)?Ft(Wi):Ft(br,!1)})}d(si);var Ni=u(si,2),tr=u(c(Ni),2);ot(tr,21,()=>e(pe).item.phases||[],at,(Ft,Pt)=>{var Bt=Ll(),jr=c(Bt,!0);d(Bt),$(Cs=>m(jr,Cs),[()=>e(Pt).replace("phase-","P")]),y(Ft,Bt)}),d(tr),d(Ni);var ji=u(Ni,2),pn=u(c(ji),2);ot(pn,21,()=>e(pe).item.techTypes||[],at,(Ft,Pt)=>{var Bt=Dl(),jr=c(Bt,!0);d(Bt),$(()=>m(jr,e(Pt))),y(Ft,Bt)}),d(pn),d(ji);var Ds=u(ji,2);Ds.__click=()=>{E(xt,"controls"),Jt(e(pe).item)},$(()=>{m(wi,e(pe).item.name),m(Zi,`ID: ${e(pe).item.id??""}`),m(mr,`Source: ${e(pe).item.source??""}`)}),y(Nt,ni)};L(me,Nt=>{e(pe).type==="control"&&e(pe).item&&Nt(kt)},!0)}y(gt,te)};L(it,gt=>{e(pe).type==="regulation"&&e(pe).item?gt(et):gt(tt,!1)},!0)}y(xe,Ie)};L(be,xe=>{e(pe).type==="mitigation"&&e(pe).item?xe(je):xe(Pe,!1)},!0)}y($e,Ye)};L(Ze,$e=>{e(pe).type==="risk"&&e(pe).item?$e(he):$e(Be,!1)},!0)}y(Ue,we)};L(ne,Ue=>{e(pe).type==="question"&&e(pe).item?Ue(ke):Ue(oe,!1)})}var J=u(ne,2),q=c(J),K=c(q);d(q);var Te=u(q,2);{var Xe=Ue=>{var we=Tl();y(Ue,we)},fe=Ue=>{var we=Ol();ot(we,21,()=>e(pe).connections,at,(Ze,he)=>{const Be=P(()=>e(he).from.entity===e(pe).type&&e(he).from.id===e(pe).item?.id),$e=P(()=>e(Be)?e(he).to.entity:e(he).from.entity),Ye=P(()=>e(Be)?e(he).to.id:e(he).from.id);var be=Il();be.__click=()=>{E(T,e(he),!0),E(_t,!0)};var je=c(be),Pe=c(je,!0);d(je);var xe=u(je,2),Ie=c(xe,!0);d(xe);var it=u(xe,2),et=c(it,!0);d(it);var tt=u(it,2);{var gt=te=>{var me=Rl(),kt=c(me,!0);d(me),$(Nt=>m(kt,Nt),[()=>e(he).phases.map(Nt=>Nt.replace("phase-","P")).join(", ")]),y(te,me)};L(tt,te=>{e(he).phases&&te(gt)})}d(be),$(te=>{ut(je,1,`conn-type ${e(he).type??""}`,"svelte-1jef3w8"),m(Pe,e(he).type),m(Ie,e(Be)?"":""),ut(it,1,`conn-target ${e($e)??""}`,"svelte-1jef3w8"),m(et,te)},[()=>Gi(e($e),e(Ye))]),y(Ze,be)}),d(we),y(Ue,we)};L(Te,Ue=>{e(pe).connections.length===0?Ue(Xe):Ue(fe,!1)})}d(J);var ze=u(J,2);ze.__click=()=>_i(e(pe).type,e(pe).item?.id||"",new Event("click")),d(k),$(()=>{ut(F,1,`detail-type ${e(pe).type??""}`,"svelte-1jef3w8"),m(Z,e(pe).type),m(K,`Connections (${e(pe).connections.length??""})`)}),y(U,k)};L(ct,U=>{e(pe)&&U(ye)})}d(St),$(()=>{$t=ut(ht,1,"btn focus-toggle svelte-1jef3w8",null,$t,{active:e(A)}),m(Yt,e(A)?"Focus: ON":"Focus"),Wt(Oe,"title",`${e(Wr)??""} of ${e(jt).length??""}`),m(Ke,e(Wr)),Wt(Le,"title",`${e(Kr)??""} of ${e(Rt).length??""}`),m(De,e(Kr)),Wt(Qe,"title",`${e(Qr)??""} of ${e(ti).length??""}`),m(Ve,e(Qr)),Wt(re,"title",`${e(Jr)??""} of ${e(oi).length??""}`),m(O,e(Jr)),Wt(nt,"title",`${e(Yr)??""} of ${e(Ai).length??""}`),m(mt,e(Yr))}),Gt(wt,()=>e(D),U=>E(D,U)),y(z,Ge)};L(Se,z=>{e(R)==="graph"&&z(N)},!0)}y(se,Y)};L(v,se=>{e(R)==="trace"?se(_):se(G,!1)},!0)}y(l,h)};L(Ss,l=>{e(R)==="matrix"?l(As):l($s,!1)})}d(vr);var vn=u(vr,2);{var Gs=l=>{var h=id(),v=c(h),_=c(v),G=c(_),se=c(G);d(G);var Y=u(G,2);Y.__click=()=>{E(Si,!1),E(M,null)},d(_);var Se=u(_,2),N=c(Se);{var z=wt=>{var St=Pl(),Dt=ae(St),Ct=u(c(Dt),2);Et(Ct),d(Dt);var Tt=u(Dt,2),Oe=u(c(Tt),2);Et(Oe),d(Tt);var Ke=u(Tt,2),dt=u(c(Ke),2);Et(dt),d(Ke);var bt=u(Ke,2),vt=u(c(bt),2);Et(vt),d(bt);var Le=u(bt,2),De=u(c(Le),4);{var We=Ce=>{var qe=zl(),Qe=ae(qe),Ve=u(c(Qe),2);ki(Ve),d(Qe);var He=u(Qe,2),ce=u(c(He),2);ki(ce),d(He);var ue=u(He,2),re=u(c(ue),2);ki(re),d(ue),Gt(Ve,()=>e(M).phaseGuidance["phase-1"],O=>e(M).phaseGuidance["phase-1"]=O),Gt(ce,()=>e(M).phaseGuidance["phase-2"],O=>e(M).phaseGuidance["phase-2"]=O),Gt(re,()=>e(M).phaseGuidance["phase-3"],O=>e(M).phaseGuidance["phase-3"]=O),y(Ce,qe)};L(De,Ce=>{e(M).phaseGuidance&&Ce(We)})}d(Le),Gt(Ct,()=>e(M).code,Ce=>e(M).code=Ce),Gt(Oe,()=>e(M).shortName,Ce=>e(M).shortName=Ce),Gt(dt,()=>e(M).name,Ce=>e(M).name=Ce),Gt(vt,()=>e(M).domain,Ce=>e(M).domain=Ce),y(wt,St)},Ge=wt=>{var St=rt(),Dt=ae(St);{var Ct=Oe=>{var Ke=Jl(),dt=ae(Ke),bt=u(c(dt),2);Et(bt),d(dt);var vt=u(dt,2),Le=u(c(vt),2);ki(Le),d(vt);var De=u(vt,2),We=u(c(De),2),Ce=c(We);Ce.value=Ce.__value="yes-no";var qe=u(Ce);qe.value=qe.__value="single-select";var Qe=u(qe);Qe.value=Qe.__value="multi-select",d(We),d(De);var Ve=u(De,2),He=u(c(Ve),2);Et(He),d(Ve);var ce=u(Ve,2),ue=u(c(ce),2);{var re=X=>{var ge=Ml();y(X,ge)},O=X=>{var ge=Bl();ot(ge,21,()=>Object.entries(e(M).showIf),at,(Fe,ct)=>{var ye=P(()=>_n(e(ct),2));let U=()=>e(ye)[0],k=()=>e(ye)[1];const ee=P(()=>e(jt).find(K=>K.id===U()));var F=Fl(),Z=c(F),V=c(Z,!0);d(Z);var ne=u(Z,4),ke=c(ne);{var oe=K=>{var Te=Mt();$(Xe=>m(Te,Xe),[()=>k().map(Xe=>e(ee)?.options?.find(ze=>ze.value===Xe)?.label||Xe).join(" OR ")]),y(K,Te)},J=K=>{const Te=P(()=>e(ee)?.options?.find(fe=>fe.value===k()));var Xe=Mt();$(()=>m(Xe,e(Te)?.label||k())),y(K,Xe)};L(ke,K=>{Array.isArray(k())?K(oe):K(J,!1)})}d(ne);var q=u(ne,2);q.__click=()=>{const K={...e(M).showIf};delete K[U()],e(M).showIf=Object.keys(K).length>0?K:void 0},d(F),$(()=>m(V,e(ee)?.text||U())),y(Fe,F)}),d(ge),y(X,ge)};L(ue,X=>{!e(M).showIf||Object.keys(e(M).showIf).length===0?X(re):X(O,!1)})}var H=u(ue,2),ie=c(H);ie.__change=()=>{E(Qt,[],!0)};var Re=c(ie);Re.value=Re.__value="";var nt=u(Re);ot(nt,17,()=>e(jt).filter(X=>X.id!==e(M).id),at,(X,ge)=>{var Fe=Wl(),ct=c(Fe,!0);d(Fe);var ye={};$(U=>{Fe.disabled=e(M).showIf?.[e(ge).id]!==void 0,m(ct,U),ye!==(ye=e(ge).id)&&(Fe.value=(Fe.__value=e(ge).id)??"")},[()=>e(ge).text.length>50?e(ge).text.slice(0,50)+"...":e(ge).text]),y(X,Fe)}),d(ie);var mt=u(ie,2);{var Je=X=>{const ge=P(()=>e(jt).find(U=>U.id===e(gi)));var Fe=rt(),ct=ae(Fe);{var ye=U=>{var k=Ql(),ee=ae(k),F=u(c(ee),2);ot(F,17,()=>e(ge).options,at,(V,ne)=>{var ke=Kl(),oe=c(ke);Et(oe),oe.__change=q=>{q.currentTarget.checked?E(Qt,[...e(Qt),e(ne).value],!0):E(Qt,e(Qt).filter(K=>K!==e(ne).value),!0)};var J=u(oe);d(ke),$(q=>{Li(oe,q),m(J,` ${e(ne).label??""}`)},[()=>e(Qt).includes(e(ne).value)]),y(V,ke)}),d(ee);var Z=u(ee,2);Z.__click=()=>{const V={...e(M).showIf};V[e(gi)]=e(Qt).length===1?e(Qt)[0]:[...e(Qt)],e(M).showIf=V,E(gi,""),E(Qt,[],!0)},$(()=>Z.disabled=e(Qt).length===0),y(U,k)};L(ct,U=>{e(ge)?.options&&U(ye)})}y(X,Fe)};L(mt,X=>{e(gi)&&X(Je)})}d(H),d(ce),Gt(bt,()=>e(M).id,X=>e(M).id=X),Gt(Le,()=>e(M).text,X=>e(M).text=X),Ht(We,()=>e(M).type,X=>e(M).type=X),Gt(He,()=>e(M).category,X=>e(M).category=X),Ht(ie,()=>e(gi),X=>E(gi,X)),y(Oe,Ke)},Tt=Oe=>{var Ke=rt(),dt=ae(Ke);{var bt=Le=>{var De=Yl(),We=ae(De),Ce=u(c(We),2);Et(Ce),d(We);var qe=u(We,2),Qe=u(c(qe),2);ki(Qe),d(qe);var Ve=u(qe,2),He=u(c(Ve),2);Et(He),d(Ve),Gt(Ce,()=>e(M).citation,ce=>e(M).citation=ce),Gt(Qe,()=>e(M).description,ce=>e(M).description=ce),Gt(He,()=>e(M).framework,ce=>e(M).framework=ce),y(Le,De)},vt=Le=>{var De=rt(),We=ae(De);{var Ce=qe=>{var Qe=Zl(),Ve=ae(Qe),He=u(c(Ve),2);Et(He),d(Ve);var ce=u(Ve,2),ue=u(c(ce),2);Et(ue),d(ce);var re=u(ce,2),O=u(c(re),2);ki(O),d(re);var H=u(re,2),ie=u(c(H),2);Et(ie),d(H);var Re=u(H,2),nt=u(c(Re),2),mt=c(nt);mt.value=mt.__value="";var Je=u(mt);ot(Je,17,()=>t.data.controlSubcategories,at,(F,Z)=>{var V=Vl(),ne=c(V);d(V);var ke={};$(()=>{m(ne,`${e(Z).code??""} ${e(Z).name??""}`),ke!==(ke=e(Z).id)&&(V.value=(V.__value=e(Z).id)??"")}),y(F,V)}),d(nt),d(Re);var X=u(Re,2),ge=u(c(X),2);ot(ge,21,()=>S,at,(F,Z)=>{var V=Hl(),ne=c(V);Et(ne),ne.__change=oe=>{oe.currentTarget.checked?e(M).phases=[...e(M).phases||[],e(Z).id]:e(M).phases=(e(M).phases||[]).filter(J=>J!==e(Z).id)};var ke=u(ne);d(V),$(oe=>{Li(ne,oe),m(ke,` ${e(Z).name??""}`)},[()=>e(M).phases?.includes(e(Z).id)]),y(F,V)}),d(ge),d(X);var Fe=u(X,2),ct=u(c(Fe),2),ye=c(ct),U=c(ye);Et(U),U.__change=F=>{F.currentTarget.checked?e(M).techTypes=["all"]:e(M).techTypes=[]},ir(),d(ye);var k=u(ye,2);{var ee=F=>{var Z=rt(),V=ae(Z);ot(V,17,()=>t.data.modelTypes,at,(ne,ke)=>{var oe=Xl(),J=c(oe);Et(J),J.__change=K=>{K.currentTarget.checked?e(M).techTypes=[...(e(M).techTypes||[]).filter(Te=>Te!=="all"),e(ke).id]:e(M).techTypes=(e(M).techTypes||[]).filter(Te=>Te!==e(ke).id)};var q=u(J);d(oe),$(K=>{Li(J,K),m(q,` ${e(ke).name??""}`)},[()=>e(M).techTypes?.includes(e(ke).id)]),y(ne,oe)}),y(F,Z)};L(k,F=>{e(M).techTypes?.includes("all")||F(ee)})}d(ct),d(Fe),$(F=>Li(U,F),[()=>e(M).techTypes?.includes("all")]),Gt(He,()=>e(M).id,F=>e(M).id=F),Gt(ue,()=>e(M).name,F=>e(M).name=F),Gt(O,()=>e(M).description,F=>e(M).description=F),Gt(ie,()=>e(M).source,F=>e(M).source=F),Ht(nt,()=>e(M).subcategoryId,F=>e(M).subcategoryId=F),y(qe,Qe)};L(We,qe=>{e(xt)==="controls"&&qe(Ce)},!0)}y(Le,De)};L(dt,Le=>{e(xt)==="regulations"?Le(bt):Le(vt,!1)},!0)}y(Oe,Ke)};L(Dt,Oe=>{e(xt)==="questions"?Oe(Ct):Oe(Tt,!1)},!0)}y(wt,St)};L(N,wt=>{e(xt)==="risks"?wt(z):wt(Ge,!1)})}d(Se);var Ae=u(Se,2),Ne=c(Ae);{var pt=wt=>{var St=ed();St.__click=ms,y(wt,St)},ft=wt=>{var St=td();y(wt,St)};L(Ne,wt=>{e(Hi)?wt(ft,!1):wt(pt)})}var ht=u(Ne,2),$t=c(ht);$t.__click=()=>{E(Si,!1),E(M,null)};var Yt=u($t,2);Yt.__click=ws,d(ht),d(Ae),d(v),d(h),$(wt=>m(se,`${e(Hi)?"New":"Edit"} ${wt??""}`),[()=>e(xt).slice(0,-1)]),y(l,h)};L(vn,l=>{e(Si)&&e(M)&&l(Gs)})}var Ns=u(vn,2);{var Ls=l=>{var h=hd(),v=c(h),_=c(v),G=c(_),se=c(G);d(G);var Y=u(G,2);Y.__click=()=>{E(_t,!1),E(T,null)},d(_);var Se=u(_,2),N=c(Se),z=c(N);z.__click=()=>{E(ei,"from"),E(pi,"")};var Ge=c(z);ir(),d(z);var Ae=u(z,4);Ae.__click=()=>{E(ei,"to"),E(pi,"")};var Ne=c(Ae);ir(),d(Ae),d(N);var pt=u(N,2);{var ft=re=>{var O=sd(),H=c(O),ie=c(H),Re=c(ie);d(ie);var nt=u(ie,2);nt.__click=()=>E(ei,null),d(H);var mt=u(H,2),Je=c(mt);Et(Je);var X=u(Je,2),ge=c(X);ge.value=ge.__value="name";var Fe=u(ge);Fe.value=Fe.__value="code";var ct=u(Fe);ct.value=ct.__value="category",d(X),d(mt);var ye=u(mt,2);ot(ye,21,()=>e(ys),at,(U,k)=>{var ee=rd();let F;ee.__click=()=>_s(e(k));var Z=c(ee),V=c(Z,!0);d(Z);var ne=u(Z,2),ke=c(ne,!0);d(ne);var oe=u(ne,2),J=c(oe,!0);d(oe),d(ee),$(()=>{F=ut(ee,1,"entity-option svelte-1jef3w8",null,F,{selected:e(T)[e(ei)]?.id===e(k).id}),ut(Z,1,`entity-code ${e(k).type??""}`,"svelte-1jef3w8"),m(V,e(k).code),m(ke,e(k).name),m(J,e(k).category)}),y(U,ee)},U=>{var k=nd();y(U,k)}),d(ye),d(O),$(()=>m(Re,`Select ${e(ei)==="from"?"source":"target"}:`)),Gt(Je,()=>e(pi),U=>E(pi,U)),Ht(X,()=>e(Ui),U=>E(Ui,U)),y(re,O)};L(pt,re=>{e(ei)&&re(ft)})}var ht=u(pt,2),$t=u(c(ht),2);$t.__change=()=>{e(T).type==="trigger"?(e(T).from={entity:"question",id:e(jt)[0]?.id||""},e(T).to={entity:"risk",id:e(Rt)[0]?.id||""}):e(T).type==="dependency"?(e(T).from={entity:"question",id:e(jt)[0]?.id||""},e(T).to={entity:"question",id:e(jt)[1]?.id||e(jt)[0]?.id||""}):e(T).type==="mitigation"?(e(T).from={entity:"risk",id:e(Rt)[0]?.id||""},e(T).to={entity:"mitigation",id:e(ti)[0]?.id||""}):e(T).type==="regulation"?(e(T).from={entity:"risk",id:e(Rt)[0]?.id||""},e(T).to={entity:"regulation",id:e(oi)[0]?.id||""}):e(T).type==="control"?(e(T).from={entity:"risk",id:e(Rt)[0]?.id||""},e(T).to={entity:"control",id:e(It)[0]?.id||""}):e(T).type==="implementation"&&(e(T).from={entity:"mitigation",id:e(ti)[0]?.id||""},e(T).to={entity:"control",id:e(It)[0]?.id||""})};var Yt=c($t);Yt.value=Yt.__value="trigger";var wt=u(Yt);wt.value=wt.__value="dependency";var St=u(wt);St.value=St.__value="mitigation";var Dt=u(St);Dt.value=Dt.__value="regulation";var Ct=u(Dt);Ct.value=Ct.__value="control";var Tt=u(Ct);Tt.value=Tt.__value="implementation";var Oe=u(Tt);Oe.value=Oe.__value="custom",d($t),d(ht);var Ke=u(ht,2),dt=u(c(Ke),2);ot(dt,21,()=>S,at,(re,O)=>{var H=od(),ie=c(H);Et(ie),ie.__change=nt=>{nt.currentTarget.checked?e(T).phases=[...e(T).phases||[],e(O).id]:e(T).phases=(e(T).phases||[]).filter(mt=>mt!==e(O).id)};var Re=u(ie);d(H),$(nt=>{Li(ie,nt),m(Re,` ${e(O).name??""}`)},[()=>e(T).phases?.includes(e(O).id)||!1]),y(re,H)}),d(dt),d(Ke);var bt=u(Ke,2);{var vt=re=>{const O=P(()=>Xi(e(T).from.id));var H=rt(),ie=ae(H);{var Re=nt=>{var mt=ld(),Je=ae(mt),X=u(c(Je),2);ot(X,21,()=>e(O).options,at,(U,k)=>{var ee=ad(),F=c(ee);Et(F),F.__change=V=>{V.currentTarget.checked?e(T).answerValues=[...e(T).answerValues||[],e(k).value]:e(T).answerValues=(e(T).answerValues||[]).filter(ne=>ne!==e(k).value)};var Z=u(F);d(ee),$(V=>{Li(F,V),m(Z,` ${e(k).label??""}`)},[()=>e(T).answerValues?.includes(e(k).value)||!1]),y(U,ee)}),d(X),d(Je);var ge=u(Je,2),Fe=u(c(ge),2),ct=c(Fe);ct.value=ct.__value="OR";var ye=u(ct);ye.value=ye.__value="AND",d(Fe),d(ge),Ht(Fe,()=>e(T).logic,U=>e(T).logic=U),y(nt,mt)};L(ie,nt=>{e(O)&&nt(Re)})}y(re,H)};L(bt,re=>{e(T).type==="trigger"&&e(T).from.entity==="question"&&re(vt)})}var Le=u(bt,2);{var De=re=>{var O=cd(),H=u(c(O),2);ot(H,17,()=>S,at,(ie,Re)=>{var nt=rt(),mt=ae(nt);{var Je=X=>{var ge=dd(),Fe=c(ge),ct=c(Fe,!0);d(Fe);var ye=u(Fe,2);ki(ye),ye.__input=U=>{e(T).guidance||(e(T).guidance={}),e(T).guidance[e(Re).id]=U.currentTarget.value},d(ge),$(()=>{m(ct,e(Re).short),Wt(ye,"placeholder",`Guidance for ${e(Re).name??""}...`),Os(ye,e(T).guidance?.[e(Re).id]||"")}),y(X,ge)};L(mt,X=>{e(T).phases?.includes(e(Re).id)&&X(Je)})}y(ie,nt)}),d(O),y(re,O)};L(Le,re=>{e(T).type==="mitigation"&&re(De)})}var We=u(Le,2);{var Ce=re=>{var O=ud(),H=u(c(O),2);Et(H),d(O),Gt(H,()=>e(T).note,ie=>e(T).note=ie),y(re,O)};L(We,re=>{e(T).type==="regulation"&&re(Ce)})}d(Se);var qe=u(Se,2),Qe=c(qe);{var Ve=re=>{var O=fd();O.__click=hs,y(re,O)};L(Qe,re=>{e(a).some(O=>O.id===e(T).id)&&re(Ve)})}var He=u(Qe,2),ce=c(He);ce.__click=()=>{E(_t,!1),E(T,null)};var ue=u(ce,2);ue.__click=fs,d(He),d(qe),d(v),d(h),$((re,O,H)=>{m(se,`${re??""} Link`),ut(z,1,`link-node-btn ${e(T).from.entity??""}`,"svelte-1jef3w8"),m(Ge,`${O??""} `),ut(Ae,1,`link-node-btn ${e(T).to.entity??""}`,"svelte-1jef3w8"),m(Ne,`${H??""} `)},[()=>e(a).some(re=>re.id===e(T).id)?"Edit":"New",()=>Gi(e(T).from.entity,e(T).from.id),()=>Gi(e(T).to.entity,e(T).to.id)]),Ht($t,()=>e(T).type,re=>e(T).type=re),y(l,h)};L(Ns,l=>{e(_t)&&e(T)&&l(Ls)})}$(()=>{sn=ut(yr,1,"svelte-1jef3w8",null,sn,{active:e(R)==="matrix"}),on=ut(_r,1,"svelte-1jef3w8",null,on,{active:e(R)==="trace"}),ln=ut(an,1,"svelte-1jef3w8",null,ln,{active:e(R)==="graph"})}),y(s,rn),Un()}qn(["click","change","keydown","input"]);export{$d as component,Ad as universal};
