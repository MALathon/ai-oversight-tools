import{f as n,a as c,c as Fe}from"../chunks/B1gL-7lK.js";import{o as Ne}from"../chunks/DOE8iBRm.js";import{a3 as ze,a4 as h,a5 as w,o as Be,s as v,Y as l,Z as X,a6 as Ee,a as Le,$ as Oe,g as e,a0 as r,a1 as a,_ as g,a7 as ee}from"../chunks/B2ozAt4z.js";import{d as Ye,s as _}from"../chunks/cWCuwL6a.js";import{i as se}from"../chunks/Ihk7Vvt8.js";import{e as R,i as $,s as fe}from"../chunks/D8ej239B.js";import{h as Ze}from"../chunks/CvM5vjvj.js";import{r as qe,a as Ge}from"../chunks/Bw5DiEUF.js";import{s as He}from"../chunks/itcv0iKE.js";import{b as Je}from"../chunks/QgxjcirX.js";import{b as I}from"../chunks/CVSg-jCF.js";var Ke=n('<div class="loading svelte-1b55icw">Loading checklist data...</div>'),Qe=n("<option> </option>"),Ue=n("<button> </button>"),Ve=n('<span class="cfr-badge svelte-1b55icw"> </span>'),We=n('<div class="cfr-refs svelte-1b55icw"></div>'),Xe=n('<span class="phase-tag svelte-1b55icw"> </span>'),es=n('<label><input type="checkbox" class="svelte-1b55icw"/> <span class="prompt-text svelte-1b55icw"> </span> <span class="phase-tags svelte-1b55icw"></span></label>'),ss=n('<div class="subdomain-section svelte-1b55icw"><div class="subdomain-header svelte-1b55icw"><div class="subdomain-title svelte-1b55icw"><span class="code svelte-1b55icw"> </span> <h2 class="svelte-1b55icw"> </h2></div> <!></div> <div class="prompts svelte-1b55icw"></div></div>'),ts=n('<div class="filters svelte-1b55icw"><div class="filter-group svelte-1b55icw"><label for="phase-select" class="svelte-1b55icw">Development Phase</label> <select id="phase-select" class="svelte-1b55icw"><option>All Phases</option><!></select></div> <div class="filter-group svelte-1b55icw"><label class="svelte-1b55icw">AI Model Type(s)</label> <div class="model-chips svelte-1b55icw"></div></div></div>  <div class="progress-bar svelte-1b55icw"><div class="progress-text svelte-1b55icw"><span> </span> <span> </span></div> <div class="progress-track svelte-1b55icw"><div class="progress-fill svelte-1b55icw"></div></div></div> <div class="checklist svelte-1b55icw"></div>',1),as=n('<div class="page-header svelte-1b55icw"><h1 class="svelte-1b55icw">IRB Reviewer Checklist</h1> <p class="svelte-1b55icw">Select the development phase and AI model type(s) to see applicable review prompts</p></div> <!>',1);function _s(ue,be){ze(be,!0);let te=h(w([])),ae=h(w([])),z=h(w([])),re=h(w({})),ie=h(w({})),M=h(""),f=h(w([])),k=h(w(new Set)),oe=h(!0);Ne(async()=>{try{const[t,s,d,p,S]=await Promise.all([fetch(`${I}/data/phases.json`),fetch(`${I}/data/model-types.json`),fetch(`${I}/data/risk-subdomains.json`),fetch(`${I}/data/reviewer-prompts.json`),fetch(`${I}/data/unified-schema.json`)]),j=await t.json(),P=await s.json(),B=await d.json(),A=await p.json(),C=await S.json();v(te,j.phases,!0),v(ae,P.modelTypes,!0),v(z,B.riskSubdomains,!0),v(re,A.reviewerPrompts,!0),v(ie,C.modelTypeToSubdomainRelevance||{},!0)}catch(t){console.error("Failed to load data:",t)}finally{v(oe,!1)}});function we(t){e(f).includes(t)?v(f,e(f).filter(s=>s!==t),!0):v(f,[...e(f),t],!0)}function le(){if(e(f).length===0)return e(z);const t=new Set;for(const s of e(f))(e(ie)[s]||[]).forEach(p=>t.add(p));return e(z).filter(s=>t.has(s.id))}function ce(t){const s=e(re)[t];return s?e(M)?s.prompts.filter(d=>d.phases.includes(e(M))):s.prompts:[]}function ge(t){const s=new Set(e(k));s.has(t)?s.delete(t):s.add(t),v(k,s,!0)}function ke(){let t=0;const s=le();for(const d of s){const p=ce(d.id);t+=p.length}return{checked:e(k).size,total:t}}Be(()=>{v(k,new Set,!0)});var ve=as();Ze("1b55icw",t=>{Le(()=>{Oe.title="Reviewer Checklist - AI Oversight Tools"})});var xe=l(X(ve),2);{var ye=t=>{var s=Ke();c(t,s)},Re=t=>{const s=ee(ke);var d=ts(),p=X(d),S=r(p),j=l(r(S),2),P=r(j);P.value=P.__value="";var B=l(P);R(B,17,()=>e(te),$,(m,i)=>{var o=Qe(),b=r(o,!0);a(o);var x={};g(()=>{_(b,e(i).shortName),x!==(x=e(i).id)&&(o.value=(o.__value=e(i).id)??"")}),c(m,o)}),a(j),a(S);var A=l(S,2),C=l(r(A),2);R(C,21,()=>e(ae).slice(0,8),$,(m,i)=>{var o=Ue();let b;o.__click=()=>we(e(i).id);var x=r(o,!0);a(o),g(Y=>{b=fe(o,1,"chip svelte-1b55icw",null,b,Y),_(x,e(i).name)},[()=>({selected:e(f).includes(e(i).id)})]),c(m,o)}),a(C),a(A),a(p);var E=l(p,2),L=r(E),O=r(L),$e=r(O);a(O);var ne=l(O,2),Se=r(ne);a(ne),a(L);var de=l(L,2),je=r(de);a(de),a(E);var pe=l(E,2);R(pe,21,le,$,(m,i)=>{const o=ee(()=>ce(e(i).id));var b=Fe(),x=X(b);{var Y=Z=>{var q=ss(),G=r(q),H=r(G),J=r(H),Pe=r(J,!0);a(J);var me=l(J,2),Te=r(me,!0);a(me),a(H);var De=l(H,2);{var Ie=T=>{var y=We();R(y,21,()=>e(i).cfrReferences.slice(0,2),$,(K,D)=>{var u=Ve(),F=r(u,!0);a(u),g(()=>_(F,e(D))),c(K,u)}),a(y),c(T,y)};se(De,T=>{e(i).cfrReferences.length>0&&T(Ie)})}a(G);var he=l(G,2);R(he,21,()=>e(o),$,(T,y,K)=>{const D=ee(()=>`${e(i).id}-${K}`);var u=es();let F;var N=r(u);qe(N),N.__change=()=>ge(e(D));var Q=l(N,2),Me=r(Q,!0);a(Q);var _e=l(Q,2);R(_e,21,()=>e(y).phases,$,(U,V)=>{var W=Xe(),Ae=r(W,!0);a(W),g(Ce=>_(Ae,Ce),[()=>e(V).replace("phase-","P")]),c(U,W)}),a(_e),a(u),g((U,V)=>{F=fe(u,1,"prompt-item svelte-1b55icw",null,F,U),Ge(N,V),_(Me,e(y).text)},[()=>({checked:e(k).has(e(D))}),()=>e(k).has(e(D))]),c(T,u)}),a(he),a(q),g(()=>{_(Pe,e(i).code),_(Te,e(i).shortName)}),c(Z,q)};se(x,Z=>{e(o).length>0&&Z(Y)})}c(m,b)}),a(pe),g(m=>{_($e,`Progress: ${e(s).checked??""} / ${e(s).total??""} items reviewed`),_(Se,`${m??""}%`),He(je,`width: ${e(s).total>0?e(s).checked/e(s).total*100:0}%`)},[()=>e(s).total>0?Math.round(e(s).checked/e(s).total*100):0]),Je(j,()=>e(M),m=>v(M,m)),c(t,d)};se(xe,t=>{e(oe)?t(ye):t(Re,!1)})}c(ue,ve),Ee()}Ye(["click","change"]);export{_s as component};
