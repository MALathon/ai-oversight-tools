import{b as hi}from"../chunks/gJoWLP5d.js";import{f as E,a as y,c as He,t as Mt}from"../chunks/B1gL-7lK.js";import{a3 as Rn,a0 as c,Y as u,_ as N,a6 as In,a1 as d,g as e,a4 as Ze,a5 as tr,o as vn,s as A,Z as oe,a as Ds,a7 as M,$ as Cs,a2 as ir,a8 as ki,n as pn,b0 as gn}from"../chunks/B2ozAt4z.js";import{d as On,s as k,e as rr}from"../chunks/cWCuwL6a.js";import{i as I}from"../chunks/Ihk7Vvt8.js";import{e as et,i as tt,s as at}from"../chunks/D8ej239B.js";import{h as Ts}from"../chunks/CvM5vjvj.js";import{r as bt,a as Ni,s as Wt,b as Rs}from"../chunks/Bw5DiEUF.js";import{s as Is}from"../chunks/itcv0iKE.js";import{a as yn,b as Et}from"../chunks/Dw1h4QgV.js";import{i as Os,s as Us,b as Vt}from"../chunks/QgxjcirX.js";import{b as zs}from"../chunks/DBz3EcEZ.js";const qs=async({fetch:s})=>{const[t,i,r,n,a,o,f,v]=await Promise.all([s(`${hi}/data/assessment-questions.json`),s(`${hi}/data/traceability.json`),s(`${hi}/data/risk-subdomains.json`),s(`${hi}/data/risk-domains.json`),s(`${hi}/data/mitigation-strategies.json`),s(`${hi}/data/cfr-regulations.json`),s(`${hi}/data/technical-controls.json`),s(`${hi}/data/model-types.json`)]),g=await t.json(),_=await i.json(),b=await r.json(),x=await n.json(),T=await a.json(),re=await o.json(),se=await f.json(),j=await v.json();return{questionCategories:g.questionCategories,traceability:_,subdomains:b.riskSubdomains,domains:x.riskDomains,mitigationCategories:T.mitigationCategories,regulations:re.regulations,controlCategories:se.controlCategories,controlSubcategories:se.controlSubcategories,controls:se.controls,modelTypes:j.modelTypes}},yd=Object.freeze(Object.defineProperty({__proto__:null,load:qs},Symbol.toStringTag,{value:"Module"}));var Ps=E("<button> </button>"),Ms=E("<option> </option>"),Fs=E('<div class="global-filters svelte-9jwgxy"><div class="filter-group svelte-9jwgxy"><span class="filter-label svelte-9jwgxy">Phase:</span> <div class="phase-filter svelte-9jwgxy"><button>All</button> <!></div></div> <div class="filter-group svelte-9jwgxy"><span class="filter-label svelte-9jwgxy">Tech:</span> <select class="tech-filter svelte-9jwgxy"><option>All Types</option><!></select></div></div>');function Bs(s,t){Rn(t,!0);var i=Fs(),r=c(i),n=u(c(r),2),a=c(n);a.__click=()=>t.onPhaseChange("all");let o;var f=u(a,2);et(f,17,()=>t.phases,tt,(T,re)=>{var se=Ps();se.__click=()=>t.onPhaseChange(e(re).id);let j;var B=c(se,!0);d(se),N(()=>{j=at(se,1,"svelte-9jwgxy",null,j,{active:t.selectedPhase===e(re).id}),k(B,e(re).short)}),y(T,se)}),d(n),d(r);var v=u(r,2),g=u(c(v),2);g.__change=T=>t.onTechTypeChange(T.target.value);var _=c(g);_.value=_.__value="all";var b=u(_);et(b,17,()=>t.modelTypes,tt,(T,re)=>{var se=Ms(),j=c(se,!0);d(se);var B={};N(()=>{k(j,e(re).name),B!==(B=e(re).id)&&(se.value=(se.__value=e(re).id)??"")}),y(T,se)}),d(g);var x;Os(g),d(v),d(i),N(()=>{o=at(a,1,"svelte-9jwgxy",null,o,{active:t.selectedPhase==="all"}),x!==(x=t.selectedTechType)&&(g.value=(g.__value=t.selectedTechType)??"",Us(g,t.selectedTechType))}),y(s,i),In()}On(["click","change"]);var nr={exports:{}},_n;function Ws(){if(_n)return nr.exports;_n=1;var s=typeof Reflect=="object"?Reflect:null,t=s&&typeof s.apply=="function"?s.apply:function($,U,K){return Function.prototype.apply.call($,U,K)},i;s&&typeof s.ownKeys=="function"?i=s.ownKeys:Object.getOwnPropertySymbols?i=function($){return Object.getOwnPropertyNames($).concat(Object.getOwnPropertySymbols($))}:i=function($){return Object.getOwnPropertyNames($)};function r(D){console&&console.warn&&console.warn(D)}var n=Number.isNaN||function($){return $!==$};function a(){a.init.call(this)}nr.exports=a,nr.exports.once=B,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function f(D){if(typeof D!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof D)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(D){if(typeof D!="number"||D<0||n(D))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+D+".");o=D}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function($){if(typeof $!="number"||$<0||n($))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+$+".");return this._maxListeners=$,this};function v(D){return D._maxListeners===void 0?a.defaultMaxListeners:D._maxListeners}a.prototype.getMaxListeners=function(){return v(this)},a.prototype.emit=function($){for(var U=[],K=1;K<arguments.length;K++)U.push(arguments[K]);var le=$==="error",De=this._events;if(De!==void 0)le=le&&De.error===void 0;else if(!le)return!1;if(le){var ge;if(U.length>0&&(ge=U[0]),ge instanceof Error)throw ge;var Ot=new Error("Unhandled error."+(ge?" ("+ge.message+")":""));throw Ot.context=ge,Ot}var ci=De[$];if(ci===void 0)return!1;if(typeof ci=="function")t(ci,this,U);else for(var Ji=ci.length,Ut=re(ci,Ji),K=0;K<Ji;++K)t(Ut[K],this,U);return!0};function g(D,$,U,K){var le,De,ge;if(f(U),De=D._events,De===void 0?(De=D._events=Object.create(null),D._eventsCount=0):(De.newListener!==void 0&&(D.emit("newListener",$,U.listener?U.listener:U),De=D._events),ge=De[$]),ge===void 0)ge=De[$]=U,++D._eventsCount;else if(typeof ge=="function"?ge=De[$]=K?[U,ge]:[ge,U]:K?ge.unshift(U):ge.push(U),le=v(D),le>0&&ge.length>le&&!ge.warned){ge.warned=!0;var Ot=new Error("Possible EventEmitter memory leak detected. "+ge.length+" "+String($)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ot.name="MaxListenersExceededWarning",Ot.emitter=D,Ot.type=$,Ot.count=ge.length,r(Ot)}return D}a.prototype.addListener=function($,U){return g(this,$,U,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function($,U){return g(this,$,U,!0)};function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(D,$,U){var K={fired:!1,wrapFn:void 0,target:D,type:$,listener:U},le=_.bind(K);return le.listener=U,K.wrapFn=le,le}a.prototype.once=function($,U){return f(U),this.on($,b(this,$,U)),this},a.prototype.prependOnceListener=function($,U){return f(U),this.prependListener($,b(this,$,U)),this},a.prototype.removeListener=function($,U){var K,le,De,ge,Ot;if(f(U),le=this._events,le===void 0)return this;if(K=le[$],K===void 0)return this;if(K===U||K.listener===U)--this._eventsCount===0?this._events=Object.create(null):(delete le[$],le.removeListener&&this.emit("removeListener",$,K.listener||U));else if(typeof K!="function"){for(De=-1,ge=K.length-1;ge>=0;ge--)if(K[ge]===U||K[ge].listener===U){Ot=K[ge].listener,De=ge;break}if(De<0)return this;De===0?K.shift():se(K,De),K.length===1&&(le[$]=K[0]),le.removeListener!==void 0&&this.emit("removeListener",$,Ot||U)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function($){var U,K,le;if(K=this._events,K===void 0)return this;if(K.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):K[$]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete K[$]),this;if(arguments.length===0){var De=Object.keys(K),ge;for(le=0;le<De.length;++le)ge=De[le],ge!=="removeListener"&&this.removeAllListeners(ge);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(U=K[$],typeof U=="function")this.removeListener($,U);else if(U!==void 0)for(le=U.length-1;le>=0;le--)this.removeListener($,U[le]);return this};function x(D,$,U){var K=D._events;if(K===void 0)return[];var le=K[$];return le===void 0?[]:typeof le=="function"?U?[le.listener||le]:[le]:U?j(le):re(le,le.length)}a.prototype.listeners=function($){return x(this,$,!0)},a.prototype.rawListeners=function($){return x(this,$,!1)},a.listenerCount=function(D,$){return typeof D.listenerCount=="function"?D.listenerCount($):T.call(D,$)},a.prototype.listenerCount=T;function T(D){var $=this._events;if($!==void 0){var U=$[D];if(typeof U=="function")return 1;if(U!==void 0)return U.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function re(D,$){for(var U=new Array($),K=0;K<$;++K)U[K]=D[K];return U}function se(D,$){for(;$+1<D.length;$++)D[$]=D[$+1];D.pop()}function j(D){for(var $=new Array(D.length),U=0;U<$.length;++U)$[U]=D[U].listener||D[U];return $}function B(D,$){return new Promise(function(U,K){function le(ge){D.removeListener($,De),K(ge)}function De(){typeof D.removeListener=="function"&&D.removeListener("error",le),U([].slice.call(arguments))}R(D,$,De,{once:!0}),$!=="error"&&gt(D,le,{once:!0})})}function gt(D,$,U){typeof D.on=="function"&&R(D,"error",$,U)}function R(D,$,U,K){if(typeof D.on=="function")K.once?D.once($,U):D.on($,U);else if(typeof D.addEventListener=="function")D.addEventListener($,function le(De){K.once&&D.removeEventListener($,le),U(De)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof D)}return nr.exports}var Ks=Ws();function Js(){const s=arguments[0];for(let t=1,i=arguments.length;t<i;t++)if(arguments[t])for(const r in arguments[t])s[r]=arguments[t][r];return s}let Lt=Js;typeof Object.assign=="function"&&(Lt=Object.assign);function Xt(s,t,i,r){const n=s._nodes.get(t);let a=null;return n&&(r==="mixed"?a=n.out&&n.out[i]||n.undirected&&n.undirected[i]:r==="directed"?a=n.out&&n.out[i]:a=n.undirected&&n.undirected[i]),a}function It(s){return typeof s=="object"&&s!==null}function Un(s){let t;for(t in s)return!1;return!0}function Ht(s,t,i){Object.defineProperty(s,t,{enumerable:!1,configurable:!1,writable:!0,value:i})}function ti(s,t,i){const r={enumerable:!0,configurable:!0};typeof i=="function"?r.get=i:(r.value=i,r.writable=!1),Object.defineProperty(s,t,r)}function wn(s){return!(!It(s)||s.attributes&&!Array.isArray(s.attributes))}function Qs(){let s=Math.floor(Math.random()*256)&255;return()=>s++}function li(){const s=arguments;let t=null,i=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(t===null){if(i++,i>=s.length)return{done:!0};t=s[i][Symbol.iterator]()}if(r=t.next(),r.done){t=null;continue}break}while(!0);return r}}}function Ti(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class Dr extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class F extends Dr{constructor(t){super(t),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,F.prototype.constructor)}}class O extends Dr{constructor(t){super(t),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,O.prototype.constructor)}}class ie extends Dr{constructor(t){super(t),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ie.prototype.constructor)}}function zn(s,t){this.key=s,this.attributes=t,this.clear()}zn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function qn(s,t){this.key=s,this.attributes=t,this.clear()}qn.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function Pn(s,t){this.key=s,this.attributes=t,this.clear()}Pn.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Ri(s,t,i,r,n){this.key=t,this.attributes=n,this.undirected=s,this.source=i,this.target=r}Ri.prototype.attach=function(){let s="out",t="in";this.undirected&&(s=t="undirected");const i=this.source.key,r=this.target.key;this.source[s][r]=this,!(this.undirected&&i===r)&&(this.target[t][i]=this)};Ri.prototype.attachMulti=function(){let s="out",t="in";const i=this.source.key,r=this.target.key;this.undirected&&(s=t="undirected");const n=this.source[s],a=n[r];if(typeof a>"u"){n[r]=this,this.undirected&&i===r||(this.target[t][i]=this);return}a.previous=this,this.next=a,n[r]=this,this.target[t][i]=this};Ri.prototype.detach=function(){const s=this.source.key,t=this.target.key;let i="out",r="in";this.undirected&&(i=r="undirected"),delete this.source[i][t],delete this.target[r][s]};Ri.prototype.detachMulti=function(){const s=this.source.key,t=this.target.key;let i="out",r="in";this.undirected&&(i=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[i][t],delete this.target[r][s]):(this.next.previous=void 0,this.source[i][t]=this.next,this.target[r][s]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const Mn=0,Fn=1,Ys=2,Bn=3;function di(s,t,i,r,n,a,o){let f,v,g,_;if(r=""+r,i===Mn){if(f=s._nodes.get(r),!f)throw new O(`Graph.${t}: could not find the "${r}" node in the graph.`);g=n,_=a}else if(i===Bn){if(n=""+n,v=s._edges.get(n),!v)throw new O(`Graph.${t}: could not find the "${n}" edge in the graph.`);const b=v.source.key,x=v.target.key;if(r===b)f=v.target;else if(r===x)f=v.source;else throw new O(`Graph.${t}: the "${r}" node is not attached to the "${n}" edge (${b}, ${x}).`);g=a,_=o}else{if(v=s._edges.get(r),!v)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`);i===Fn?f=v.source:f=v.target,g=n,_=a}return[f,g,_]}function Vs(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=di(this,t,i,r,n,a);return o.attributes[f]}}function Hs(s,t,i){s.prototype[t]=function(r,n){const[a]=di(this,t,i,r,n);return a.attributes}}function Xs(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=di(this,t,i,r,n,a);return o.attributes.hasOwnProperty(f)}}function Zs(s,t,i){s.prototype[t]=function(r,n,a,o){const[f,v,g]=di(this,t,i,r,n,a,o);return f.attributes[v]=g,this.emit("nodeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:v}),this}}function ea(s,t,i){s.prototype[t]=function(r,n,a,o){const[f,v,g]=di(this,t,i,r,n,a,o);if(typeof g!="function")throw new F(`Graph.${t}: updater should be a function.`);const _=f.attributes,b=g(_[v]);return _[v]=b,this.emit("nodeAttributesUpdated",{key:f.key,type:"set",attributes:f.attributes,name:v}),this}}function ta(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=di(this,t,i,r,n,a);return delete o.attributes[f],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:f}),this}}function ia(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=di(this,t,i,r,n,a);if(!It(f))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=f,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function ra(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=di(this,t,i,r,n,a);if(!It(f))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return Lt(o.attributes,f),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:f}),this}}function na(s,t,i){s.prototype[t]=function(r,n,a){const[o,f]=di(this,t,i,r,n,a);if(typeof f!="function")throw new F(`Graph.${t}: provided updater is not a function.`);return o.attributes=f(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const sa=[{name:s=>`get${s}Attribute`,attacher:Vs},{name:s=>`get${s}Attributes`,attacher:Hs},{name:s=>`has${s}Attribute`,attacher:Xs},{name:s=>`set${s}Attribute`,attacher:Zs},{name:s=>`update${s}Attribute`,attacher:ea},{name:s=>`remove${s}Attribute`,attacher:ta},{name:s=>`replace${s}Attributes`,attacher:ia},{name:s=>`merge${s}Attributes`,attacher:ra},{name:s=>`update${s}Attributes`,attacher:na}];function aa(s){sa.forEach(function({name:t,attacher:i}){i(s,t("Node"),Mn),i(s,t("Source"),Fn),i(s,t("Target"),Ys),i(s,t("Opposite"),Bn)})}function oa(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes[n]}}function la(s,t,i){s.prototype[t]=function(r){let n;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,o=""+arguments[1];if(n=Xt(this,a,o,i),!n)throw new O(`Graph.${t}: could not find an edge for the given path ("${a}" - "${o}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,n=this._edges.get(r),!n)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return n.attributes}}function da(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return a.attributes.hasOwnProperty(n)}}function ca(s,t,i){s.prototype[t]=function(r,n,a){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+r,v=""+n;if(n=arguments[2],a=arguments[3],o=Xt(this,f,v,i),!o)throw new O(`Graph.${t}: could not find an edge for the given path ("${f}" - "${v}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[n]=a,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:n}),this}}function ua(s,t,i){s.prototype[t]=function(r,n,a){let o;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const f=""+r,v=""+n;if(n=arguments[2],a=arguments[3],o=Xt(this,f,v,i),!o)throw new O(`Graph.${t}: could not find an edge for the given path ("${f}" - "${v}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof a!="function")throw new F(`Graph.${t}: updater should be a function.`);return o.attributes[n]=a(o.attributes[n]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:n}),this}}function fa(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete a.attributes[n],this.emit("edgeAttributesUpdated",{key:a.key,type:"remove",attributes:a.attributes,name:n}),this}}function ha(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!It(n))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return a.attributes=n,this.emit("edgeAttributesUpdated",{key:a.key,type:"replace",attributes:a.attributes}),this}}function va(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!It(n))throw new F(`Graph.${t}: provided attributes are not a plain object.`);return Lt(a.attributes,n),this.emit("edgeAttributesUpdated",{key:a.key,type:"merge",attributes:a.attributes,data:n}),this}}function pa(s,t,i){s.prototype[t]=function(r,n){let a;if(this.type!=="mixed"&&i!=="mixed"&&i!==this.type)throw new ie(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new ie(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,f=""+n;if(n=arguments[2],a=Xt(this,o,f,i),!a)throw new O(`Graph.${t}: could not find an edge for the given path ("${o}" - "${f}").`)}else{if(i!=="mixed")throw new ie(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,a=this._edges.get(r),!a)throw new O(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(typeof n!="function")throw new F(`Graph.${t}: provided updater is not a function.`);return a.attributes=n(a.attributes),this.emit("edgeAttributesUpdated",{key:a.key,type:"update",attributes:a.attributes}),this}}const ga=[{name:s=>`get${s}Attribute`,attacher:oa},{name:s=>`get${s}Attributes`,attacher:la},{name:s=>`has${s}Attribute`,attacher:da},{name:s=>`set${s}Attribute`,attacher:ca},{name:s=>`update${s}Attribute`,attacher:ua},{name:s=>`remove${s}Attribute`,attacher:fa},{name:s=>`replace${s}Attributes`,attacher:ha},{name:s=>`merge${s}Attributes`,attacher:va},{name:s=>`update${s}Attributes`,attacher:pa}];function ya(s){ga.forEach(function({name:t,attacher:i}){i(s,t("Edge"),"mixed"),i(s,t("DirectedEdge"),"directed"),i(s,t("UndirectedEdge"),"undirected")})}const _a=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function wa(s,t,i,r){let n=!1;for(const a in t){if(a===r)continue;const o=t[a];if(n=i(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),s&&n)return o.key}}function ma(s,t,i,r){let n,a,o,f=!1;for(const v in t)if(v!==r){n=t[v];do{if(a=n.source,o=n.target,f=i(n.key,n.attributes,a.key,o.key,a.attributes,o.attributes,n.undirected),s&&f)return n.key;n=n.next}while(n!==void 0)}}function kr(s,t){const i=Object.keys(s),r=i.length;let n,a=0;return{[Symbol.iterator](){return this},next(){do if(n)n=n.next;else{if(a>=r)return{done:!0};const o=i[a++];if(o===t){n=void 0;continue}n=s[o]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}}}function ba(s,t,i,r){const n=t[i];if(!n)return;const a=n.source,o=n.target;if(r(n.key,n.attributes,a.key,o.key,a.attributes,o.attributes,n.undirected)&&s)return n.key}function ka(s,t,i,r){let n=t[i];if(!n)return;let a=!1;do{if(a=r(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),s&&a)return n.key;n=n.next}while(n!==void 0)}function jr(s,t){let i=s[t];if(i.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!i)return{done:!0};const n={edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected};return i=i.next,{done:!1,value:n}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}})}}}function ja(s,t){if(s.size===0)return[];if(t==="mixed"||t===s.type)return Array.from(s._edges.keys());const i=t==="undirected"?s.undirectedSize:s.directedSize,r=new Array(i),n=t==="undirected",a=s._edges.values();let o=0,f,v;for(;f=a.next(),f.done!==!0;)v=f.value,v.undirected===n&&(r[o++]=v.key);return r}function Wn(s,t,i,r){if(t.size===0)return;const n=i!=="mixed"&&i!==t.type,a=i==="undirected";let o,f,v=!1;const g=t._edges.values();for(;o=g.next(),o.done!==!0;){if(f=o.value,n&&f.undirected!==a)continue;const{key:_,attributes:b,source:x,target:T}=f;if(v=r(_,b,x.key,T.key,x.attributes,T.attributes,f.undirected),s&&v)return _}}function xa(s,t){if(s.size===0)return Ti();const i=t!=="mixed"&&t!==s.type,r=t==="undirected",n=s._edges.values();return{[Symbol.iterator](){return this},next(){let a,o;for(;;){if(a=n.next(),a.done)return a;if(o=a.value,!(i&&o.undirected!==r))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function Cr(s,t,i,r,n,a){const o=t?ma:wa;let f;if(i!=="undirected"&&(r!=="out"&&(f=o(s,n.in,a),s&&f)||r!=="in"&&(f=o(s,n.out,a,r?void 0:n.key),s&&f))||i!=="directed"&&(f=o(s,n.undirected,a),s&&f))return f}function Ea(s,t,i,r){const n=[];return Cr(!1,s,t,i,r,function(a){n.push(a)}),n}function Sa(s,t,i){let r=Ti();return s!=="undirected"&&(t!=="out"&&typeof i.in<"u"&&(r=li(r,kr(i.in))),t!=="in"&&typeof i.out<"u"&&(r=li(r,kr(i.out,t?void 0:i.key)))),s!=="directed"&&typeof i.undirected<"u"&&(r=li(r,kr(i.undirected))),r}function Tr(s,t,i,r,n,a,o){const f=i?ka:ba;let v;if(t!=="undirected"&&(typeof n.in<"u"&&r!=="out"&&(v=f(s,n.in,a,o),s&&v)||typeof n.out<"u"&&r!=="in"&&(r||n.key!==a)&&(v=f(s,n.out,a,o),s&&v))||t!=="directed"&&typeof n.undirected<"u"&&(v=f(s,n.undirected,a,o),s&&v))return v}function Aa(s,t,i,r,n){const a=[];return Tr(!1,s,t,i,r,n,function(o){a.push(o)}),a}function $a(s,t,i,r){let n=Ti();return s!=="undirected"&&(typeof i.in<"u"&&t!=="out"&&r in i.in&&(n=li(n,jr(i.in,r))),typeof i.out<"u"&&t!=="in"&&r in i.out&&(t||i.key!==r)&&(n=li(n,jr(i.out,r)))),s!=="directed"&&typeof i.undirected<"u"&&r in i.undirected&&(n=li(n,jr(i.undirected,r))),n}function Ga(s,t){const{name:i,type:r,direction:n}=t;s.prototype[i]=function(a,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return ja(this,r);if(arguments.length===1){a=""+a;const f=this._nodes.get(a);if(typeof f>"u")throw new O(`Graph.${i}: could not find the "${a}" node in the graph.`);return Ea(this.multi,r==="mixed"?this.type:r,n,f)}if(arguments.length===2){a=""+a,o=""+o;const f=this._nodes.get(a);if(!f)throw new O(`Graph.${i}:  could not find the "${a}" source node in the graph.`);if(!this._nodes.has(o))throw new O(`Graph.${i}:  could not find the "${o}" target node in the graph.`);return Aa(r,this.multi,n,f,o)}throw new F(`Graph.${i}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Na(s,t){const{name:i,type:r,direction:n}=t,a="forEach"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(g,_,b){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return b=g,Wn(!1,this,r,b);if(arguments.length===2){g=""+g,b=_;const x=this._nodes.get(g);if(typeof x>"u")throw new O(`Graph.${a}: could not find the "${g}" node in the graph.`);return Cr(!1,this.multi,r==="mixed"?this.type:r,n,x,b)}if(arguments.length===3){g=""+g,_=""+_;const x=this._nodes.get(g);if(!x)throw new O(`Graph.${a}:  could not find the "${g}" source node in the graph.`);if(!this._nodes.has(_))throw new O(`Graph.${a}:  could not find the "${_}" target node in the graph.`);return Tr(!1,r,this.multi,n,x,_,b)}throw new F(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+i[0].toUpperCase()+i.slice(1);s.prototype[o]=function(){const g=Array.prototype.slice.call(arguments),_=g.pop();let b;if(g.length===0){let x=0;r!=="directed"&&(x+=this.undirectedSize),r!=="undirected"&&(x+=this.directedSize),b=new Array(x);let T=0;g.push((re,se,j,B,gt,R,D)=>{b[T++]=_(re,se,j,B,gt,R,D)})}else b=[],g.push((x,T,re,se,j,B,gt)=>{b.push(_(x,T,re,se,j,B,gt))});return this[a].apply(this,g),b};const f="filter"+i[0].toUpperCase()+i.slice(1);s.prototype[f]=function(){const g=Array.prototype.slice.call(arguments),_=g.pop(),b=[];return g.push((x,T,re,se,j,B,gt)=>{_(x,T,re,se,j,B,gt)&&b.push(x)}),this[a].apply(this,g),b};const v="reduce"+i[0].toUpperCase()+i.slice(1);s.prototype[v]=function(){let g=Array.prototype.slice.call(arguments);if(g.length<2||g.length>4)throw new F(`Graph.${v}: invalid number of arguments (expecting 2, 3 or 4 and got ${g.length}).`);if(typeof g[g.length-1]=="function"&&typeof g[g.length-2]!="function")throw new F(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let _,b;g.length===2?(_=g[0],b=g[1],g=[]):g.length===3?(_=g[1],b=g[2],g=[g[0]]):g.length===4&&(_=g[2],b=g[3],g=[g[0],g[1]]);let x=b;return g.push((T,re,se,j,B,gt,R)=>{x=_(x,T,re,se,j,B,gt,R)}),this[a].apply(this,g),x}}function La(s,t){const{name:i,type:r,direction:n}=t,a="find"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(v,g,_){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return _=v,Wn(!0,this,r,_);if(arguments.length===2){v=""+v,_=g;const b=this._nodes.get(v);if(typeof b>"u")throw new O(`Graph.${a}: could not find the "${v}" node in the graph.`);return Cr(!0,this.multi,r==="mixed"?this.type:r,n,b,_)}if(arguments.length===3){v=""+v,g=""+g;const b=this._nodes.get(v);if(!b)throw new O(`Graph.${a}:  could not find the "${v}" source node in the graph.`);if(!this._nodes.has(g))throw new O(`Graph.${a}:  could not find the "${g}" target node in the graph.`);return Tr(!0,r,this.multi,n,b,g,_)}throw new F(`Graph.${a}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[o]=function(){const v=Array.prototype.slice.call(arguments),g=v.pop();return v.push((b,x,T,re,se,j,B)=>g(b,x,T,re,se,j,B)),!!this[a].apply(this,v)};const f="every"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[f]=function(){const v=Array.prototype.slice.call(arguments),g=v.pop();return v.push((b,x,T,re,se,j,B)=>!g(b,x,T,re,se,j,B)),!this[a].apply(this,v)}}function Da(s,t){const{name:i,type:r,direction:n}=t,a=i.slice(0,-1)+"Entries";s.prototype[a]=function(o,f){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ti();if(!arguments.length)return xa(this,r);if(arguments.length===1){o=""+o;const v=this._nodes.get(o);if(!v)throw new O(`Graph.${a}: could not find the "${o}" node in the graph.`);return Sa(r,n,v)}if(arguments.length===2){o=""+o,f=""+f;const v=this._nodes.get(o);if(!v)throw new O(`Graph.${a}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(f))throw new O(`Graph.${a}:  could not find the "${f}" target node in the graph.`);return $a(r,n,v,f)}throw new F(`Graph.${a}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Ca(s){_a.forEach(t=>{Ga(s,t),Na(s,t),La(s,t),Da(s,t)})}const Ta=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function cr(){this.A=null,this.B=null}cr.prototype.wrap=function(s){this.A===null?this.A=s:this.B===null&&(this.B=s)};cr.prototype.has=function(s){return this.A!==null&&s in this.A||this.B!==null&&s in this.B};function Wi(s,t,i,r,n){for(const a in r){const o=r[a],f=o.source,v=o.target,g=f===i?v:f;if(t&&t.has(g.key))continue;const _=n(g.key,g.attributes);if(s&&_)return g.key}}function Rr(s,t,i,r,n){if(t!=="mixed"){if(t==="undirected")return Wi(s,null,r,r.undirected,n);if(typeof i=="string")return Wi(s,null,r,r[i],n)}const a=new cr;let o;if(t!=="undirected"){if(i!=="out"){if(o=Wi(s,null,r,r.in,n),s&&o)return o;a.wrap(r.in)}if(i!=="in"){if(o=Wi(s,a,r,r.out,n),s&&o)return o;a.wrap(r.out)}}if(t!=="directed"&&(o=Wi(s,a,r,r.undirected,n),s&&o))return o}function Ra(s,t,i){if(s!=="mixed"){if(s==="undirected")return Object.keys(i.undirected);if(typeof t=="string")return Object.keys(i[t])}const r=[];return Rr(!1,s,t,i,function(n){r.push(n)}),r}function Ki(s,t,i){const r=Object.keys(i),n=r.length;let a=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(a>=n)return s&&s.wrap(i),{done:!0};const f=i[r[a++]],v=f.source,g=f.target;if(o=v===t?g:v,s&&s.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function Ia(s,t,i){if(s!=="mixed"){if(s==="undirected")return Ki(null,i,i.undirected);if(typeof t=="string")return Ki(null,i,i[t])}let r=Ti();const n=new cr;return s!=="undirected"&&(t!=="out"&&(r=li(r,Ki(n,i,i.in))),t!=="in"&&(r=li(r,Ki(n,i,i.out)))),s!=="directed"&&(r=li(r,Ki(n,i,i.undirected))),r}function Oa(s,t){const{name:i,type:r,direction:n}=t;s.prototype[i]=function(a){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];a=""+a;const o=this._nodes.get(a);if(typeof o>"u")throw new O(`Graph.${i}: could not find the "${a}" node in the graph.`);return Ra(r==="mixed"?this.type:r,n,o)}}function Ua(s,t){const{name:i,type:r,direction:n}=t,a="forEach"+i[0].toUpperCase()+i.slice(1,-1);s.prototype[a]=function(g,_){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;g=""+g;const b=this._nodes.get(g);if(typeof b>"u")throw new O(`Graph.${a}: could not find the "${g}" node in the graph.`);Rr(!1,r==="mixed"?this.type:r,n,b,_)};const o="map"+i[0].toUpperCase()+i.slice(1);s.prototype[o]=function(g,_){const b=[];return this[a](g,(x,T)=>{b.push(_(x,T))}),b};const f="filter"+i[0].toUpperCase()+i.slice(1);s.prototype[f]=function(g,_){const b=[];return this[a](g,(x,T)=>{_(x,T)&&b.push(x)}),b};const v="reduce"+i[0].toUpperCase()+i.slice(1);s.prototype[v]=function(g,_,b){if(arguments.length<3)throw new F(`Graph.${v}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let x=b;return this[a](g,(T,re)=>{x=_(x,T,re)}),x}}function za(s,t){const{name:i,type:r,direction:n}=t,a=i[0].toUpperCase()+i.slice(1,-1),o="find"+a;s.prototype[o]=function(g,_){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;g=""+g;const b=this._nodes.get(g);if(typeof b>"u")throw new O(`Graph.${o}: could not find the "${g}" node in the graph.`);return Rr(!0,r==="mixed"?this.type:r,n,b,_)};const f="some"+a;s.prototype[f]=function(g,_){return!!this[o](g,_)};const v="every"+a;s.prototype[v]=function(g,_){return!this[o](g,(x,T)=>!_(x,T))}}function qa(s,t){const{name:i,type:r,direction:n}=t,a=i.slice(0,-1)+"Entries";s.prototype[a]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return Ti();o=""+o;const f=this._nodes.get(o);if(typeof f>"u")throw new O(`Graph.${a}: could not find the "${o}" node in the graph.`);return Ia(r==="mixed"?this.type:r,n,f)}}function Pa(s){Ta.forEach(t=>{Oa(s,t),Ua(s,t),za(s,t),qa(s,t)})}function sr(s,t,i,r,n){const a=r._nodes.values(),o=r.type;let f,v,g,_,b,x;for(;f=a.next(),f.done!==!0;){let T=!1;if(v=f.value,o!=="undirected"){_=v.out;for(g in _){b=_[g];do x=b.target,T=!0,n(v.key,x.key,v.attributes,x.attributes,b.key,b.attributes,b.undirected),b=b.next;while(b)}}if(o!=="directed"){_=v.undirected;for(g in _)if(!(t&&v.key>g)){b=_[g];do x=b.target,x.key!==g&&(x=b.source),T=!0,n(v.key,x.key,v.attributes,x.attributes,b.key,b.attributes,b.undirected),b=b.next;while(b)}}i&&!T&&n(v.key,null,v.attributes,null,null,null,null)}}function Ma(s,t){const i={key:s};return Un(t.attributes)||(i.attributes=Lt({},t.attributes)),i}function Fa(s,t,i){const r={key:t,source:i.source.key,target:i.target.key};return Un(i.attributes)||(r.attributes=Lt({},i.attributes)),s==="mixed"&&i.undirected&&(r.undirected=!0),r}function Ba(s){if(!It(s))throw new F('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in s))throw new F("Graph.import: serialized node is missing its key.");if("attributes"in s&&(!It(s.attributes)||s.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Wa(s){if(!It(s))throw new F('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in s))throw new F("Graph.import: serialized edge is missing its source.");if(!("target"in s))throw new F("Graph.import: serialized edge is missing its target.");if("attributes"in s&&(!It(s.attributes)||s.attributes===null))throw new F("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in s&&typeof s.undirected!="boolean")throw new F("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Ka=Qs(),Ja=new Set(["directed","undirected","mixed"]),mn=new Set(["domain","_events","_eventsCount","_maxListeners"]),Qa=[{name:s=>`${s}Edge`,generateKey:!0},{name:s=>`${s}DirectedEdge`,generateKey:!0,type:"directed"},{name:s=>`${s}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:s=>`${s}EdgeWithKey`},{name:s=>`${s}DirectedEdgeWithKey`,type:"directed"},{name:s=>`${s}UndirectedEdgeWithKey`,type:"undirected"}],Ya={allowSelfLoops:!0,multi:!1,type:"mixed"};function Va(s,t,i){if(i&&!It(i))throw new F(`Graph.addNode: invalid attributes. Expecting an object but got "${i}"`);if(t=""+t,i=i||{},s._nodes.has(t))throw new ie(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new s.NodeDataClass(t,i);return s._nodes.set(t,r),s.emit("nodeAdded",{key:t,attributes:i}),r}function bn(s,t,i){const r=new s.NodeDataClass(t,i);return s._nodes.set(t,r),s.emit("nodeAdded",{key:t,attributes:i}),r}function Kn(s,t,i,r,n,a,o,f){if(!r&&s.type==="undirected")throw new ie(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&s.type==="directed")throw new ie(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(f&&!It(f))throw new F(`Graph.${t}: invalid attributes. Expecting an object but got "${f}"`);if(a=""+a,o=""+o,f=f||{},!s.allowSelfLoops&&a===o)throw new ie(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const v=s._nodes.get(a),g=s._nodes.get(o);if(!v)throw new O(`Graph.${t}: source node "${a}" not found.`);if(!g)throw new O(`Graph.${t}: target node "${o}" not found.`);const _={key:null,undirected:r,source:a,target:o,attributes:f};if(i)n=s._edgeKeyGenerator();else if(n=""+n,s._edges.has(n))throw new ie(`Graph.${t}: the "${n}" edge already exists in the graph.`);if(!s.multi&&(r?typeof v.undirected[o]<"u":typeof v.out[o]<"u"))throw new ie(`Graph.${t}: an edge linking "${a}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const b=new Ri(r,n,v,g,f);s._edges.set(n,b);const x=a===o;return r?(v.undirectedDegree++,g.undirectedDegree++,x&&(v.undirectedLoops++,s._undirectedSelfLoopCount++)):(v.outDegree++,g.inDegree++,x&&(v.directedLoops++,s._directedSelfLoopCount++)),s.multi?b.attachMulti():b.attach(),r?s._undirectedSize++:s._directedSize++,_.key=n,s.emit("edgeAdded",_),n}function Ha(s,t,i,r,n,a,o,f,v){if(!r&&s.type==="undirected")throw new ie(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&s.type==="directed")throw new ie(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(f){if(v){if(typeof f!="function")throw new F(`Graph.${t}: invalid updater function. Expecting a function but got "${f}"`)}else if(!It(f))throw new F(`Graph.${t}: invalid attributes. Expecting an object but got "${f}"`)}a=""+a,o=""+o;let g;if(v&&(g=f,f=void 0),!s.allowSelfLoops&&a===o)throw new ie(`Graph.${t}: source & target are the same ("${a}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let _=s._nodes.get(a),b=s._nodes.get(o),x,T;if(!i&&(x=s._edges.get(n),x)){if((x.source.key!==a||x.target.key!==o)&&(!r||x.source.key!==o||x.target.key!==a))throw new ie(`Graph.${t}: inconsistency detected when attempting to merge the "${n}" edge with "${a}" source & "${o}" target vs. ("${x.source.key}", "${x.target.key}").`);T=x}if(!T&&!s.multi&&_&&(T=r?_.undirected[o]:_.out[o]),T){const gt=[T.key,!1,!1,!1];if(v?!g:!f)return gt;if(v){const R=T.attributes;T.attributes=g(R),s.emit("edgeAttributesUpdated",{type:"replace",key:T.key,attributes:T.attributes})}else Lt(T.attributes,f),s.emit("edgeAttributesUpdated",{type:"merge",key:T.key,attributes:T.attributes,data:f});return gt}f=f||{},v&&g&&(f=g(f));const re={key:null,undirected:r,source:a,target:o,attributes:f};if(i)n=s._edgeKeyGenerator();else if(n=""+n,s._edges.has(n))throw new ie(`Graph.${t}: the "${n}" edge already exists in the graph.`);let se=!1,j=!1;_||(_=bn(s,a,{}),se=!0,a===o&&(b=_,j=!0)),b||(b=bn(s,o,{}),j=!0),x=new Ri(r,n,_,b,f),s._edges.set(n,x);const B=a===o;return r?(_.undirectedDegree++,b.undirectedDegree++,B&&(_.undirectedLoops++,s._undirectedSelfLoopCount++)):(_.outDegree++,b.inDegree++,B&&(_.directedLoops++,s._directedSelfLoopCount++)),s.multi?x.attachMulti():x.attach(),r?s._undirectedSize++:s._directedSize++,re.key=n,s.emit("edgeAdded",re),[n,!0,se,j]}function Li(s,t){s._edges.delete(t.key);const{source:i,target:r,attributes:n}=t,a=t.undirected,o=i===r;a?(i.undirectedDegree--,r.undirectedDegree--,o&&(i.undirectedLoops--,s._undirectedSelfLoopCount--)):(i.outDegree--,r.inDegree--,o&&(i.directedLoops--,s._directedSelfLoopCount--)),s.multi?t.detachMulti():t.detach(),a?s._undirectedSize--:s._directedSize--,s.emit("edgeDropped",{key:t.key,attributes:n,source:i.key,target:r.key,undirected:a})}class ot extends Ks.EventEmitter{constructor(t){if(super(),t=Lt({},Ya,t),typeof t.multi!="boolean")throw new F(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!Ja.has(t.type))throw new F(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if(typeof t.allowSelfLoops!="boolean")throw new F(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);const i=t.type==="mixed"?zn:t.type==="directed"?qn:Pn;Ht(this,"NodeDataClass",i);const r="geid_"+Ka()+"_";let n=0;const a=()=>{let o;do o=r+n++;while(this._edges.has(o));return o};Ht(this,"_attributes",{}),Ht(this,"_nodes",new Map),Ht(this,"_edges",new Map),Ht(this,"_directedSize",0),Ht(this,"_undirectedSize",0),Ht(this,"_directedSelfLoopCount",0),Ht(this,"_undirectedSelfLoopCount",0),Ht(this,"_edgeKeyGenerator",a),Ht(this,"_options",t),mn.forEach(o=>Ht(this,o,this[o])),ti(this,"order",()=>this._nodes.size),ti(this,"size",()=>this._edges.size),ti(this,"directedSize",()=>this._directedSize),ti(this,"undirectedSize",()=>this._undirectedSize),ti(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),ti(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),ti(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),ti(this,"multi",this._options.multi),ti(this,"type",this._options.type),ti(this,"allowSelfLoops",this._options.allowSelfLoops),ti(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,i){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&!n.undirected}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?r.out.hasOwnProperty(i):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,i){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+t,n=this._edges.get(r);return!!n&&n.undirected}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?r.undirected.hasOwnProperty(i):!1}throw new F(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,i){if(arguments.length===1){const r=""+t;return this._edges.has(r)}else if(arguments.length===2){t=""+t,i=""+i;const r=this._nodes.get(t);return r?typeof r.out<"u"&&r.out.hasOwnProperty(i)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(i):!1}throw new F(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,i){if(this.type==="undirected")return;if(t=""+t,i=""+i,this.multi)throw new ie("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new O(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new O(`Graph.directedEdge: could not find the "${i}" target node in the graph.`);const n=r.out&&r.out[i]||void 0;if(n)return n.key}undirectedEdge(t,i){if(this.type==="directed")return;if(t=""+t,i=""+i,this.multi)throw new ie("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new O(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new O(`Graph.undirectedEdge: could not find the "${i}" target node in the graph.`);const n=r.undirected&&r.undirected[i]||void 0;if(n)return n.key}edge(t,i){if(this.multi)throw new ie("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(i))throw new O(`Graph.edge: could not find the "${i}" target node in the graph.`);const n=r.out&&r.out[i]||r.undirected&&r.undirected[i]||void 0;if(n)return n.key}areDirectedNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.in||i in r.out}areOutNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.out}areInNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return this.type==="undirected"?!1:i in r.in}areUndirectedNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return this.type==="directed"?!1:i in r.undirected}areNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&(i in r.in||i in r.out)||this.type!=="directed"&&i in r.undirected}areInboundNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in r.in||this.type!=="directed"&&i in r.undirected}areOutboundNeighbors(t,i){t=""+t,i=""+i;const r=this._nodes.get(t);if(!r)throw new O(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return this.type!=="undirected"&&i in r.out||this.type!=="directed"&&i in r.undirected}inDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.inDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree}outDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.outDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree}directedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree}undirectedDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree}inboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.inDegree),r}outboundDegree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.outDegree),r}degree(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=i.undirectedDegree),this.type!=="undirected"&&(r+=i.inDegree+i.outDegree),r}inDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree-i.directedLoops}outDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.outDegree-i.directedLoops}directedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="undirected"?0:i.inDegree+i.outDegree-i.directedLoops*2}undirectedDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return this.type==="directed"?0:i.undirectedDegree-i.undirectedLoops*2}inboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.inDegree,n+=i.directedLoops),r-n}outboundDegreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.outDegree,n+=i.directedLoops),r-n}degreeWithoutSelfLoops(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=i.undirectedDegree,n+=i.undirectedLoops*2),this.type!=="undirected"&&(r+=i.inDegree+i.outDegree,n+=i.directedLoops*2),r-n}source(t){t=""+t;const i=this._edges.get(t);if(!i)throw new O(`Graph.source: could not find the "${t}" edge in the graph.`);return i.source.key}target(t){t=""+t;const i=this._edges.get(t);if(!i)throw new O(`Graph.target: could not find the "${t}" edge in the graph.`);return i.target.key}extremities(t){t=""+t;const i=this._edges.get(t);if(!i)throw new O(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[i.source.key,i.target.key]}opposite(t,i){t=""+t,i=""+i;const r=this._edges.get(i);if(!r)throw new O(`Graph.opposite: could not find the "${i}" edge in the graph.`);const n=r.source.key,a=r.target.key;if(t===n)return a;if(t===a)return n;throw new O(`Graph.opposite: the "${t}" node is not attached to the "${i}" edge (${n}, ${a}).`)}hasExtremity(t,i){t=""+t,i=""+i;const r=this._edges.get(t);if(!r)throw new O(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===i||r.target.key===i}isUndirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new O(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return i.undirected}isDirected(t){t=""+t;const i=this._edges.get(t);if(!i)throw new O(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!i.undirected}isSelfLoop(t){t=""+t;const i=this._edges.get(t);if(!i)throw new O(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return i.source===i.target}addNode(t,i){return Va(this,t,i).key}mergeNode(t,i){if(i&&!It(i))throw new F(`Graph.mergeNode: invalid attributes. Expecting an object but got "${i}"`);t=""+t,i=i||{};let r=this._nodes.get(t);return r?(i&&(Lt(r.attributes,i),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:i})),[t,!1]):(r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0])}updateNode(t,i){if(i&&typeof i!="function")throw new F(`Graph.updateNode: invalid updater function. Expecting a function but got "${i}"`);t=""+t;let r=this._nodes.get(t);if(r){if(i){const a=r.attributes;r.attributes=i(a),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})}return[t,!1]}const n=i?i({}):{};return r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0]}dropNode(t){t=""+t;const i=this._nodes.get(t);if(!i)throw new O(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if(this.type!=="undirected"){for(const n in i.out){r=i.out[n];do Li(this,r),r=r.next;while(r)}for(const n in i.in){r=i.in[n];do Li(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const n in i.undirected){r=i.undirected[n];do Li(this,r),r=r.next;while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:i.attributes})}dropEdge(t){let i;if(arguments.length>1){const r=""+arguments[0],n=""+arguments[1];if(i=Xt(this,r,n,this.type),!i)throw new O(`Graph.dropEdge: could not find the "${r}" -> "${n}" edge in the graph.`)}else if(t=""+t,i=this._edges.get(t),!i)throw new O(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return Li(this,i),this}dropDirectedEdge(t,i){if(arguments.length<2)throw new ie("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ie("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");t=""+t,i=""+i;const r=Xt(this,t,i,"directed");if(!r)throw new O(`Graph.dropDirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Li(this,r),this}dropUndirectedEdge(t,i){if(arguments.length<2)throw new ie("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new ie("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=Xt(this,t,i,"undirected");if(!r)throw new O(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${i}" edge in the graph.`);return Li(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let i;for(;i=t.next(),i.done!==!0;)i.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,i){return this._attributes[t]=i,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,i){if(typeof i!="function")throw new F("Graph.updateAttribute: updater should be a function.");const r=this._attributes[t];return this._attributes[t]=i(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!It(t))throw new F("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!It(t))throw new F("Graph.mergeAttributes: provided attributes are not a plain object.");return Lt(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if(typeof t!="function")throw new F("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,i){if(typeof t!="function")throw new F("Graph.updateEachNodeAttributes: expecting an updater function.");if(i&&!wn(i))throw new F("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let n,a;for(;n=r.next(),n.done!==!0;)a=n.value,a.attributes=t(a.key,a.attributes);this.emit("eachNodeAttributesUpdated",{hints:i||null})}updateEachEdgeAttributes(t,i){if(typeof t!="function")throw new F("Graph.updateEachEdgeAttributes: expecting an updater function.");if(i&&!wn(i))throw new F("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let n,a,o,f;for(;n=r.next(),n.done!==!0;)a=n.value,o=a.source,f=a.target,a.attributes=t(a.key,a.attributes,o.key,f.key,o.attributes,f.attributes,a.undirected);this.emit("eachEdgeAttributesUpdated",{hints:i||null})}forEachAdjacencyEntry(t){if(typeof t!="function")throw new F("Graph.forEachAdjacencyEntry: expecting a callback.");sr(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new F("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if(typeof t!="function")throw new F("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");sr(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if(typeof t!="function")throw new F("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");sr(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if(typeof t!="function")throw new F("Graph.forEachNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)}findNode(t){if(typeof t!="function")throw new F("Graph.findNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return n.key}mapNodes(t){if(typeof t!="function")throw new F("Graph.mapNode: expecting a callback.");const i=this._nodes.values();let r,n;const a=new Array(this.order);let o=0;for(;r=i.next(),r.done!==!0;)n=r.value,a[o++]=t(n.key,n.attributes);return a}someNode(t){if(typeof t!="function")throw new F("Graph.someNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,t(n.key,n.attributes))return!0;return!1}everyNode(t){if(typeof t!="function")throw new F("Graph.everyNode: expecting a callback.");const i=this._nodes.values();let r,n;for(;r=i.next(),r.done!==!0;)if(n=r.value,!t(n.key,n.attributes))return!1;return!0}filterNodes(t){if(typeof t!="function")throw new F("Graph.filterNodes: expecting a callback.");const i=this._nodes.values();let r,n;const a=[];for(;r=i.next(),r.done!==!0;)n=r.value,t(n.key,n.attributes)&&a.push(n.key);return a}reduceNodes(t,i){if(typeof t!="function")throw new F("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new F("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=i;const n=this._nodes.values();let a,o;for(;a=n.next(),a.done!==!0;)o=a.value,r=t(r,o.key,o.attributes);return r}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const i=t.next();if(i.done)return i;const r=i.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let i=0;this._nodes.forEach((n,a)=>{t[i++]=Ma(a,n)});const r=new Array(this._edges.size);return i=0,this._edges.forEach((n,a)=>{r[i++]=Fa(this.type,a,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,i=!1){if(t instanceof ot)return t.forEachNode((v,g)=>{i?this.mergeNode(v,g):this.addNode(v,g)}),t.forEachEdge((v,g,_,b,x,T,re)=>{i?re?this.mergeUndirectedEdgeWithKey(v,_,b,g):this.mergeDirectedEdgeWithKey(v,_,b,g):re?this.addUndirectedEdgeWithKey(v,_,b,g):this.addDirectedEdgeWithKey(v,_,b,g)}),this;if(!It(t))throw new F("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!It(t.attributes))throw new F("Graph.import: invalid attributes. Expecting a plain object.");i?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,n,a,o,f;if(t.nodes){if(a=t.nodes,!Array.isArray(a))throw new F("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=a.length;r<n;r++){o=a[r],Ba(o);const{key:v,attributes:g}=o;i?this.mergeNode(v,g):this.addNode(v,g)}}if(t.edges){let v=!1;if(this.type==="undirected"&&(v=!0),a=t.edges,!Array.isArray(a))throw new F("Graph.import: invalid edges. Expecting an array.");for(r=0,n=a.length;r<n;r++){f=a[r],Wa(f);const{source:g,target:_,attributes:b,undirected:x=v}=f;let T;"key"in f?(T=i?x?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:x?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,T.call(this,f.key,g,_,b)):(T=i?x?this.mergeUndirectedEdge:this.mergeDirectedEdge:x?this.addUndirectedEdge:this.addDirectedEdge,T.call(this,g,_,b))}}return this}nullCopy(t){const i=new ot(Lt({},this._options,t));return i.replaceAttributes(Lt({},this.getAttributes())),i}emptyCopy(t){const i=this.nullCopy(t);return this._nodes.forEach((r,n)=>{const a=Lt({},r.attributes);r=new i.NodeDataClass(n,a),i._nodes.set(n,r)}),i}copy(t){if(t=t||{},typeof t.type=="string"&&t.type!==this.type&&t.type!=="mixed")throw new ie(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if(typeof t.multi=="boolean"&&t.multi!==this.multi&&t.multi!==!0)throw new ie("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof t.allowSelfLoops=="boolean"&&t.allowSelfLoops!==this.allowSelfLoops&&t.allowSelfLoops!==!0)throw new ie("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const i=this.emptyCopy(t),r=this._edges.values();let n,a;for(;n=r.next(),n.done!==!0;)a=n.value,Kn(i,"copy",!1,a.undirected,a.key,a.source.key,a.target.key,Lt({},a.attributes));return i}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((a,o)=>{t[o]=a.attributes});const i={},r={};this._edges.forEach((a,o)=>{const f=a.undirected?"--":"->";let v="",g=a.source.key,_=a.target.key,b;a.undirected&&g>_&&(b=g,g=_,_=b);const x=`(${g})${f}(${_})`;o.startsWith("geid_")?this.multi&&(typeof r[x]>"u"?r[x]=0:r[x]++,v+=`${r[x]}. `):v+=`[${o}]: `,v+=x,i[v]=a.attributes});const n={};for(const a in this)this.hasOwnProperty(a)&&!mn.has(a)&&typeof this[a]!="function"&&typeof a!="symbol"&&(n[a]=this[a]);return n.attributes=this._attributes,n.nodes=t,n.edges=i,Ht(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(ot.prototype[Symbol.for("nodejs.util.inspect.custom")]=ot.prototype.inspect);Qa.forEach(s=>{["add","merge","update"].forEach(t=>{const i=s.name(t),r=t==="add"?Kn:Ha;s.generateKey?ot.prototype[i]=function(n,a,o){return r(this,i,!0,(s.type||this.type)==="undirected",null,n,a,o,t==="update")}:ot.prototype[i]=function(n,a,o,f){return r(this,i,!1,(s.type||this.type)==="undirected",n,a,o,f,t==="update")}})});aa(ot);ya(ot);Ca(ot);Pa(ot);class Jn extends ot{constructor(t){const i=Lt({type:"directed"},t);if("multi"in i&&i.multi!==!1)throw new F("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="directed")throw new F('DirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Qn extends ot{constructor(t){const i=Lt({type:"undirected"},t);if("multi"in i&&i.multi!==!1)throw new F("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(i.type!=="undirected")throw new F('UndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Yn extends ot{constructor(t){const i=Lt({multi:!0},t);if("multi"in i&&i.multi!==!0)throw new F("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(i)}}class Vn extends ot{constructor(t){const i=Lt({type:"directed",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new F("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="directed")throw new F('MultiDirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}class Hn extends ot{constructor(t){const i=Lt({type:"undirected",multi:!0},t);if("multi"in i&&i.multi!==!0)throw new F("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(i.type!=="undirected")throw new F('MultiUndirectedGraph.from: inconsistent "'+i.type+'" type in given options!');super(i)}}function Ii(s){s.from=function(t,i){const r=Lt({},t.options,i),n=new s(r);return n.import(t),n}}Ii(ot);Ii(Jn);Ii(Qn);Ii(Yn);Ii(Vn);Ii(Hn);ot.Graph=ot;ot.DirectedGraph=Jn;ot.UndirectedGraph=Qn;ot.MultiGraph=Yn;ot.MultiDirectedGraph=Vn;ot.MultiUndirectedGraph=Hn;ot.InvalidArgumentsGraphError=F;ot.NotFoundGraphError=O;ot.UsageGraphError=ie;var Di={},ar={},xr,kn;function Xn(){return kn||(kn=1,xr=function(t){return t!==null&&typeof t=="object"&&typeof t.addUndirectedEdgeWithKey=="function"&&typeof t.dropNode=="function"&&typeof t.multi=="boolean"}),xr}var Ci={},or={},jn;function Xa(){return jn||(jn=1,or.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",or.SYMBOL_SUPPORT=typeof Symbol<"u"),or}var Er,xn;function Za(){if(xn)return Er;xn=1;var s=Xa(),t=s.ARRAY_BUFFER_SUPPORT,i=s.SYMBOL_SUPPORT;return Er=function(n,a){var o,f,v,g,_;if(!n)throw new Error("obliterator/forEach: invalid iterable.");if(typeof a!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(n)||t&&ArrayBuffer.isView(n)||typeof n=="string"||n.toString()==="[object Arguments]"){for(v=0,g=n.length;v<g;v++)a(n[v],v);return}if(typeof n.forEach=="function"){n.forEach(a);return}if(i&&Symbol.iterator in n&&typeof n.next!="function"&&(n=n[Symbol.iterator]()),typeof n.next=="function"){for(o=n,v=0;_=o.next(),_.done!==!0;)a(_.value,v),v++;return}for(f in n)n.hasOwnProperty(f)&&a(n[f],f)},Er}var Sr={},En;function eo(){return En||(En=1,(function(s){var t=Math.pow(2,8)-1,i=Math.pow(2,16)-1,r=Math.pow(2,32)-1,n=Math.pow(2,7)-1,a=Math.pow(2,15)-1,o=Math.pow(2,31)-1;s.getPointerArray=function(v){var g=v-1;if(g<=t)return Uint8Array;if(g<=i)return Uint16Array;if(g<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},s.getSignedPointerArray=function(v){var g=v-1;return g<=n?Int8Array:g<=a?Int16Array:g<=o?Int32Array:Float64Array},s.getNumberType=function(v){return v===(v|0)?Math.sign(v)===-1?v<=127&&v>=-128?Int8Array:v<=32767&&v>=-32768?Int16Array:Int32Array:v<=255?Uint8Array:v<=65535?Uint16Array:Uint32Array:Float64Array};var f={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};s.getMinimalRepresentation=function(v,g){var _=null,b=0,x,T,re,se,j;for(se=0,j=v.length;se<j;se++)re=g?g(v[se]):v[se],T=s.getNumberType(re),x=f[T.name],x>b&&(b=x,_=T);return _},s.isTypedArray=function(v){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(v)},s.concat=function(){var v=0,g,_,b;for(g=0,b=arguments.length;g<b;g++)v+=arguments[g].length;var x=new arguments[0].constructor(v);for(g=0,_=0;g<b;g++)x.set(arguments[g],_),_+=arguments[g].length;return x},s.indices=function(v){for(var g=s.getPointerArray(v),_=new g(v),b=0;b<v;b++)_[b]=b;return _}})(Sr)),Sr}var Sn;function to(){if(Sn)return Ci;Sn=1;var s=Za(),t=eo();function i(o){return Array.isArray(o)||t.isTypedArray(o)}function r(o){if(typeof o.length=="number")return o.length;if(typeof o.size=="number")return o.size}function n(o){var f=r(o),v=typeof f=="number"?new Array(f):[],g=0;return s(o,function(_){v[g++]=_}),v}function a(o){var f=r(o),v=typeof f=="number"?t.getPointerArray(f):Array,g=typeof f=="number"?new Array(f):[],_=typeof f=="number"?new v(f):[],b=0;return s(o,function(x){g[b]=x,_[b]=b++}),[g,_]}return Ci.isArrayLike=i,Ci.guessLength=r,Ci.toArray=n,Ci.toArrayWithIndices=a,Ci}var Ar,An;function io(){if(An)return Ar;An=1;function s(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}return typeof Symbol<"u"&&(s.prototype[Symbol.iterator]=function(){return this}),s.of=function(){var t=arguments,i=t.length,r=0;return new s(function(){return r>=i?{done:!0}:{done:!1,value:t[r++]}})},s.empty=function(){var t=new s(function(){return{done:!0}});return t},s.fromSequence=function(t){var i=0,r=t.length;return new s(function(){return i>=r?{done:!0}:{done:!1,value:t[i++]}})},s.is=function(t){return t instanceof s?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"},Ar=s,Ar}var $r,$n;function ro(){if($n)return $r;$n=1;var s=to(),t=io();function i(r,n){if(arguments.length<2)throw new Error("mnemonist/fixed-deque: expecting an Array class and a capacity.");if(typeof n!="number"||n<=0)throw new Error("mnemonist/fixed-deque: `capacity` should be a positive number.");this.ArrayClass=r,this.capacity=n,this.items=new r(this.capacity),this.clear()}return i.prototype.clear=function(){this.start=0,this.size=0},i.prototype.push=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.push: deque capacity ("+this.capacity+") exceeded!");var n=this.start+this.size;return n>=this.capacity&&(n-=this.capacity),this.items[n]=r,++this.size},i.prototype.unshift=function(r){if(this.size===this.capacity)throw new Error("mnemonist/fixed-deque.unshift: deque capacity ("+this.capacity+") exceeded!");var n=this.start-1;return this.start===0&&(n=this.capacity-1),this.items[n]=r,this.start=n,++this.size},i.prototype.pop=function(){if(this.size!==0){this.size--;var r=this.start+this.size;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},i.prototype.shift=function(){if(this.size!==0){var r=this.start;return this.size--,this.start++,this.start===this.capacity&&(this.start=0),this.items[r]}},i.prototype.peekFirst=function(){if(this.size!==0)return this.items[this.start]},i.prototype.peekLast=function(){if(this.size!==0){var r=this.start+this.size-1;return r>=this.capacity&&(r-=this.capacity),this.items[r]}},i.prototype.get=function(r){if(!(this.size===0||r>=this.capacity))return r=this.start+r,r>=this.capacity&&(r-=this.capacity),this.items[r]},i.prototype.forEach=function(r,n){n=arguments.length>1?n:this;for(var a=this.capacity,o=this.size,f=this.start,v=0;v<o;)r.call(n,this.items[f],v,this),f++,v++,f===a&&(f=0)},i.prototype.toArray=function(){var r=this.start+this.size;if(r<this.capacity)return this.items.slice(this.start,r);for(var n=new this.ArrayClass(this.size),a=this.capacity,o=this.size,f=this.start,v=0;v<o;)n[v]=this.items[f],f++,v++,f===a&&(f=0);return n},i.prototype.values=function(){var r=this.items,n=this.capacity,a=this.size,o=this.start,f=0;return new t(function(){if(f>=a)return{done:!0};var v=r[o];return o++,f++,o===n&&(o=0),{value:v,done:!1}})},i.prototype.entries=function(){var r=this.items,n=this.capacity,a=this.size,o=this.start,f=0;return new t(function(){if(f>=a)return{done:!0};var v=r[o];return o++,o===n&&(o=0),{value:[f++,v],done:!1}})},typeof Symbol<"u"&&(i.prototype[Symbol.iterator]=i.prototype.values),i.prototype.inspect=function(){var r=this.toArray();return r.type=this.ArrayClass.name,r.capacity=this.capacity,Object.defineProperty(r,"constructor",{value:i,enumerable:!1}),r},typeof Symbol<"u"&&(i.prototype[Symbol.for("nodejs.util.inspect.custom")]=i.prototype.inspect),i.from=function(r,n,a){if(arguments.length<3&&(a=s.guessLength(r),typeof a!="number"))throw new Error("mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.");var o=new i(n,a);if(s.isArrayLike(r)){var f,v;for(f=0,v=r.length;f<v;f++)o.items[f]=r[f];return o.size=v,o}return s.forEach(r,function(g){o.push(g)}),o},$r=i,$r}var Gr,Gn;function no(){if(Gn)return Gr;Gn=1;var s=ro();function t(i){this.graph=i,this.queue=new s(Array,i.order),this.seen=new Set,this.size=0}return t.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},t.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},t.prototype.forEachNodeYetUnseen=function(i){var r=this.seen,n=this.graph;n.someNode(function(a,o){if(r.size===n.order)return!0;if(r.has(a))return!1;var f=i(a,o);return!!f})},t.prototype.has=function(i){return this.seen.has(i)},t.prototype.push=function(i){var r=this.seen.size;return this.seen.add(i),r===this.seen.size?!1:(this.queue.push(i),this.size++,!0)},t.prototype.pushWith=function(i,r){var n=this.seen.size;return this.seen.add(i),n===this.seen.size?!1:(this.queue.push(r),this.size++,!0)},t.prototype.shift=function(){var i=this.queue.shift();return this.size=this.queue.size,i},Gr=t,Gr}var lr={},Nn;function Zn(){if(Nn)return lr;Nn=1;function s(i,r,n){this.node=i,this.attributes=r,this.depth=n}function t(i){return i[0].toUpperCase()+i.slice(1)}return lr.TraversalRecord=s,lr.capitalize=t,lr}var Ln;function so(){if(Ln)return ar;Ln=1;var s=Xn(),t=no(),i=Zn(),r=i.TraversalRecord,n=i.capitalize;function a(o,f,v,g){if(g=g||{},!s(o))throw new Error("graphology-traversal/bfs: expecting a graphology instance.");if(typeof v!="function")throw new Error("graphology-traversal/bfs: given callback is not a function.");if(o.order===0)return;var _=new t(o),b=o["forEach"+n(g.mode||"outbound")+"Neighbor"].bind(o),x;f===null?x=_.forEachNodeYetUnseen.bind(_):x=function(j){f=""+f,j(f,o.getNodeAttributes(f))};var T,re;function se(j,B){_.pushWith(j,new r(j,B,T.depth+1))}x(function(j,B){for(_.pushWith(j,new r(j,B,0));_.size!==0;)T=_.shift(),re=v(T.node,T.attributes,T.depth),re!==!0&&b(T.node,se)})}return ar.bfs=function(o,f,v){return a(o,null,f,v)},ar.bfsFromNode=a,ar}var dr={},Nr,Dn;function ao(){if(Dn)return Nr;Dn=1;function s(t){this.graph=t,this.stack=new Array(t.order),this.seen=new Set,this.size=0}return s.prototype.hasAlreadySeenEverything=function(){return this.seen.size===this.graph.order},s.prototype.countUnseenNodes=function(){return this.graph.order-this.seen.size},s.prototype.forEachNodeYetUnseen=function(t){var i=this.seen,r=this.graph;r.someNode(function(n,a){if(i.size===r.order)return!0;if(i.has(n))return!1;var o=t(n,a);return!!o})},s.prototype.has=function(t){return this.seen.has(t)},s.prototype.push=function(t){var i=this.seen.size;return this.seen.add(t),i===this.seen.size?!1:(this.stack[this.size++]=t,!0)},s.prototype.pushWith=function(t,i){var r=this.seen.size;return this.seen.add(t),r===this.seen.size?!1:(this.stack[this.size++]=i,!0)},s.prototype.pop=function(){if(this.size!==0)return this.stack[--this.size]},Nr=s,Nr}var Cn;function oo(){if(Cn)return dr;Cn=1;var s=Xn(),t=ao(),i=Zn(),r=i.TraversalRecord,n=i.capitalize;function a(o,f,v,g){if(g=g||{},!s(o))throw new Error("graphology-traversal/dfs: expecting a graphology instance.");if(typeof v!="function")throw new Error("graphology-traversal/dfs: given callback is not a function.");if(o.order===0)return;var _=new t(o),b=o["forEach"+n(g.mode||"outbound")+"Neighbor"].bind(o),x;f===null?x=_.forEachNodeYetUnseen.bind(_):x=function(j){f=""+f,j(f,o.getNodeAttributes(f))};var T,re;function se(j,B){_.pushWith(j,new r(j,B,T.depth+1))}x(function(j,B){for(_.pushWith(j,new r(j,B,0));_.size!==0;)T=_.pop(),re=v(T.node,T.attributes,T.depth),re!==!0&&b(T.node,se)})}return dr.dfs=function(o,f,v){return a(o,null,f,v)},dr.dfsFromNode=a,dr}var Tn;function lo(){if(Tn)return Di;Tn=1;var s=so(),t=oo();return Di.bfs=s.bfs,Di.bfsFromNode=s.bfsFromNode,Di.dfs=t.dfs,Di.dfsFromNode=t.dfsFromNode,Di}var Lr=lo(),co=E('<span class="status-badge local svelte-1jef3w8">Local changes</span>'),uo=E('<span class="status-badge default svelte-1jef3w8">Default</span>'),fo=E('<button class="btn danger-outline svelte-1jef3w8">Reset</button>'),ho=E('<span class="no-link-warning svelte-1jef3w8">No link type for this pair</span>'),vo=E('<span class="orphan-badge svelte-1jef3w8"> </span>'),po=E('<div class="hover-row svelte-1jef3w8"><span class="hover-label svelte-1jef3w8">Row:</span> <span class="hover-value svelte-1jef3w8"> </span></div>'),go=E('<div class="hover-col svelte-1jef3w8"><span class="hover-label svelte-1jef3w8">Col:</span> <span class="hover-value svelte-1jef3w8"> </span></div>'),yo=E('<div class="matrix-no-pair svelte-1jef3w8"><p class="svelte-1jef3w8"> </p></div>'),_o=E('<span class="verbose-label svelte-1jef3w8"> </span>'),wo=E("<th><!></th>"),mo=E('<span class="verbose-label svelte-1jef3w8"> </span>'),bo=E('<span class="cell-marker direct svelte-1jef3w8"></span>'),ko=E("<span> </span>"),jo=E("<td><!></td>"),xo=E("<tr><td><!></td><!></tr>"),Eo=E('<table class="matrix svelte-1jef3w8"><thead class="svelte-1jef3w8"><tr class="svelte-1jef3w8"><th class="row-header svelte-1jef3w8"> </th><!></tr></thead><tbody class="svelte-1jef3w8"></tbody></table>'),So=E('<div class="matrix-toolbar svelte-1jef3w8"><div class="matrix-selectors svelte-1jef3w8"><div class="selector-group svelte-1jef3w8"><label class="svelte-1jef3w8">Rows:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Questions</option><option class="svelte-1jef3w8">Risks</option><option class="svelte-1jef3w8">Control Categories</option><option class="svelte-1jef3w8">Regulations</option><option class="svelte-1jef3w8">Controls</option></select></div> <span class="selector-arrow svelte-1jef3w8"></span> <div class="selector-group svelte-1jef3w8"><label class="svelte-1jef3w8">Columns:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Questions</option><option class="svelte-1jef3w8">Risks</option><option class="svelte-1jef3w8">Control Categories</option><option class="svelte-1jef3w8">Regulations</option><option class="svelte-1jef3w8">Controls</option></select></div> <!></div> <div class="matrix-options svelte-1jef3w8"><label class="verbose-toggle svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> <span class="svelte-1jef3w8">Verbose</span></label> <label><input type="checkbox" class="svelte-1jef3w8"/> <span class="svelte-1jef3w8">Unlinked only</span> <!></label> <input type="text" placeholder="Search rows..." class="search svelte-1jef3w8"/></div></div> <div><!> <!></div> <div class="matrix-container svelte-1jef3w8"><!></div>',1),Ao=E('<option class="svelte-1jef3w8"> </option>'),$o=E('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a question...</option><!></select>'),Go=E('<option class="svelte-1jef3w8"> </option>'),No=E('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a risk...</option><!></select>'),Lo=E('<option class="svelte-1jef3w8"> </option>'),Do=E('<select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select a control...</option><!></select>'),Co=E(`<div class="trace-placeholder svelte-1jef3w8"><p class="svelte-1jef3w8">Select a starting point above to visualize the dependency flow.</p> <p class="hint svelte-1jef3w8">You'll see questions  risks  controls  regulations as a visual tree.</p></div>`),To=E('<div class="trace-placeholder svelte-1jef3w8"><p class="svelte-1jef3w8">No data found for <strong class="svelte-1jef3w8"> </strong> </p></div>'),Ro=E('<button class="trace-link-btn svelte-1jef3w8" title="Edit link"></button>'),Io=E('<strong class="svelte-1jef3w8"> </strong> ',1),Oo=E('<span class="trace-children-count svelte-1jef3w8"> </span>'),Uo=E('<div class="trace-children svelte-1jef3w8"></div>'),zo=E('<div class="trace-row svelte-1jef3w8"><div><!> <span class="trace-node-type svelte-1jef3w8"> </span> <span class="trace-node-label svelte-1jef3w8"><!></span> <!></div> <!></div>'),qo=E("<span> </span>"),Po=E('<h4 class="svelte-1jef3w8"><!></h4> <p class="trace-detail-text svelte-1jef3w8"><!></p> <button class="btn edit-entity svelte-1jef3w8"> </button>',1),Mo=E('<p class="no-data svelte-1jef3w8">Item not found</p>'),Fo=E('<aside class="trace-detail-panel svelte-1jef3w8"><div class="trace-detail-header svelte-1jef3w8"><span> </span> <button class="close-btn svelte-1jef3w8"></button></div> <!></aside>'),Bo=E('<div class="trace-flow svelte-1jef3w8"><!> <div class="trace-stats svelte-1jef3w8"></div></div> <!>',1),Wo=E('<div class="trace-view svelte-1jef3w8"><div class="trace-toolbar svelte-1jef3w8"><div class="trace-start-selector svelte-1jef3w8"><label class="svelte-1jef3w8">Start from:</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Question</option><option class="svelte-1jef3w8">Risk</option><option class="svelte-1jef3w8">Control</option></select> <!></div></div> <div class="trace-canvas svelte-1jef3w8"><!></div></div>'),Ko=E('<div class="connection-banner svelte-1jef3w8">Connecting from: <strong class="svelte-1jef3w8"> </strong>  Click another item to link them <button class="svelte-1jef3w8">Cancel</button></div>'),Jo=E(`<div class="help-banner svelte-1jef3w8"><strong class="svelte-1jef3w8">How to link:</strong> Click an item to select it, then click <span class="plus-hint svelte-1jef3w8">+</span> on it (or another item) to create a connection.
				Questions trigger Risks. Risks link to Control Categories and Regulations.</div>`),Qo=E('<span class="dep-badge depends-on svelte-1jef3w8"> </span>'),Yo=E('<span class="dep-badge depended-by svelte-1jef3w8"> </span>'),Vo=E('<div class="node-deps svelte-1jef3w8"><!> <!></div>'),Ho=E('<span class="conn-indicator svelte-1jef3w8"> </span>'),Xo=E('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-id svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),Zo=E('<span class="conn-indicator svelte-1jef3w8"> </span>'),el=E('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),tl=E('<span class="conn-indicator svelte-1jef3w8"> </span>'),il=E('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Risk links"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <div class="node-meta svelte-1jef3w8"><span class="control-count svelte-1jef3w8" title="Controls in this category"> </span></div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),rl=E('<span class="conn-indicator svelte-1jef3w8"> </span>'),nl=E('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8" title="Connections"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),sl=E('<span class="subcategory svelte-1jef3w8" title="Subcategory"> </span>'),al=E('<span class="conn-indicator svelte-1jef3w8"> </span>'),ol=E('<span class="conn-indicator svelte-1jef3w8"> </span>'),ll=E('<div role="button" tabindex="0"><div class="node-header svelte-1jef3w8"><span class="node-code svelte-1jef3w8"> </span> <span class="link-count svelte-1jef3w8"> </span></div> <div class="node-text svelte-1jef3w8"> </div> <div class="node-meta svelte-1jef3w8"><span class="phases svelte-1jef3w8"> </span> <!></div> <!> <button class="connect-btn svelte-1jef3w8" title="Connect to...">+</button></div>'),dl=E('<div class="more-indicator svelte-1jef3w8"> </div>'),cl=E('<span class="option-tag svelte-1jef3w8"> </span>'),ul=E('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <div class="detail-options svelte-1jef3w8"><strong class="svelte-1jef3w8">Options:</strong> <!></div> <button class="btn edit-entity svelte-1jef3w8">Edit Question</button>',1),fl=E('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <p class="detail-desc svelte-1jef3w8"> </p> <button class="btn edit-entity svelte-1jef3w8">Edit Risk</button>',1),hl=E('<div class="control-item svelte-1jef3w8"><span class="control-name svelte-1jef3w8"> </span> <span class="control-phases svelte-1jef3w8"> </span></div>'),vl=E('<div class="control-item more svelte-1jef3w8"> </div>'),pl=E('<div class="detail-controls svelte-1jef3w8"><strong class="svelte-1jef3w8"> </strong> <div class="controls-list svelte-1jef3w8"><!> <!></div></div>'),gl=E('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <!>',1),yl=E('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span></div> <p class="detail-desc svelte-1jef3w8"> </p> <button class="btn edit-entity svelte-1jef3w8">Edit Regulation</button>',1),_l=E('<p class="detail-desc svelte-1jef3w8"> </p>'),wl=E('<span class="category-badge svelte-1jef3w8"> </span>'),ml=E('<span class="svelte-1jef3w8"> </span>'),bl=E('<span class="phase-badge svelte-1jef3w8"> </span>'),kl=E('<span class="tech-badge svelte-1jef3w8"> </span>'),jl=E('<h3 class="svelte-1jef3w8"> </h3> <div class="detail-meta svelte-1jef3w8"><span class="meta-item svelte-1jef3w8"> </span> <span class="meta-item svelte-1jef3w8"> </span></div> <!> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Category:</strong> <!></div> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Phases:</strong> <div class="phase-badges svelte-1jef3w8"></div></div> <div class="detail-section svelte-1jef3w8"><strong class="svelte-1jef3w8">Tech Types:</strong> <div class="tech-badges svelte-1jef3w8"></div></div> <button class="btn edit-control svelte-1jef3w8">Edit Control</button>',1),xl=E('<p class="no-connections svelte-1jef3w8">No connections yet. Click + on another node to create one.</p>'),El=E('<span class="conn-phases svelte-1jef3w8"> </span>'),Sl=E('<button class="connection-item svelte-1jef3w8"><span> </span> <span class="conn-direction svelte-1jef3w8"> </span> <span> </span> <!></button>'),Al=E('<div class="connection-list svelte-1jef3w8"></div>'),$l=E('<aside class="detail-panel svelte-1jef3w8"><div class="detail-header svelte-1jef3w8"><span> </span> <button class="close-btn svelte-1jef3w8"></button></div> <!> <div class="connections-section svelte-1jef3w8"><h4 class="svelte-1jef3w8"> </h4> <!></div> <button class="btn connect-action svelte-1jef3w8">+ Create Connection</button></aside>'),Gl=E('<!> <div class="graph-toolbar svelte-1jef3w8"><button> </button> <input type="text" placeholder="Search graph..." class="search svelte-1jef3w8"/></div> <div class="layout svelte-1jef3w8"><div class="columns svelte-1jef3w8"><div class="column questions svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">?</span> <h2 class="svelte-1jef3w8">Questions</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column risks svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">!</span> <h2 class="svelte-1jef3w8">Risks</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column mitigations svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">C</span> <h2 class="svelte-1jef3w8">Control Categories</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column regulations svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8">R</span> <h2 class="svelte-1jef3w8">Regulations</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"></div></div> <div class="column controls svelte-1jef3w8"><div class="column-header svelte-1jef3w8"><span class="column-icon svelte-1jef3w8"></span> <h2 class="svelte-1jef3w8">Controls</h2> <span class="count svelte-1jef3w8"> </span></div> <div class="nodes svelte-1jef3w8"><!> <!></div></div></div> <!></div>',1),Nl=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 1: Discovery <span class="phase-tag p1 svelte-1jef3w8">P1</span></label> <textarea placeholder="Guidance for Phase 1 (Discovery) - retrospective data, algorithm development..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 2: Validation <span class="phase-tag p2 svelte-1jef3w8">P2</span></label> <textarea placeholder="Guidance for Phase 2 (Validation) - prospective testing, controlled settings..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase 3: Deployment <span class="phase-tag p3 svelte-1jef3w8">P3</span></label> <textarea placeholder="Guidance for Phase 3 (Deployment) - live use, influences decisions..." rows="4" class="svelte-1jef3w8"></textarea></div>',1),Ll=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Code (e.g., "1.4")</label> <input type="text" placeholder="1.4" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Short Name</label> <input type="text" placeholder="Brief name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Full Name</label> <input type="text" placeholder="Full descriptive name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Domain</label> <input type="text" placeholder="Risk domain" class="svelte-1jef3w8"/></div> <div class="phase-guidance-section svelte-1jef3w8"><h4 class="svelte-1jef3w8">Phase-Specific Guidance</h4> <p class="guidance-hint svelte-1jef3w8">Prose that researchers can adapt for their IRB protocols</p> <!></div>',1),Dl=E('<p class="no-conditions svelte-1jef3w8">Always shown (no conditions)</p>'),Cl=E('<div class="condition-item svelte-1jef3w8"><span class="condition-question svelte-1jef3w8"> </span> <span class="condition-equals svelte-1jef3w8">=</span> <span class="condition-values svelte-1jef3w8"><!></span> <button class="remove-condition svelte-1jef3w8" title="Remove condition"></button></div>'),Tl=E('<div class="conditions-list svelte-1jef3w8"></div>'),Rl=E('<option class="svelte-1jef3w8"> </option>'),Il=E('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Ol=E('<div class="condition-values-select svelte-1jef3w8"><span class="when-label svelte-1jef3w8">when answer is:</span> <!></div> <button class="btn small svelte-1jef3w8">Add Condition</button>',1),Ul=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">ID (no spaces, lowercase)</label> <input type="text" placeholder="my-question-id" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Question Text</label> <textarea placeholder="Enter the question..." rows="3" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Type</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Yes/No</option><option class="svelte-1jef3w8">Single Select</option><option class="svelte-1jef3w8">Multi Select</option></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Category</label> <input type="text" placeholder="Category" class="svelte-1jef3w8"/></div> <div class="form-group show-conditions svelte-1jef3w8"><label class="svelte-1jef3w8">Show Conditions <span class="hint svelte-1jef3w8">(Only show this question when...)</span></label> <!> <div class="add-condition svelte-1jef3w8"><select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select dependency question...</option><!></select> <!></div></div>',1),zl=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Citation (e.g., "45 CFR 46.111(a)(1)")</label> <input type="text" placeholder="45 CFR 46.111(a)(1)" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Description</label> <textarea placeholder="Description of the regulation..." rows="3" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Framework</label> <input type="text" placeholder="e.g., Common Rule, HIPAA" class="svelte-1jef3w8"/></div>',1),ql=E('<option class="svelte-1jef3w8"> </option>'),Pl=E('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Ml=E('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Fl=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">ID</label> <input type="text" placeholder="e.g., A0001_Source2024" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Name</label> <input type="text" placeholder="Control name" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Description</label> <textarea placeholder="Description of the control..." rows="4" class="svelte-1jef3w8"></textarea></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Source</label> <input type="text" placeholder="e.g., NIST2024, Bengio2025" class="svelte-1jef3w8"/></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Subcategory</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Select subcategory...</option><!></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Phases</label> <div class="checkbox-group svelte-1jef3w8"></div></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Technology Types</label> <div class="checkbox-group tech-types svelte-1jef3w8"><label class="checkbox-label all-types svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> All Types</label> <!></div></div>',1),Bl=E('<button class="btn danger svelte-1jef3w8">Delete</button>'),Wl=E('<div class="svelte-1jef3w8"></div>'),Kl=E('<div class="modal-overlay svelte-1jef3w8" role="dialog" aria-modal="true"><div class="modal entity-editor svelte-1jef3w8"><div class="modal-header svelte-1jef3w8"><h3 class="svelte-1jef3w8"> </h3> <button class="close-btn svelte-1jef3w8"></button></div> <div class="modal-body svelte-1jef3w8"><!></div> <div class="modal-footer svelte-1jef3w8"><!> <div class="footer-right svelte-1jef3w8"><button class="btn svelte-1jef3w8">Cancel</button> <button class="btn primary svelte-1jef3w8">Save</button></div></div></div></div>'),Jl=E('<button><span> </span> <span class="entity-name svelte-1jef3w8"> </span> <span class="entity-category svelte-1jef3w8"> </span></button>'),Ql=E('<div class="no-entities svelte-1jef3w8">No matching items found</div>'),Yl=E('<div class="entity-selector svelte-1jef3w8"><div class="entity-selector-header svelte-1jef3w8"><span class="selector-label svelte-1jef3w8"> </span> <button class="close-selector svelte-1jef3w8"></button></div> <div class="entity-selector-toolbar svelte-1jef3w8"><input type="text" placeholder="Search..." class="selector-search svelte-1jef3w8"/> <select class="selector-sort svelte-1jef3w8"><option class="svelte-1jef3w8">Sort: Name</option><option class="svelte-1jef3w8">Sort: Code</option><option class="svelte-1jef3w8">Sort: Category</option></select></div> <div class="entity-selector-list svelte-1jef3w8"></div></div>'),Vl=E('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Hl=E('<label class="checkbox-label svelte-1jef3w8"><input type="checkbox" class="svelte-1jef3w8"/> </label>'),Xl=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Trigger when answer is:</label> <div class="answer-checkboxes svelte-1jef3w8"></div></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Logic (when multiple triggers for same risk)</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">OR - Any trigger activates</option><option class="svelte-1jef3w8">AND - All triggers required</option></select></div>',1),Zl=E('<div class="guidance-input svelte-1jef3w8"><span class="guidance-phase svelte-1jef3w8"> </span> <textarea rows="2" class="svelte-1jef3w8"></textarea></div>'),ed=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Phase-specific Guidance</label> <!></div>'),td=E('<div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Note</label> <input type="text" placeholder="Brief note about this regulatory link..." class="svelte-1jef3w8"/></div>'),id=E('<button class="btn danger svelte-1jef3w8">Delete Link</button>'),rd=E('<div class="modal-overlay svelte-1jef3w8" role="dialog" aria-modal="true"><div class="modal link-editor svelte-1jef3w8"><div class="modal-header svelte-1jef3w8"><h3 class="svelte-1jef3w8"> </h3> <button class="close-btn svelte-1jef3w8"></button></div> <div class="modal-body svelte-1jef3w8"><div class="link-preview svelte-1jef3w8"><button title="Click to change"> <span class="change-icon svelte-1jef3w8"></span></button> <span class="link-arrow svelte-1jef3w8"></span> <button title="Click to change"> <span class="change-icon svelte-1jef3w8"></span></button></div> <!> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Link Type</label> <select class="svelte-1jef3w8"><option class="svelte-1jef3w8">Trigger (Question triggers Risk)</option><option class="svelte-1jef3w8">Dependency (Question depends on Question)</option><option class="svelte-1jef3w8">Control Category (Risk linked to Category)</option><option class="svelte-1jef3w8">Regulation (Risk linked to Regulation)</option><option class="svelte-1jef3w8">Control (Risk linked to Control)</option><option class="svelte-1jef3w8">Implementation (Category implements Control)</option><option class="svelte-1jef3w8">Custom</option></select></div> <div class="form-group svelte-1jef3w8"><label class="svelte-1jef3w8">Applicable Phases</label> <div class="phase-checkboxes svelte-1jef3w8"></div></div> <!> <!> <!></div> <div class="modal-footer svelte-1jef3w8"><!> <div class="footer-right svelte-1jef3w8"><button class="btn svelte-1jef3w8">Cancel</button> <button class="btn primary svelte-1jef3w8">Save</button></div></div></div></div>'),nd=E('<div class="admin svelte-1jef3w8"><header class="header svelte-1jef3w8"><div class="header-left svelte-1jef3w8"><h1 class="svelte-1jef3w8">Traceability</h1> <div class="view-tabs svelte-1jef3w8"><button>Matrix</button> <button>Trace</button> <button>Graph</button></div></div> <div class="header-right svelte-1jef3w8"><!> <!> <input type="file" accept=".json" style="display: none" class="svelte-1jef3w8"/> <button class="btn svelte-1jef3w8">Import</button> <button class="btn primary svelte-1jef3w8">Export</button> <!></div></header> <!></div> <!> <!>',1);function _d(s,t){Rn(t,!0);const i="ai-oversight-traceability",r="ai-oversight-version",n=t.data.traceability.version||"2.0.0";function a(){{if(localStorage.getItem(r)!==n)return localStorage.removeItem(i),localStorage.setItem(r,n),JSON.parse(JSON.stringify(t.data.traceability.links));const h=localStorage.getItem(i);if(h)try{return JSON.parse(h)}catch(p){console.error("Failed to parse saved links:",p)}}return JSON.parse(JSON.stringify(t.data.traceability.links))}let o=Ze(tr(a())),f=Ze(tr(localStorage.getItem(i)!==null));vn(()=>{e(o)&&(localStorage.setItem(i,JSON.stringify(e(o))),A(f,!0))});function v(){confirm("Reset to default? This will discard all local changes.")&&(A(o,JSON.parse(JSON.stringify(t.data.traceability.links)),!0),localStorage.removeItem(i),A(f,!1))}let g;function _(){g?.click()}function b(l){const h=l.target.files?.[0];if(!h)return;const p=new FileReader;p.onload=w=>{try{const G=JSON.parse(w.target?.result);G.links?(A(o,G.links,!0),A(f,!0)):Array.isArray(G)?(A(o,G,!0),A(f,!0)):alert("Invalid file format. Expected traceability JSON.")}catch(G){alert("Failed to parse file: "+G)}},p.readAsText(h)}const x=[{id:"phase-1",name:"Phase 1: Discovery",short:"P1"},{id:"phase-2",name:"Phase 2: Validation",short:"P2"},{id:"phase-3",name:"Phase 3: Deployment",short:"P3"}];let T=Ze("matrix"),re=Ze("all"),se=Ze("all"),j=Ze(null),B=Ze(null),gt=Ze(!1),R=Ze(null),D=Ze(""),$=Ze(!1),U=Ze("question"),K=Ze("risk"),le=Ze(!1),De=Ze(null),ge=Ze(null),Ot=Ze(!1);function ci(l,h){const p={"question-risk":"trigger","risk-mitigation":"mitigation","risk-regulation":"regulation","risk-control":"control","mitigation-control":"implementation","question-question":"dependency"};return p[`${l}-${h}`]||p[`${h}-${l}`]||null}function Ji(l,h){const p={trigger:["question","risk"],mitigation:["risk","mitigation"],regulation:["risk","regulation"],control:["risk","control"],implementation:["mitigation","control"],dependency:["question","question"]},w=ci(l,h);if(!w||!p[w])return!1;const[G,ye]=p[w];return l===ye&&h===G}let Ut=M(()=>e(re)==="all"?e(o):e(o).filter(l=>!l.phases||l.phases.includes(e(re)))),ji=M(()=>{const l=new ot({type:"directed",multi:!1,allowSelfLoops:!1});for(const h of e(Ut)){const p=`${h.from.entity}:${h.from.id}`,w=`${h.to.entity}:${h.to.id}`;l.hasNode(p)||l.addNode(p,{type:h.from.entity,id:h.from.id}),l.hasNode(w)||l.addNode(w,{type:h.to.entity,id:h.to.id});const G=`${p}->${w}`;l.hasEdge(G)||l.addEdgeWithKey(G,p,w,{link:h})}return l});function es(l,h,p,w){return e(Ut).find(G=>G.from.entity===l&&G.from.id===h&&G.to.entity===p&&G.to.id===w||G.from.entity===p&&G.from.id===w&&G.to.entity===l&&G.to.id===h)}function Ir(l,h){if(!e(ji).hasNode(l))return!1;if(l===h)return!0;let p=!1;return Lr.bfsFromNode(e(ji),l,w=>w===h?(p=!0,!0):!1,{mode:"outbound"}),p}function ts(l,h){if(!e(ji).hasNode(l)||!e(ji).hasNode(h))return!1;const p=new Set;Lr.bfsFromNode(e(ji),l,G=>(p.add(G),!1),{mode:"inbound"});let w=!1;return Lr.bfsFromNode(e(ji),h,G=>p.has(G)?(w=!0,!0):!1,{mode:"inbound"}),w}function xi(l,h,p,w){const G=es(l,h,p,w);if(G)return{...G,isDirect:!0};const ye=`${l}:${h}`,J=`${p}:${w}`;return Ir(ye,J)?{isDirect:!1,isTransitive:!0,direction:"downstream"}:Ir(J,ye)?{isDirect:!1,isTransitive:!0,direction:"upstream"}:ts(ye,J)?{isDirect:!1,isTransitive:!0,direction:"sibling"}:null}function is(l,h,p,w){const G=xi(l,h,p,w);if(G?.isDirect){const{isDirect:ye,...J}=G;A(R,JSON.parse(JSON.stringify(J)),!0),A(gt,!0)}else G?.isTransitive?confirm(`These are transitively connected via the traceability chain.

Create a direct link between them?`)&&Or(l,h,p,w):Or(l,h,p,w)}function Or(l,h,p,w){const G=ci(l,p)||"custom",ye=Ji(l,p),J=ye?p:l,Ee=ye?w:h,C=ye?l:p,q=ye?h:w,ke={id:`link-${Date.now()}`,type:G,from:{entity:J,id:Ee},to:{entity:C,id:q},phases:["phase-1","phase-2","phase-3"]};G==="trigger"?(ke.answerValues=[],ke.logic="OR"):G==="mitigation"&&(ke.guidance={}),A(R,ke,!0),A(gt,!0)}let vi=Ze("question"),Kt=Ze(""),yt=Ze(null),Qi=M(()=>{if(!e(Kt))return null;function l(C){return e(St).filter(q=>q.showIf&&Object.keys(q.showIf).includes(C)).map(q=>q.id)}function h(C){return e(Ut).filter(q=>q.type==="trigger"&&q.from.entity==="question"&&q.from.id===C).map(q=>({risk:e(Ct).find(ke=>ke.id===q.to.id),link:q})).filter(q=>q.risk)}function p(C){return e(Ut).filter(q=>q.type==="mitigation"&&q.from.entity==="risk"&&q.from.id===C).map(q=>({mitigation:e(ei).find(ke=>ke.id===q.to.id),link:q})).filter(q=>q.mitigation)}function w(C){return e(Ut).filter(q=>q.type==="regulation"&&q.from.entity==="risk"&&q.from.id===C).map(q=>({regulation:e(si).find(ke=>ke.id===q.to.id),link:q})).filter(q=>q.regulation)}function G(C){return e(Tt).filter(q=>q.subcategoryId===C).slice(0,5)}function ye(C,q,ke){if(ke.has(C))return null;ke.add(C);const pe=e(St).find(st=>st.id===C);if(!pe)return null;const Ae={type:"question",id:pe.id,label:pe.text,shortLabel:pe.id,children:[],depth:q},ht=l(C);for(const st of ht){const kt=ye(st,q+1,ke);kt&&Ae.children.push(kt)}const lt=h(C);for(const{risk:st,link:kt}of lt)Ae.children.push(J(st,kt,q+1));return Ae}function J(C,q,ke){const pe={type:"risk",id:C.id,label:C.shortName,shortLabel:C.code,children:[],link:q,depth:ke},Ae=p(C.id);for(const{mitigation:lt,link:st}of Ae)pe.children.push(Ee(lt,st,ke+1));const ht=w(C.id);for(const{regulation:lt,link:st}of ht)pe.children.push({type:"regulation",id:lt.id,label:lt.description,shortLabel:lt.citation.split("(")[0].trim(),children:[],link:st,depth:ke+1});return pe}function Ee(C,q,ke){const pe={type:"mitigation",id:C.id,label:C.name,shortLabel:C.code,children:[],link:q,depth:ke},Ae=G(C.id);for(const lt of Ae)pe.children.push({type:"control",id:lt.id,label:lt.name,shortLabel:lt.id.split("_")[0],children:[],depth:ke+1});const ht=e(Tt).filter(lt=>lt.subcategoryId===C.id).length;return ht>5&&pe.children.push({type:"more",id:`more-${C.id}`,label:`+${ht-5} more controls`,shortLabel:`+${ht-5}`,children:[],depth:ke+1,isPlaceholder:!0}),pe}if(e(vi)==="question")return ye(e(Kt),0,new Set);if(e(vi)==="risk"){const C=e(Ct).find(Ae=>Ae.id===e(Kt));if(!C)return null;const q={type:"risk",id:C.id,label:C.shortName,shortLabel:C.code,children:[],depth:0},ke=p(C.id);for(const{mitigation:Ae,link:ht}of ke)q.children.push(Ee(Ae,ht,1));const pe=w(C.id);for(const{regulation:Ae,link:ht}of pe)q.children.push({type:"regulation",id:Ae.id,label:Ae.description,shortLabel:Ae.citation.split("(")[0].trim(),children:[],link:ht,depth:1});return q}else{const C=e(Tt).find(pe=>pe.id===e(Kt));if(!C)return null;const q=e(ei).find(pe=>pe.id===C.subcategoryId),ke={type:"control",id:C.id,label:C.name,shortLabel:C.id.split("_")[0],children:[],depth:0};if(q){const pe=e(Ut).filter(Ae=>Ae.type==="mitigation"&&Ae.to.id===q.id).map(Ae=>({risk:e(Ct).find(ht=>ht.id===Ae.from.id),link:Ae})).filter(Ae=>Ae.risk);for(const{risk:Ae}of pe.slice(0,5))ke.children.push({type:"risk",id:Ae.id,label:Ae.shortName,shortLabel:Ae.code,children:[],depth:1})}return ke}}),rs=M(()=>{const l=new Map;if(!e(Qi))return l;function h(p){const w=l.get(p.type)||[];w.push(p),l.set(p.type,w),p.children.forEach(h)}return h(e(Qi)),l}),Zt=Ze(null),pi=Ze(""),Oi=Ze("name"),Gt=Ze("risks"),Ei=Ze(!1),P=Ze(null),Yi=Ze(!1),gi=Ze(""),Jt=Ze(tr([]));const Ur="ai-oversight-entities";function ns(){{const l=localStorage.getItem(Ur);if(l)try{return JSON.parse(l)}catch(h){console.error("Failed to parse saved entities:",h)}}return null}let jt=Ze(tr(ns()||{questions:null,risks:null,regulations:null,controls:null})),ss=M(()=>e(jt).questions!==null||e(jt).risks!==null||e(jt).regulations!==null||e(jt).controls!==null);vn(()=>{e(ss)&&localStorage.setItem(Ur,JSON.stringify(e(jt)))});let zr=M(()=>{const l=[];for(const h of t.data.questionCategories)for(const p of h.questions){let w=[];p.type==="yes-no"?w=[{value:"yes",label:"Yes"},{value:"no",label:"No"}]:p.options&&(w=p.options.map(G=>({value:G.value,label:G.label}))),l.push({id:p.id,text:p.question,type:p.type,category:h.name,options:w,showIf:p.showIf})}return l}),qr=M(()=>t.data.subdomains.map(l=>({id:l.id,code:l.code,name:l.name,shortName:l.shortName,domain:l.domain,phaseGuidance:l.phaseGuidance||{"phase-1":"","phase-2":"","phase-3":""}}))),as=M(()=>{const l=[];for(const h of t.data.controlSubcategories){const p=t.data.controlCategories.find(w=>w.id===h.categoryId);l.push({id:h.id,code:h.code,name:h.name,category:p?.name||h.categoryId})}return l}),Pr=M(()=>{const l=[];for(const[h,p]of Object.entries(t.data.regulations))for(const w of p.sections)l.push({id:w.id,citation:w.citation,description:w.description,framework:p.title});return l}),Mr=M(()=>t.data.controls.map(l=>({id:l.id,name:l.name,description:l.description,source:l.source,subcategoryId:l.subcategoryId,phases:l.phases||["phase-1","phase-2","phase-3"],techTypes:l.techTypes||["all"]}))),St=M(()=>e(jt).questions??e(zr)),Ct=M(()=>e(jt).risks??e(qr)),ei=M(()=>e(as)),si=M(()=>e(jt).regulations??e(Pr)),Tt=M(()=>e(jt).controls??e(Mr));const ai={question:{label:"Questions",shortLabel:"Q",getAll:()=>e(St).filter(l=>!["phase","model-types"].includes(l.id)),getLabel:l=>l.text,getShortLabel:l=>l.id,searchText:l=>l.text+" "+l.id},risk:{label:"Risks",shortLabel:"Risk",getAll:()=>e(Ct),getLabel:l=>l.shortName,getShortLabel:l=>l.code,searchText:l=>l.shortName+" "+l.name+" "+l.code},mitigation:{label:"Control Categories",shortLabel:"Mit",getAll:()=>e(ei),getLabel:l=>l.name,getShortLabel:l=>l.code,searchText:l=>l.name+" "+l.code},regulation:{label:"Regulations",shortLabel:"Reg",getAll:()=>e(si),getLabel:l=>l.citation,getShortLabel:l=>l.citation.split("(")[0].trim(),searchText:l=>l.citation+" "+l.description},control:{label:"Controls",shortLabel:"Ctrl",getAll:()=>{let l=e(Tt);return e(re)!=="all"&&(l=l.filter(h=>h.phases?.includes(e(re)))),e(se)!=="all"&&(l=l.filter(h=>h.techTypes?.includes("all")||h.techTypes?.includes(e(se)))),l.slice(0,100)},getLabel:l=>l.name,getShortLabel:l=>l.id.split("_")[0],searchText:l=>l.name+" "+l.id}};let ur=M(()=>{const l=ai[e(U)];let h=l.getAll();if(e(D)){const p=e(D).toLowerCase();h=h.filter(w=>l.searchText(w).toLowerCase().includes(p))}return e(Ot)&&(h=h.filter(p=>!e(Ui).some(G=>xi(e(U),p.id,e(K),G.id)))),h}),Ui=M(()=>{let h=ai[e(K)].getAll();return e(Ot)&&(h=h.filter(p=>!ai[e(U)].getAll().some(G=>xi(e(U),G.id,e(K),p.id)))),h}),Fr=M(()=>!0),zi=M(()=>{if(!e(De)&&!e(ge))return null;let l="",h="";if(e(De)){const p=ai[e(U)],w=p.getAll().find(G=>G.id===e(De));l=w?`${p.getShortLabel(w)}: ${p.getLabel(w)}`:e(De)}if(e(ge)){const p=ai[e(K)],w=p.getAll().find(G=>G.id===e(ge));h=w?`${p.getShortLabel(w)}: ${p.getLabel(w)}`:e(ge)}return{row:l,col:h}}),Si=M(()=>{let l=e(Tt);return e(re)!=="all"&&(l=l.filter(h=>h.phases?.includes(e(re)))),e(se)!=="all"&&(l=l.filter(h=>h.techTypes?.includes("all")||h.techTypes?.includes(e(se)))),l}),Br=M(()=>{const l=fi(e(St),h=>h.text,"question");return!e($)||!e(j)?l.length:l.filter(h=>{const p=e(j)?.type==="question"&&e(j)?.id===h.id,w=e(yi).has(`question:${h.id}`);return p||w}).length}),Wr=M(()=>{const l=fi(e(Ct),h=>h.shortName+" "+h.name,"risk");return!e($)||!e(j)?l.length:l.filter(h=>{const p=e(j)?.type==="risk"&&e(j)?.id===h.id,w=e(yi).has(`risk:${h.id}`);return p||w}).length}),Kr=M(()=>{const l=fi(e(ei),h=>h.name,"mitigation");return!e($)||!e(j)?l.length:l.filter(h=>{const p=e(j)?.type==="mitigation"&&e(j)?.id===h.id,w=e(yi).has(`mitigation:${h.id}`);return p||w}).length}),Jr=M(()=>{const l=fi(e(si),h=>h.citation+" "+h.description,"regulation");return!e($)||!e(j)?l.length:l.filter(h=>{const p=e(j)?.type==="regulation"&&e(j)?.id===h.id,w=e(yi).has(`regulation:${h.id}`);return p||w}).length}),Qr=M(()=>{const l=e(Si).slice(0,50);return!e($)||!e(j)?Math.min(e(Si).length,50):l.filter(h=>{const p=e(j)?.type==="control"&&e(j)?.id===h.id,w=e(yi).has(`control:${h.id}`);return p||w}).length});function os(l){const h=e(Tt).find(p=>p.id===l);return h?e(Ut).filter(p=>p.type==="mitigation"&&p.to.entity==="mitigation"&&p.to.id===h.subcategoryId).length:0}let fr=M(()=>{const l={rows:0,cols:0,total:0};if(!e(Fr))return l;const h=ai[e(U)].getAll(),p=ai[e(K)].getAll();return h.forEach(w=>{p.some(ye=>xi(e(U),w.id,e(K),ye.id))||l.rows++}),p.forEach(w=>{h.some(ye=>xi(e(U),ye.id,e(K),w.id))||l.cols++}),l.total=l.rows+l.cols,l});function ls(l,h){return e(Ut).filter(p=>p.from.entity===l&&p.from.id===h||p.to.entity===l&&p.to.id===h)}let yi=M(()=>{if(!e(j))return new Set;const l=new Set,h=e(j).type,p=(J,Ee,C=!1)=>{J===h&&!C||l.add(`${J}:${Ee}`)};if(l.add(`${e(j).type}:${e(j).id}`),h==="question"){const J=e(St).find(Ee=>Ee.id===e(j).id);if(J?.showIf)for(const Ee of Object.keys(J.showIf))l.add(`question:${Ee}`);for(const Ee of e(St))Ee.showIf&&e(j).id in Ee.showIf&&l.add(`question:${Ee.id}`)}if(h==="control"){const J=e(Tt).find(Ee=>Ee.id===e(j).id);if(J?.subcategoryId){const Ee=e(Tt).filter(C=>C.subcategoryId===J.subcategoryId);for(const C of Ee)l.add(`control:${C.id}`)}}const w=e(Ut).filter(J=>J.from.entity===e(j).type&&J.from.id===e(j).id||J.to.entity===e(j).type&&J.to.id===e(j).id),G=[],ye=[];if(e(j).type==="control"){const J=e(Tt).find(Ee=>Ee.id===e(j).id);J?.subcategoryId&&(p("mitigation",J.subcategoryId),ye.push(J.subcategoryId))}for(const J of w)J.from.entity===e(j).type&&J.from.id===e(j).id?(p(J.to.entity,J.to.id),J.to.entity==="risk"&&G.push(J.to.id),J.to.entity==="mitigation"&&ye.push(J.to.id)):(p(J.from.entity,J.from.id),J.from.entity==="risk"&&G.push(J.from.id),J.from.entity==="mitigation"&&ye.push(J.from.id));for(const J of G){const Ee=e(Ut).filter(C=>C.from.entity==="risk"&&C.from.id===J||C.to.entity==="risk"&&C.to.id===J);for(const C of Ee)C.from.entity==="risk"&&C.from.id===J?(p(C.to.entity,C.to.id),C.to.entity==="mitigation"&&ye.push(C.to.id)):p(C.from.entity,C.from.id)}for(const J of ye){if(h!=="control"){const C=e(Tt).filter(q=>q.subcategoryId===J);for(const q of C)p("control",q.id)}const Ee=e(Ut).filter(C=>C.type==="mitigation"&&C.to.entity==="mitigation"&&C.to.id===J);for(const C of Ee){const q=C.from.id;p("risk",q);const ke=e(Ut).filter(pe=>pe.type==="regulation"&&pe.from.entity==="risk"&&pe.from.id===q);for(const pe of ke)p(pe.to.entity,pe.to.id)}}return l});function qi(l,h){return e(j)?e(yi).has(`${l}:${h}`):!1}function Ai(l,h){return e(j)?e(Ut).find(p=>p.from.entity===e(j).type&&p.from.id===e(j).id&&p.to.entity===l&&p.to.id===h||p.to.entity===e(j).type&&p.to.id===e(j).id&&p.from.entity===l&&p.from.id===h||p.from.entity===l&&p.from.id===h&&p.to.entity===e(j).type&&p.to.id===e(j).id||p.to.entity===l&&p.to.id===h&&p.from.entity===e(j).type&&p.from.id===e(j).id):null}function ds(l,h,p,w){return e(o).find(G=>G.from.entity===l&&G.from.id===h&&G.to.entity===p&&G.to.id===w||G.from.entity===p&&G.from.id===w&&G.to.entity===l&&G.to.id===h)}function ii(l,h){if(e(B))if(e(B).type===l&&e(B).id===h)A(B,null);else{const p=ds(e(B).type,e(B).id,l,h);if(p)A(R,JSON.parse(JSON.stringify(p)),!0),A(gt,!0);else{let w="custom";e(B).type==="question"&&l==="risk"||e(B).type==="risk"&&l==="question"?w="trigger":e(B).type==="question"&&l==="question"?w="dependency":e(B).type==="risk"&&l==="mitigation"||e(B).type==="mitigation"&&l==="risk"?w="mitigation":e(B).type==="risk"&&l==="regulation"||e(B).type==="regulation"&&l==="risk"?w="regulation":e(B).type==="risk"&&l==="control"||e(B).type==="control"&&l==="risk"?w="control":(e(B).type==="mitigation"&&l==="control"||e(B).type==="control"&&l==="mitigation")&&(w="implementation");let G,ye;w==="dependency"?(G=e(B),ye={type:l,id:h}):e(B).type==="question"||e(B).type==="risk"?(G=e(B),ye={type:l,id:h}):(G={type:l,id:h},ye=e(B)),A(R,{id:`link-${Date.now()}`,type:w,from:{entity:G.type,id:G.id},to:{entity:ye.type,id:ye.id},phases:["phase-1","phase-2","phase-3"],answerValues:[],logic:"OR",guidance:{}},!0),A(gt,!0)}A(B,null)}else{const p=Ai(l,h);if(p){A(R,JSON.parse(JSON.stringify(p)),!0),A(gt,!0);return}e(j)?.type===l&&e(j)?.id===h?A(j,null):A(j,{type:l,id:h},!0)}}function $i(l,h,p){p.stopPropagation(),A(B,{type:l,id:h},!0),A(j,null)}function cs(){if(!e(R))return;const l=e(o).findIndex(h=>h.id===e(R).id);l>=0?e(o)[l]=e(R):A(o,[...e(o),e(R)],!0),A(gt,!1),A(R,null)}function us(){e(R)&&(A(o,e(o).filter(l=>l.id!==e(R).id),!0),A(gt,!1),A(R,null))}function Vi(l){return e(St).find(h=>h.id===l)}function Yr(l){return e(Ct).find(h=>h.id===l)}function Vr(l){return e(ei).find(h=>h.id===l)}function Hr(l){return e(si).find(h=>h.id===l)}function fs(l){return e(Tt).find(h=>h.id===l)}function Xr(l){return t.data.controlSubcategories.find(h=>h.id===l)}function hs(l){const h=Vi(l),p=h?.showIf?Object.keys(h.showIf):[],w=e(St).filter(G=>G.showIf&&l in G.showIf).map(G=>G.id);return{dependsOn:p,dependedBy:w}}function vs(l,h){return h==="trigger"?l==="from"?e(St).map(p=>({id:p.id,name:p.text,code:p.id,category:p.category,type:"question"})):e(Ct).map(p=>({id:p.id,name:p.shortName,code:p.code,category:p.domain,type:"risk"})):h==="mitigation"?l==="from"?e(Ct).map(p=>({id:p.id,name:p.shortName,code:p.code,category:p.domain,type:"risk"})):e(ei).map(p=>({id:p.id,name:p.name,code:p.code,category:p.category,type:"mitigation"})):h==="regulation"?l==="from"?e(Ct).map(p=>({id:p.id,name:p.shortName,code:p.code,category:p.domain,type:"risk"})):e(si).map(p=>({id:p.id,name:p.description,code:p.citation,category:p.framework,type:"regulation"})):[]}let ps=M(()=>{if(!e(Zt)||!e(R))return[];const l=vs(e(Zt),e(R).type);let h=l;if(e(pi)){const p=e(pi).toLowerCase();h=l.filter(w=>w.name.toLowerCase().includes(p)||w.code.toLowerCase().includes(p)||w.category.toLowerCase().includes(p))}return h.sort((p,w)=>e(Oi)==="name"?p.name.localeCompare(w.name):e(Oi)==="code"?p.code.localeCompare(w.code):e(Oi)==="category"?p.category.localeCompare(w.category):0),h});function gs(l){!e(R)||!e(Zt)||(e(R)[e(Zt)]={entity:l.type,id:l.id},A(Zt,null),A(pi,""))}function Zr(l){e(jt)[l]===null&&(l==="questions"?e(jt).questions=JSON.parse(JSON.stringify(e(zr))):l==="risks"?e(jt).risks=JSON.parse(JSON.stringify(e(qr))):l==="regulations"?e(jt).regulations=JSON.parse(JSON.stringify(e(Pr))):l==="controls"&&(e(jt).controls=JSON.parse(JSON.stringify(e(Mr)))))}function ui(l){A(Yi,!1),A(P,JSON.parse(JSON.stringify(l)),!0),A(gi,""),A(Jt,[],!0),A(Ei,!0)}function ys(){if(!e(P))return;e(Yi)&&!e(P).id&&(e(P).id=`${e(Gt).slice(0,-1)}-${Date.now()}`),Zr(e(Gt));const l=e(jt)[e(Gt)],h=l.findIndex(p=>p.id===e(P).id);h>=0?l[h]=e(P):l.push(e(P)),A(jt,{...e(jt)},!0),A(Ei,!1),A(P,null)}function _s(){e(P)&&confirm("Delete this entity? This cannot be undone.")&&(Zr(e(Gt)),e(jt)[e(Gt)]=e(jt)[e(Gt)].filter(l=>l.id!==e(P).id),A(jt,{...e(jt)},!0),A(Ei,!1),A(P,null))}function Hi(l,h){return l==="question"?Vi(h)?.text||h:l==="risk"?Yr(h)?.shortName||h:l==="mitigation"?Vr(h)?.name||h:l==="regulation"&&Hr(h)?.citation||h}function ws(){const l={$schema:"./schemas/traceability.schema.json",version:"1.0.0",lastUpdated:new Date().toISOString().split("T")[0],description:"Graph-based traceability",nodes:t.data.traceability.nodes,links:e(o)},h=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),p=URL.createObjectURL(h),w=document.createElement("a");w.href=p,w.download="traceability.json",w.click(),URL.revokeObjectURL(p)}function fi(l,h,p){if(!e(D))return l;const w=e(D).toLowerCase();return l.filter(G=>!!(h(G).toLowerCase().includes(w)||G.id.toLowerCase().includes(w)||e(j)&&p&&e(yi).has(`${p}:${G.id}`)))}function Pi(l,h){return e(Ut).filter(p=>p.from.entity===l&&p.from.id===h||p.to.entity===l&&p.to.id===h).length}let ae=M(()=>{if(!e(j))return null;const{type:l,id:h}=e(j),p=ls(l,h);if(l==="question"){const w=Vi(h);return{type:l,item:w,connections:p}}else if(l==="risk"){const w=Yr(h);return{type:l,item:w,connections:p}}else if(l==="mitigation"){const w=Vr(h);return{type:l,item:w,connections:p}}else if(l==="regulation"){const w=Hr(h);return{type:l,item:w,connections:p}}else if(l==="control"){const w=fs(h);return{type:l,item:w,connections:p}}return null});var en=nd();Ts("1jef3w8",l=>{Ds(()=>{Cs.title="Traceability Admin - AI Oversight Tools"})});var hr=oe(en),vr=c(hr),pr=c(vr),tn=u(c(pr),2),gr=c(tn);gr.__click=()=>A(T,"matrix");let rn;var yr=u(gr,2);yr.__click=()=>A(T,"trace");let nn;var sn=u(yr,2);sn.__click=()=>A(T,"graph");let an;d(tn),d(pr);var on=u(pr,2),ln=c(on);{var ms=l=>{var h=co();y(l,h)},bs=l=>{var h=uo();y(l,h)};I(ln,l=>{e(f)?l(ms):l(bs,!1)})}var dn=u(ln,2);Bs(dn,{get phases(){return x},get modelTypes(){return t.data.modelTypes},get selectedPhase(){return e(re)},get selectedTechType(){return e(se)},onPhaseChange:l=>A(re,l,!0),onTechTypeChange:l=>A(se,l,!0)});var _r=u(dn,2);_r.__change=b,zs(_r,l=>g=l,()=>g);var cn=u(_r,2);cn.__click=_;var un=u(cn,2);un.__click=ws;var ks=u(un,2);{var js=l=>{var h=fo();h.__click=v,y(l,h)};I(ks,l=>{e(f)&&l(js)})}d(on),d(vr);var xs=u(vr,2);{var Es=l=>{var h=So(),p=oe(h),w=c(p),G=c(w),ye=u(c(G),2),J=c(ye);J.value=J.__value="question";var Ee=u(J);Ee.value=Ee.__value="risk";var C=u(Ee);C.value=C.__value="mitigation";var q=u(C);q.value=q.__value="regulation";var ke=u(q);ke.value=ke.__value="control",d(ye),d(G);var pe=u(G,4),Ae=u(c(pe),2),ht=c(Ae);ht.value=ht.__value="question";var lt=u(ht);lt.value=lt.__value="risk";var st=u(lt);st.value=st.__value="mitigation";var kt=u(st);kt.value=kt.__value="regulation";var Qt=u(kt);Qt.value=Qt.__value="control",d(Ae),d(pe);var vt=u(pe,2);{var xt=z=>{var X=ho();y(z,X)};I(vt,z=>{e(Fr)||z(xt)})}d(w);var Qe=u(w,2),it=c(Qe),_t=c(it);bt(_t),ir(2),d(it);var dt=u(it,2);let rt;var Ce=c(dt);bt(Ce);var Ge=u(Ce,4);{var Ke=z=>{var X=vo(),ve=c(X,!0);d(X),N(()=>k(ve,e(fr).total)),y(z,X)};I(Ge,z=>{e(fr).total>0&&z(Ke)})}d(dt);var qe=u(dt,2);bt(qe),d(Qe),d(p);var Me=u(p,2);let Je;var je=c(Me);{var Fe=z=>{var X=po(),ve=u(c(X),2),ce=c(ve,!0);d(ve),d(X),N(()=>k(ce,e(zi).row)),y(z,X)};I(je,z=>{e(zi)?.row&&z(Fe)})}var he=u(je,2);{var de=z=>{var X=go(),ve=u(c(X),2),ce=c(ve,!0);d(ve),d(X),N(()=>k(ce,e(zi).col)),y(z,X)};I(he,z=>{e(zi)?.col&&z(de)})}d(Me);var Ye=u(Me,2),Te=c(Ye);{var ct=z=>{var X=yo(),ve=c(X),ce=c(ve);d(ve),d(X),N(()=>k(ce,`No items to display. ${e(ur).length??""} rows, ${e(Ui).length??""} columns.`)),y(z,X)},Z=z=>{const X=M(()=>ai[e(U)]),ve=M(()=>ai[e(K)]);var ce=Eo(),Se=c(ce),Re=c(Se),wt=c(Re),ue=c(wt,!0);d(wt);var Ie=u(wt);et(Ie,17,()=>e(Ui),tt,(ut,_e)=>{var S=wo();let m;var Q=c(S);{var L=Y=>{var ee=_o(),be=c(ee,!0);d(ee),N(H=>k(be,H),[()=>e(ve).getLabel(e(_e))]),y(Y,ee)},W=Y=>{var ee=Mt();N(be=>k(ee,be),[()=>e(ve).getShortLabel(e(_e))]),y(Y,ee)};I(Q,Y=>{e(le)?Y(L):Y(W,!1)})}d(S),N(Y=>{m=at(S,1,"col-header svelte-1jef3w8",null,m,{highlighted:e(ge)===e(_e).id}),Wt(S,"title",Y)},[()=>e(ve).getLabel(e(_e))]),rr("mouseenter",S,()=>A(ge,e(_e).id,!0)),y(ut,S)}),d(Re),d(Se);var Oe=u(Se);et(Oe,21,()=>e(ur),tt,(ut,_e)=>{var S=xo();let m;var Q=c(S);let L;var W=c(Q);{var Y=H=>{var ne=mo(),te=c(ne,!0);d(ne),N(V=>k(te,V),[()=>e(X).getLabel(e(_e))]),y(H,ne)},ee=H=>{var ne=Mt();N(te=>k(ne,te),[()=>e(X).getShortLabel(e(_e))]),y(H,ne)};I(W,H=>{e(le)?H(Y):H(ee,!1)})}d(Q);var be=u(Q);et(be,17,()=>e(Ui),tt,(H,ne)=>{const te=M(()=>xi(e(U),e(_e).id,e(K),e(ne).id));var V=jo();let Ne;V.__click=()=>is(e(U),e(_e).id,e(K),e(ne).id);var xe=c(V);{var $e=Le=>{var Be=bo();y(Le,Be)},mt=Le=>{var Be=He(),Ue=oe(Be);{var we=nt=>{var ze=ko(),Xe=c(ze,!0);d(ze),N(()=>{at(ze,1,`cell-marker transitive-${e(te).direction??""}`,"svelte-1jef3w8"),k(Xe,e(te).direction==="downstream"?"":e(te).direction==="upstream"?"":"~")}),y(nt,ze)};I(Ue,nt=>{e(te)?.isTransitive&&nt(we)},!0)}y(Le,Be)};I(xe,Le=>{e(te)?.isDirect?Le($e):Le(mt,!1)})}d(V),N(()=>{Ne=at(V,1,"matrix-cell svelte-1jef3w8",null,Ne,{linked:e(te)?.isDirect,"transitive-downstream":e(te)?.isTransitive&&e(te)?.direction==="downstream","transitive-upstream":e(te)?.isTransitive&&e(te)?.direction==="upstream","transitive-sibling":e(te)?.isTransitive&&e(te)?.direction==="sibling","col-highlighted":e(ge)===e(ne).id,"row-highlighted":e(De)===e(_e).id}),Wt(V,"title",e(te)?.isDirect?"Direct link (click to edit)":e(te)?.isTransitive?`${e(te).direction==="downstream"?"Downstream":e(te).direction==="upstream"?"Upstream":"Sibling"} connection (click to create direct)`:"No connection (click to create)")}),rr("mouseenter",V,()=>{A(De,e(_e).id,!0),A(ge,e(ne).id,!0)}),y(H,V)}),d(S),N(H=>{m=at(S,1,"svelte-1jef3w8",null,m,{"row-highlighted":e(De)===e(_e).id}),L=at(Q,1,"row-label svelte-1jef3w8",null,L,{highlighted:e(De)===e(_e).id}),Wt(Q,"title",H)},[()=>e(X).getLabel(e(_e))]),rr("mouseenter",Q,()=>A(De,e(_e).id,!0)),y(ut,S)}),d(Oe),d(ce),N(()=>k(ue,e(X).label)),y(z,ce)};I(Te,z=>{e(ur).length===0||e(Ui).length===0?z(ct):z(Z,!1)})}d(Ye),N(()=>{rt=at(dt,1,"verbose-toggle svelte-1jef3w8",null,rt,{warning:e(fr).total>0}),Je=at(Me,1,"matrix-hover-info svelte-1jef3w8",null,Je,{"has-content":e(zi)})}),Vt(ye,()=>e(U),z=>A(U,z)),Vt(Ae,()=>e(K),z=>A(K,z)),yn(_t,()=>e(le),z=>A(le,z)),yn(Ce,()=>e(Ot),z=>A(Ot,z)),Et(qe,()=>e(D),z=>A(D,z)),rr("mouseleave",Ye,()=>{A(De,null),A(ge,null)}),y(l,h)},Ss=l=>{var h=He(),p=oe(h);{var w=ye=>{var J=Wo(),Ee=c(J),C=c(Ee),q=u(c(C),2),ke=c(q);ke.value=ke.__value="question";var pe=u(ke);pe.value=pe.__value="risk";var Ae=u(pe);Ae.value=Ae.__value="control",d(q);var ht=u(q,2);{var lt=Qe=>{var it=$o(),_t=c(it);_t.value=_t.__value="";var dt=u(_t);et(dt,17,()=>e(St).filter(rt=>!rt.showIf||Object.keys(rt.showIf).length===0),tt,(rt,Ce)=>{var Ge=Ao(),Ke=c(Ge);d(Ge);var qe={};N(Me=>{k(Ke,`${e(Ce).id??""}: ${Me??""}...`),qe!==(qe=e(Ce).id)&&(Ge.value=(Ge.__value=e(Ce).id)??"")},[()=>e(Ce).text.slice(0,50)]),y(rt,Ge)}),d(it),Vt(it,()=>e(Kt),rt=>A(Kt,rt)),y(Qe,it)},st=Qe=>{var it=He(),_t=oe(it);{var dt=Ce=>{var Ge=No(),Ke=c(Ge);Ke.value=Ke.__value="";var qe=u(Ke);et(qe,17,()=>e(Ct),tt,(Me,Je)=>{var je=Go(),Fe=c(je);d(je);var he={};N(()=>{k(Fe,`${e(Je).code??""}: ${e(Je).shortName??""}`),he!==(he=e(Je).id)&&(je.value=(je.__value=e(Je).id)??"")}),y(Me,je)}),d(Ge),Vt(Ge,()=>e(Kt),Me=>A(Kt,Me)),y(Ce,Ge)},rt=Ce=>{var Ge=Do(),Ke=c(Ge);Ke.value=Ke.__value="";var qe=u(Ke);et(qe,17,()=>e(Tt).slice(0,100),tt,(Me,Je)=>{var je=Lo(),Fe=c(je);d(je);var he={};N(de=>{k(Fe,`${e(Je).id??""}: ${de??""}...`),he!==(he=e(Je).id)&&(je.value=(je.__value=e(Je).id)??"")},[()=>e(Je).name.slice(0,40)]),y(Me,je)}),d(Ge),Vt(Ge,()=>e(Kt),Me=>A(Kt,Me)),y(Ce,Ge)};I(_t,Ce=>{e(vi)==="risk"?Ce(dt):Ce(rt,!1)},!0)}y(Qe,it)};I(ht,Qe=>{e(vi)==="question"?Qe(lt):Qe(st,!1)})}d(C),d(Ee);var kt=u(Ee,2),Qt=c(kt);{var vt=Qe=>{var it=Co();y(Qe,it)},xt=Qe=>{var it=He(),_t=oe(it);{var dt=Ce=>{var Ge=To(),Ke=c(Ge),qe=u(c(Ke)),Me=c(qe,!0);d(qe);var Je=u(qe);d(Ke),d(Ge),N(()=>{k(Me,e(vi)),k(Je,`: ${e(Kt)??""}`)}),y(Ce,Ge)},rt=Ce=>{var Ge=Bo(),Ke=oe(Ge);{const Fe=(he,de=pn,Ye=pn)=>{var Te=zo(),ct=c(Te);let Z;ct.__click=()=>!de().isPlaceholder&&A(yt,{type:de().type,id:de().id},!0);var z=c(ct);{var X=S=>{var m=Ro();m.__click=Q=>{Q.stopPropagation(),A(R,JSON.parse(JSON.stringify(de().link)),!0),A(gt,!0)},y(S,m)};I(z,S=>{de().link&&S(X)})}var ve=u(z,2),ce=c(ve,!0);d(ve);var Se=u(ve,2),Re=c(Se);{var wt=S=>{var m=Mt();N(()=>k(m,de().label)),y(S,m)},ue=S=>{var m=Io(),Q=oe(m),L=c(Q,!0);d(Q);var W=u(Q);N(()=>{k(L,de().shortLabel),k(W,`: ${de().label??""}`)}),y(S,m)};I(Re,S=>{de().isPlaceholder?S(wt):S(ue,!1)})}d(Se);var Ie=u(Se,2);{var Oe=S=>{var m=Oo(),Q=c(m,!0);d(m),N(()=>k(Q,de().children.length)),y(S,m)};I(Ie,S=>{de().children.length>0&&S(Oe)})}d(ct);var ut=u(ct,2);{var _e=S=>{var m=Uo();et(m,21,()=>de().children,tt,(Q,L)=>{Fe(Q,()=>e(L),()=>Ye()+1)}),d(m),y(S,m)};I(ut,S=>{de().children.length>0&&S(_e)})}d(Te),N(S=>{Is(Te,`--indent: ${Ye()??""}`),Z=at(ct,1,`trace-node ${de().type??""}`,"svelte-1jef3w8",Z,{selected:e(yt)?.type===de().type&&e(yt)?.id===de().id,placeholder:de().isPlaceholder}),k(ce,S),Wt(Se,"title",de().label)},[()=>de().type==="more"?"+":de().type.charAt(0).toUpperCase()]),y(he,Te)};var qe=c(Ke);Fe(qe,()=>e(Qi),()=>0);var Me=u(qe,2);et(Me,21,()=>Array.from(e(rs).entries()),tt,(he,de)=>{var Ye=M(()=>gn(e(de),2));let Te=()=>e(Ye)[0],ct=()=>e(Ye)[1];var Z=qo(),z=c(Z);d(Z),N(()=>{at(Z,1,`trace-stat ${Te()??""}`,"svelte-1jef3w8"),k(z,`${ct().length??""} ${Te()??""}${ct().length!==1?"s":""}`)}),y(he,Z)}),d(Me),d(Ke)}var Je=u(Ke,2);{var je=Fe=>{const he=M(()=>(()=>{const ce=e(yt).type,Se=e(yt).id;return ce==="question"?e(St).find(Re=>Re.id===Se):ce==="risk"?e(Ct).find(Re=>Re.id===Se):ce==="mitigation"?e(ei).find(Re=>Re.id===Se):ce==="control"?e(Tt).find(Re=>Re.id===Se):ce==="regulation"?e(si).find(Re=>Re.id===Se):null})());var de=Fo(),Ye=c(de),Te=c(Ye),ct=c(Te,!0);d(Te);var Z=u(Te,2);Z.__click=()=>A(yt,null),d(Ye);var z=u(Ye,2);{var X=ce=>{var Se=Po(),Re=oe(Se),wt=c(Re);{var ue=L=>{var W=Mt();N(()=>k(W,e(he).id)),y(L,W)},Ie=L=>{var W=He(),Y=oe(W);{var ee=H=>{var ne=Mt();N(()=>k(ne,e(he).code)),y(H,ne)},be=H=>{var ne=He(),te=oe(ne);{var V=xe=>{var $e=Mt();N(()=>k($e,e(he).code)),y(xe,$e)},Ne=xe=>{var $e=He(),mt=oe($e);{var Le=Ue=>{var we=Mt();N(()=>k(we,e(he).citation)),y(Ue,we)},Be=Ue=>{var we=He(),nt=oe(we);{var ze=Xe=>{var me=Mt();N(()=>k(me,e(he).id)),y(Xe,me)};I(nt,Xe=>{e(yt).type==="control"&&Xe(ze)},!0)}y(Ue,we)};I(mt,Ue=>{e(yt).type==="regulation"?Ue(Le):Ue(Be,!1)},!0)}y(xe,$e)};I(te,xe=>{e(yt).type==="mitigation"?xe(V):xe(Ne,!1)},!0)}y(H,ne)};I(Y,H=>{e(yt).type==="risk"?H(ee):H(be,!1)},!0)}y(L,W)};I(wt,L=>{e(yt).type==="question"?L(ue):L(Ie,!1)})}d(Re);var Oe=u(Re,2),ut=c(Oe);{var _e=L=>{var W=Mt();N(()=>k(W,e(he).text)),y(L,W)},S=L=>{var W=He(),Y=oe(W);{var ee=H=>{var ne=Mt();N(()=>k(ne,e(he).shortName)),y(H,ne)},be=H=>{var ne=He(),te=oe(ne);{var V=xe=>{var $e=Mt();N(()=>k($e,e(he).name)),y(xe,$e)},Ne=xe=>{var $e=He(),mt=oe($e);{var Le=Ue=>{var we=Mt();N(()=>k(we,e(he).description)),y(Ue,we)},Be=Ue=>{var we=He(),nt=oe(we);{var ze=Xe=>{var me=Mt();N(()=>k(me,e(he).name)),y(Xe,me)};I(nt,Xe=>{e(yt).type==="control"&&Xe(ze)},!0)}y(Ue,we)};I(mt,Ue=>{e(yt).type==="regulation"?Ue(Le):Ue(Be,!1)},!0)}y(xe,$e)};I(te,xe=>{e(yt).type==="mitigation"?xe(V):xe(Ne,!1)},!0)}y(H,ne)};I(Y,H=>{e(yt).type==="risk"?H(ee):H(be,!1)},!0)}y(L,W)};I(ut,L=>{e(yt).type==="question"?L(_e):L(S,!1)})}d(Oe);var m=u(Oe,2);m.__click=()=>{e(yt)?.type==="question"?(A(Gt,"questions"),ui(e(he))):e(yt)?.type==="risk"?(A(Gt,"risks"),ui(e(he))):e(yt)?.type==="regulation"?(A(Gt,"regulations"),ui(e(he))):e(yt)?.type==="control"&&(A(Gt,"controls"),ui(e(he)))};var Q=c(m);d(m),N(()=>k(Q,`Edit ${e(yt).type??""}`)),y(ce,Se)},ve=ce=>{var Se=Mo();y(ce,Se)};I(z,ce=>{e(he)?ce(X):ce(ve,!1)})}d(de),N(()=>{at(Te,1,`badge ${e(yt).type??""}`,"svelte-1jef3w8"),k(ct,e(yt).type)}),y(Fe,de)};I(Je,Fe=>{e(yt)&&Fe(je)})}y(Ce,Ge)};I(_t,Ce=>{e(Qi)?Ce(rt,!1):Ce(dt)},!0)}y(Qe,it)};I(Qt,Qe=>{e(Kt)?Qe(xt,!1):Qe(vt)})}d(kt),d(J),Vt(q,()=>e(vi),Qe=>A(vi,Qe)),y(ye,J)},G=ye=>{var J=He(),Ee=oe(J);{var C=q=>{var ke=Gl(),pe=oe(ke);{var Ae=S=>{var m=Ko(),Q=u(c(m)),L=c(Q,!0);d(Q);var W=u(Q,2);W.__click=()=>A(B,null),d(m),N(Y=>k(L,Y),[()=>Hi(e(B).type,e(B).id)]),y(S,m)},ht=S=>{var m=He(),Q=oe(m);{var L=W=>{var Y=Jo();y(W,Y)};I(Q,W=>{e(j)||W(L)},!0)}y(S,m)};I(pe,S=>{e(B)?S(Ae):S(ht,!1)})}var lt=u(pe,2),st=c(lt);let kt;st.__click=()=>A($,!e($));var Qt=c(st,!0);d(st);var vt=u(st,2);bt(vt),d(lt);var xt=u(lt,2),Qe=c(xt),it=c(Qe),_t=c(it),dt=u(c(_t),4),rt=c(dt,!0);d(dt),d(_t);var Ce=u(_t,2);et(Ce,21,()=>fi(e(St),S=>S.text,"question"),tt,(S,m)=>{const Q=M(()=>Pi("question",e(m).id)),L=M(()=>hs(e(m).id)),W=M(()=>e(j)?.type==="question"&&e(j)?.id===e(m).id),Y=M(()=>qi("question",e(m).id)),ee=M(()=>Ai("question",e(m).id)),be=M(()=>e($)&&e(j)&&!e(W)&&!e(Y));var H=He(),ne=oe(H);{var te=V=>{var Ne=Xo();let xe;Ne.__click=()=>ii("question",e(m).id),Ne.__keydown=Ve=>Ve.key==="Enter"&&ii("question",e(m).id);var $e=c(Ne),mt=c($e),Le=c(mt,!0);d(mt);var Be=u(mt,2),Ue=c(Be,!0);d(Be),d($e);var we=u($e,2),nt=c(we,!0);d(we);var ze=u(we,2);{var Xe=Ve=>{var We=Vo(),pt=c(We);{var Rt=fe=>{var Pe=Qo(),Dt=c(Pe);d(Pe),N(Nt=>{Wt(Pe,"title",`Depends on: ${Nt??""}`),k(Dt,` ${e(L).dependsOn.length??""}`)},[()=>e(L).dependsOn.join(", ")]),y(fe,Pe)};I(pt,fe=>{e(L).dependsOn.length>0&&fe(Rt)})}var zt=u(pt,2);{var $t=fe=>{var Pe=Yo(),Dt=c(Pe);d(Pe),N(Nt=>{Wt(Pe,"title",`Required by: ${Nt??""}`),k(Dt,`${e(L).dependedBy.length??""} `)},[()=>e(L).dependedBy.join(", ")]),y(fe,Pe)};I(zt,fe=>{e(L).dependedBy.length>0&&fe($t)})}d(We),y(Ve,We)};I(ze,Ve=>{(e(L).dependsOn.length>0||e(L).dependedBy.length>0)&&Ve(Xe)})}var me=u(ze,2);{var ft=Ve=>{var We=Ho(),pt=c(We,!0);d(We),N(()=>k(pt,e(ee).type)),y(Ve,We)};I(me,Ve=>{e(Y)&&e(ee)&&Ve(ft)})}var At=u(me,2);At.__click=Ve=>$i("question",e(m).id,Ve),d(Ne),N(()=>{xe=at(Ne,1,"node question svelte-1jef3w8",null,xe,{selected:e(W),connected:e(Y),"has-deps":e(L).dependsOn.length>0||e(L).dependedBy.length>0,connecting:e(B)?.type==="question"&&e(B)?.id===e(m).id}),k(Le,e(m).id),k(Ue,e(Q)),k(nt,e(m).text)}),y(V,Ne)};I(ne,V=>{e(be)||V(te)})}y(S,H)}),d(Ce),d(it);var Ge=u(it,2),Ke=c(Ge),qe=u(c(Ke),4),Me=c(qe,!0);d(qe),d(Ke);var Je=u(Ke,2);et(Je,21,()=>fi(e(Ct),S=>S.shortName+" "+S.name,"risk"),tt,(S,m)=>{const Q=M(()=>Pi("risk",e(m).id)),L=M(()=>e(j)?.type==="risk"&&e(j)?.id===e(m).id),W=M(()=>qi("risk",e(m).id)),Y=M(()=>Ai("risk",e(m).id)),ee=M(()=>e($)&&e(j)&&!e(L)&&!e(W));var be=He(),H=oe(be);{var ne=te=>{var V=el();let Ne;V.__click=()=>ii("risk",e(m).id),V.__keydown=me=>me.key==="Enter"&&ii("risk",e(m).id);var xe=c(V),$e=c(xe),mt=c($e,!0);d($e);var Le=u($e,2),Be=c(Le,!0);d(Le),d(xe);var Ue=u(xe,2),we=c(Ue,!0);d(Ue);var nt=u(Ue,2);{var ze=me=>{var ft=Zo(),At=c(ft,!0);d(ft),N(()=>k(At,e(Y).type)),y(me,ft)};I(nt,me=>{e(W)&&e(Y)&&me(ze)})}var Xe=u(nt,2);Xe.__click=me=>$i("risk",e(m).id,me),d(V),N(()=>{Ne=at(V,1,"node risk svelte-1jef3w8",null,Ne,{selected:e(L),connected:e(W),connecting:e(B)?.type==="risk"&&e(B)?.id===e(m).id}),k(mt,e(m).code),k(Be,e(Q)),k(we,e(m).shortName)}),y(te,V)};I(H,te=>{e(ee)||te(ne)})}y(S,be)}),d(Je),d(Ge);var je=u(Ge,2),Fe=c(je),he=u(c(Fe),4),de=c(he,!0);d(he),d(Fe);var Ye=u(Fe,2);et(Ye,21,()=>fi(e(ei),S=>S.name,"mitigation"),tt,(S,m)=>{const Q=M(()=>Pi("mitigation",e(m).id)),L=M(()=>e(Tt).filter(V=>V.subcategoryId===e(m).id).length),W=M(()=>e(j)?.type==="mitigation"&&e(j)?.id===e(m).id),Y=M(()=>qi("mitigation",e(m).id)),ee=M(()=>Ai("mitigation",e(m).id)),be=M(()=>e($)&&e(j)&&!e(W)&&!e(Y));var H=He(),ne=oe(H);{var te=V=>{var Ne=il();let xe;Ne.__click=()=>ii("mitigation",e(m).id),Ne.__keydown=We=>We.key==="Enter"&&ii("mitigation",e(m).id);var $e=c(Ne),mt=c($e),Le=c(mt,!0);d(mt);var Be=u(mt,2),Ue=c(Be,!0);d(Be),d($e);var we=u($e,2),nt=c(we,!0);d(we);var ze=u(we,2),Xe=c(ze),me=c(Xe);d(Xe),d(ze);var ft=u(ze,2);{var At=We=>{var pt=tl(),Rt=c(pt,!0);d(pt),N(()=>k(Rt,e(ee).type)),y(We,pt)};I(ft,We=>{e(Y)&&e(ee)&&We(At)})}var Ve=u(ft,2);Ve.__click=We=>$i("mitigation",e(m).id,We),d(Ne),N(()=>{xe=at(Ne,1,"node mitigation svelte-1jef3w8",null,xe,{selected:e(W),connected:e(Y),connecting:e(B)?.type==="mitigation"&&e(B)?.id===e(m).id}),k(Le,e(m).code),k(Ue,e(Q)),k(nt,e(m).name),k(me,`${e(L)??""} controls`)}),y(V,Ne)};I(ne,V=>{e(be)||V(te)})}y(S,H)}),d(Ye),d(je);var Te=u(je,2),ct=c(Te),Z=u(c(ct),4),z=c(Z,!0);d(Z),d(ct);var X=u(ct,2);et(X,21,()=>fi(e(si),S=>S.citation+" "+S.description,"regulation"),tt,(S,m)=>{const Q=M(()=>Pi("regulation",e(m).id)),L=M(()=>e(j)?.type==="regulation"&&e(j)?.id===e(m).id),W=M(()=>qi("regulation",e(m).id)),Y=M(()=>Ai("regulation",e(m).id)),ee=M(()=>e($)&&e(j)&&!e(L)&&!e(W));var be=He(),H=oe(be);{var ne=te=>{var V=nl();let Ne;V.__click=()=>ii("regulation",e(m).id),V.__keydown=me=>me.key==="Enter"&&ii("regulation",e(m).id);var xe=c(V),$e=c(xe),mt=c($e,!0);d($e);var Le=u($e,2),Be=c(Le,!0);d(Le),d(xe);var Ue=u(xe,2),we=c(Ue,!0);d(Ue);var nt=u(Ue,2);{var ze=me=>{var ft=rl(),At=c(ft,!0);d(ft),N(()=>k(At,e(Y).type)),y(me,ft)};I(nt,me=>{e(W)&&e(Y)&&me(ze)})}var Xe=u(nt,2);Xe.__click=me=>$i("regulation",e(m).id,me),d(V),N(()=>{Ne=at(V,1,"node regulation svelte-1jef3w8",null,Ne,{selected:e(L),connected:e(W),connecting:e(B)?.type==="regulation"&&e(B)?.id===e(m).id}),k(mt,e(m).citation),k(Be,e(Q)),k(we,e(m).description)}),y(te,V)};I(H,te=>{e(ee)||te(ne)})}y(S,be)}),d(X),d(Te);var ve=u(Te,2),ce=c(ve),Se=u(c(ce),4),Re=c(Se,!0);d(Se),d(ce);var wt=u(ce,2),ue=c(wt);et(ue,17,()=>e(Si).slice(0,50),tt,(S,m)=>{const Q=M(()=>Pi("control",e(m).id)),L=M(()=>os(e(m).id)),W=M(()=>e(Q)+e(L)),Y=M(()=>Xr(e(m).subcategoryId)),ee=M(()=>e(j)?.type==="control"&&e(j)?.id===e(m).id),be=M(()=>qi("control",e(m).id)),H=M(()=>Ai("control",e(m).id)),ne=M(()=>e($)&&e(j)&&!e(ee)&&!e(be));var te=He(),V=oe(te);{var Ne=xe=>{var $e=ll();let mt;$e.__click=()=>ii("control",e(m).id),$e.__keydown=fe=>fe.key==="Enter"&&ii("control",e(m).id);var Le=c($e),Be=c(Le),Ue=c(Be,!0);d(Be);var we=u(Be,2),nt=c(we,!0);d(we),d(Le);var ze=u(Le,2),Xe=c(ze,!0);d(ze);var me=u(ze,2),ft=c(me),At=c(ft,!0);d(ft);var Ve=u(ft,2);{var We=fe=>{var Pe=sl(),Dt=c(Pe,!0);d(Pe),N(()=>k(Dt,e(Y).code)),y(fe,Pe)};I(Ve,fe=>{e(Y)&&fe(We)})}d(me);var pt=u(me,2);{var Rt=fe=>{var Pe=al(),Dt=c(Pe,!0);d(Pe),N(()=>k(Dt,e(H).type)),y(fe,Pe)},zt=fe=>{var Pe=He(),Dt=oe(Pe);{var Nt=Yt=>{var ri=ol(),qt=c(ri);d(ri),N(()=>k(qt,`via ${(e(Y)?.code||"category")??""}`)),y(Yt,ri)};I(Dt,Yt=>{e(be)&&Yt(Nt)},!0)}y(fe,Pe)};I(pt,fe=>{e(be)&&e(H)?fe(Rt):fe(zt,!1)})}var $t=u(pt,2);$t.__click=fe=>$i("control",e(m).id,fe),d($e),N((fe,Pe)=>{mt=at($e,1,"node control svelte-1jef3w8",null,mt,{selected:e(ee),connected:e(be),connecting:e(B)?.type==="control"&&e(B)?.id===e(m).id}),k(Ue,fe),Wt(we,"title",`Direct: ${e(Q)??""}, Via category: ${e(L)??""}`),k(nt,e(W)),k(Xe,e(m).name),k(At,Pe)},[()=>e(m).id.split("_")[0],()=>e(m).phases?.map(fe=>fe.replace("phase-","P")).join(" ")]),y(xe,$e)};I(V,xe=>{e(ne)||xe(Ne)})}y(S,te)});var Ie=u(ue,2);{var Oe=S=>{var m=dl(),Q=c(m);d(m),N(()=>k(Q,`...and ${e(Si).length-50} more (use filters)`)),y(S,m)};I(Ie,S=>{e(Si).length>50&&S(Oe)})}d(wt),d(ve),d(Qe);var ut=u(Qe,2);{var _e=S=>{var m=$l(),Q=c(m),L=c(Q),W=c(L,!0);d(L);var Y=u(L,2);Y.__click=()=>A(j,null),d(Q);var ee=u(Q,2);{var be=Le=>{var Be=ul(),Ue=oe(Be),we=c(Ue,!0);d(Ue);var nt=u(Ue,2),ze=c(nt),Xe=c(ze);d(ze);var me=u(ze,2),ft=c(me);d(me);var At=u(me,2),Ve=c(At);d(At),d(nt);var We=u(nt,2),pt=u(c(We),2);et(pt,17,()=>e(ae).item.options,tt,(zt,$t)=>{var fe=cl(),Pe=c(fe,!0);d(fe),N(()=>k(Pe,e($t).label)),y(zt,fe)}),d(We);var Rt=u(We,2);Rt.__click=()=>{A(Gt,"questions"),ui(e(ae).item)},N(()=>{k(we,e(ae).item.text),k(Xe,`ID: ${e(ae).item.id??""}`),k(ft,`Type: ${e(ae).item.type??""}`),k(Ve,`Category: ${e(ae).item.category??""}`)}),y(Le,Be)},H=Le=>{var Be=He(),Ue=oe(Be);{var we=ze=>{var Xe=fl(),me=oe(Xe),ft=c(me,!0);d(me);var At=u(me,2),Ve=c(At),We=c(Ve);d(Ve);var pt=u(Ve,2),Rt=c(pt);d(pt),d(At);var zt=u(At,2),$t=c(zt,!0);d(zt);var fe=u(zt,2);fe.__click=()=>{A(Gt,"risks"),ui(e(ae).item)},N(()=>{k(ft,e(ae).item.name),k(We,`Code: ${e(ae).item.code??""}`),k(Rt,`Domain: ${e(ae).item.domain??""}`),k($t,e(ae).item.shortName)}),y(ze,Xe)},nt=ze=>{var Xe=He(),me=oe(Xe);{var ft=Ve=>{const We=M(()=>e(Tt).filter(qt=>qt.subcategoryId===e(ae).item?.id));var pt=gl(),Rt=oe(pt),zt=c(Rt,!0);d(Rt);var $t=u(Rt,2),fe=c($t),Pe=c(fe);d(fe);var Dt=u(fe,2),Nt=c(Dt);d(Dt),d($t);var Yt=u($t,2);{var ri=qt=>{var _i=pl(),oi=c(_i),Mi=c(oi);d(oi);var Xi=u(oi,2),Fi=c(Xi);et(Fi,17,()=>e(We).slice(0,10),tt,(wi,ni)=>{var mi=hl(),Bi=c(mi),mr=c(Bi,!0);d(Bi);var Gi=u(Bi,2),er=c(Gi,!0);d(Gi),d(mi),N(bi=>{k(mr,e(ni).name),k(er,bi)},[()=>e(ni).phases?.map(bi=>bi.replace("phase-","P")).join(", ")]),y(wi,mi)});var wr=u(Fi,2);{var Zi=wi=>{var ni=vl(),mi=c(ni);d(ni),N(()=>k(mi,`...and ${e(We).length-10} more`)),y(wi,ni)};I(wr,wi=>{e(We).length>10&&wi(Zi)})}d(Xi),d(_i),N(()=>k(Mi,`Controls (${e(We).length??""}):`)),y(qt,_i)};I(Yt,qt=>{e(We).length>0&&qt(ri)})}N(()=>{k(zt,e(ae).item.name),k(Pe,`Code: ${e(ae).item.code??""}`),k(Nt,`Category: ${e(ae).item.category??""}`)}),y(Ve,pt)},At=Ve=>{var We=He(),pt=oe(We);{var Rt=$t=>{var fe=yl(),Pe=oe(fe),Dt=c(Pe,!0);d(Pe);var Nt=u(Pe,2),Yt=c(Nt),ri=c(Yt,!0);d(Yt),d(Nt);var qt=u(Nt,2),_i=c(qt,!0);d(qt);var oi=u(qt,2);oi.__click=()=>{A(Gt,"regulations"),ui(e(ae).item)},N(()=>{k(Dt,e(ae).item.citation),k(ri,e(ae).item.framework),k(_i,e(ae).item.description)}),y($t,fe)},zt=$t=>{var fe=He(),Pe=oe(fe);{var Dt=Nt=>{const Yt=M(()=>Xr(e(ae).item.subcategoryId));var ri=jl(),qt=oe(ri),_i=c(qt,!0);d(qt);var oi=u(qt,2),Mi=c(oi),Xi=c(Mi);d(Mi);var Fi=u(Mi,2),wr=c(Fi);d(Fi),d(oi);var Zi=u(oi,2);{var wi=Ft=>{var Pt=_l(),Bt=c(Pt,!0);d(Pt),N(()=>k(Bt,e(ae).item.description)),y(Ft,Pt)};I(Zi,Ft=>{e(ae).item.description&&Ft(wi)})}var ni=u(Zi,2),mi=u(c(ni),2);{var Bi=Ft=>{var Pt=wl(),Bt=c(Pt);d(Pt),N(()=>k(Bt,`${e(Yt).code??""}: ${e(Yt).name??""}`)),y(Ft,Pt)},mr=Ft=>{var Pt=ml(),Bt=c(Pt,!0);d(Pt),N(()=>k(Bt,e(ae).item.subcategoryId)),y(Ft,Pt)};I(mi,Ft=>{e(Yt)?Ft(Bi):Ft(mr,!1)})}d(ni);var Gi=u(ni,2),er=u(c(Gi),2);et(er,21,()=>e(ae).item.phases||[],tt,(Ft,Pt)=>{var Bt=bl(),br=c(Bt,!0);d(Bt),N(Ls=>k(br,Ls),[()=>e(Pt).replace("phase-","P")]),y(Ft,Bt)}),d(er),d(Gi);var bi=u(Gi,2),hn=u(c(bi),2);et(hn,21,()=>e(ae).item.techTypes||[],tt,(Ft,Pt)=>{var Bt=kl(),br=c(Bt,!0);d(Bt),N(()=>k(br,e(Pt))),y(Ft,Bt)}),d(hn),d(bi);var Ns=u(bi,2);Ns.__click=()=>{A(Gt,"controls"),ui(e(ae).item)},N(()=>{k(_i,e(ae).item.name),k(Xi,`ID: ${e(ae).item.id??""}`),k(wr,`Source: ${e(ae).item.source??""}`)}),y(Nt,ri)};I(Pe,Nt=>{e(ae).type==="control"&&e(ae).item&&Nt(Dt)},!0)}y($t,fe)};I(pt,$t=>{e(ae).type==="regulation"&&e(ae).item?$t(Rt):$t(zt,!1)},!0)}y(Ve,We)};I(me,Ve=>{e(ae).type==="mitigation"&&e(ae).item?Ve(ft):Ve(At,!1)},!0)}y(ze,Xe)};I(Ue,ze=>{e(ae).type==="risk"&&e(ae).item?ze(we):ze(nt,!1)},!0)}y(Le,Be)};I(ee,Le=>{e(ae).type==="question"&&e(ae).item?Le(be):Le(H,!1)})}var ne=u(ee,2),te=c(ne),V=c(te);d(te);var Ne=u(te,2);{var xe=Le=>{var Be=xl();y(Le,Be)},$e=Le=>{var Be=Al();et(Be,21,()=>e(ae).connections,tt,(Ue,we)=>{const nt=M(()=>e(we).from.entity===e(ae).type&&e(we).from.id===e(ae).item?.id),ze=M(()=>e(nt)?e(we).to.entity:e(we).from.entity),Xe=M(()=>e(nt)?e(we).to.id:e(we).from.id);var me=Sl();me.__click=()=>{A(R,e(we),!0),A(gt,!0)};var ft=c(me),At=c(ft,!0);d(ft);var Ve=u(ft,2),We=c(Ve,!0);d(Ve);var pt=u(Ve,2),Rt=c(pt,!0);d(pt);var zt=u(pt,2);{var $t=fe=>{var Pe=El(),Dt=c(Pe,!0);d(Pe),N(Nt=>k(Dt,Nt),[()=>e(we).phases.map(Nt=>Nt.replace("phase-","P")).join(", ")]),y(fe,Pe)};I(zt,fe=>{e(we).phases&&fe($t)})}d(me),N(fe=>{at(ft,1,`conn-type ${e(we).type??""}`,"svelte-1jef3w8"),k(At,e(we).type),k(We,e(nt)?"":""),at(pt,1,`conn-target ${e(ze)??""}`,"svelte-1jef3w8"),k(Rt,fe)},[()=>Hi(e(ze),e(Xe))]),y(Ue,me)}),d(Be),y(Le,Be)};I(Ne,Le=>{e(ae).connections.length===0?Le(xe):Le($e,!1)})}d(ne);var mt=u(ne,2);mt.__click=()=>$i(e(ae).type,e(ae).item?.id||"",new Event("click")),d(m),N(()=>{at(L,1,`detail-type ${e(ae).type??""}`,"svelte-1jef3w8"),k(W,e(ae).type),k(V,`Connections (${e(ae).connections.length??""})`)}),y(S,m)};I(ut,S=>{e(ae)&&S(_e)})}d(xt),N(()=>{kt=at(st,1,"btn focus-toggle svelte-1jef3w8",null,kt,{active:e($)}),k(Qt,e($)?"Focus: ON":"Focus"),Wt(dt,"title",`${e(Br)??""} of ${e(St).length??""}`),k(rt,e(Br)),Wt(qe,"title",`${e(Wr)??""} of ${e(Ct).length??""}`),k(Me,e(Wr)),Wt(he,"title",`${e(Kr)??""} of ${e(ei).length??""}`),k(de,e(Kr)),Wt(Z,"title",`${e(Jr)??""} of ${e(si).length??""}`),k(z,e(Jr)),Wt(Se,"title",`${e(Qr)??""} of ${e(Si).length??""}`),k(Re,e(Qr))}),Et(vt,()=>e(D),S=>A(D,S)),y(q,ke)};I(Ee,q=>{e(T)==="graph"&&q(C)},!0)}y(ye,J)};I(p,ye=>{e(T)==="trace"?ye(w):ye(G,!1)},!0)}y(l,h)};I(xs,l=>{e(T)==="matrix"?l(Es):l(Ss,!1)})}d(hr);var fn=u(hr,2);{var As=l=>{var h=Kl(),p=c(h),w=c(p),G=c(w),ye=c(G);d(G);var J=u(G,2);J.__click=()=>{A(Ei,!1),A(P,null)},d(w);var Ee=u(w,2),C=c(Ee);{var q=vt=>{var xt=Ll(),Qe=oe(xt),it=u(c(Qe),2);bt(it),d(Qe);var _t=u(Qe,2),dt=u(c(_t),2);bt(dt),d(_t);var rt=u(_t,2),Ce=u(c(rt),2);bt(Ce),d(rt);var Ge=u(rt,2),Ke=u(c(Ge),2);bt(Ke),d(Ge);var qe=u(Ge,2),Me=u(c(qe),4);{var Je=je=>{var Fe=Nl(),he=oe(Fe),de=u(c(he),2);ki(de),d(he);var Ye=u(he,2),Te=u(c(Ye),2);ki(Te),d(Ye);var ct=u(Ye,2),Z=u(c(ct),2);ki(Z),d(ct),Et(de,()=>e(P).phaseGuidance["phase-1"],z=>e(P).phaseGuidance["phase-1"]=z),Et(Te,()=>e(P).phaseGuidance["phase-2"],z=>e(P).phaseGuidance["phase-2"]=z),Et(Z,()=>e(P).phaseGuidance["phase-3"],z=>e(P).phaseGuidance["phase-3"]=z),y(je,Fe)};I(Me,je=>{e(P).phaseGuidance&&je(Je)})}d(qe),Et(it,()=>e(P).code,je=>e(P).code=je),Et(dt,()=>e(P).shortName,je=>e(P).shortName=je),Et(Ce,()=>e(P).name,je=>e(P).name=je),Et(Ke,()=>e(P).domain,je=>e(P).domain=je),y(vt,xt)},ke=vt=>{var xt=He(),Qe=oe(xt);{var it=dt=>{var rt=Ul(),Ce=oe(rt),Ge=u(c(Ce),2);bt(Ge),d(Ce);var Ke=u(Ce,2),qe=u(c(Ke),2);ki(qe),d(Ke);var Me=u(Ke,2),Je=u(c(Me),2),je=c(Je);je.value=je.__value="yes-no";var Fe=u(je);Fe.value=Fe.__value="single-select";var he=u(Fe);he.value=he.__value="multi-select",d(Je),d(Me);var de=u(Me,2),Ye=u(c(de),2);bt(Ye),d(de);var Te=u(de,2),ct=u(c(Te),2);{var Z=ue=>{var Ie=Dl();y(ue,Ie)},z=ue=>{var Ie=Tl();et(Ie,21,()=>Object.entries(e(P).showIf),tt,(Oe,ut)=>{var _e=M(()=>gn(e(ut),2));let S=()=>e(_e)[0],m=()=>e(_e)[1];const Q=M(()=>e(St).find(V=>V.id===S()));var L=Cl(),W=c(L),Y=c(W,!0);d(W);var ee=u(W,4),be=c(ee);{var H=V=>{var Ne=Mt();N(xe=>k(Ne,xe),[()=>m().map(xe=>e(Q)?.options?.find(mt=>mt.value===xe)?.label||xe).join(" OR ")]),y(V,Ne)},ne=V=>{const Ne=M(()=>e(Q)?.options?.find($e=>$e.value===m()));var xe=Mt();N(()=>k(xe,e(Ne)?.label||m())),y(V,xe)};I(be,V=>{Array.isArray(m())?V(H):V(ne,!1)})}d(ee);var te=u(ee,2);te.__click=()=>{const V={...e(P).showIf};delete V[S()],e(P).showIf=Object.keys(V).length>0?V:void 0},d(L),N(()=>k(Y,e(Q)?.text||S())),y(Oe,L)}),d(Ie),y(ue,Ie)};I(ct,ue=>{!e(P).showIf||Object.keys(e(P).showIf).length===0?ue(Z):ue(z,!1)})}var X=u(ct,2),ve=c(X);ve.__change=()=>{A(Jt,[],!0)};var ce=c(ve);ce.value=ce.__value="";var Se=u(ce);et(Se,17,()=>e(St).filter(ue=>ue.id!==e(P).id),tt,(ue,Ie)=>{var Oe=Rl(),ut=c(Oe,!0);d(Oe);var _e={};N(S=>{Oe.disabled=e(P).showIf?.[e(Ie).id]!==void 0,k(ut,S),_e!==(_e=e(Ie).id)&&(Oe.value=(Oe.__value=e(Ie).id)??"")},[()=>e(Ie).text.length>50?e(Ie).text.slice(0,50)+"...":e(Ie).text]),y(ue,Oe)}),d(ve);var Re=u(ve,2);{var wt=ue=>{const Ie=M(()=>e(St).find(S=>S.id===e(gi)));var Oe=He(),ut=oe(Oe);{var _e=S=>{var m=Ol(),Q=oe(m),L=u(c(Q),2);et(L,17,()=>e(Ie).options,tt,(Y,ee)=>{var be=Il(),H=c(be);bt(H),H.__change=te=>{te.currentTarget.checked?A(Jt,[...e(Jt),e(ee).value],!0):A(Jt,e(Jt).filter(V=>V!==e(ee).value),!0)};var ne=u(H);d(be),N(te=>{Ni(H,te),k(ne,` ${e(ee).label??""}`)},[()=>e(Jt).includes(e(ee).value)]),y(Y,be)}),d(Q);var W=u(Q,2);W.__click=()=>{const Y={...e(P).showIf};Y[e(gi)]=e(Jt).length===1?e(Jt)[0]:[...e(Jt)],e(P).showIf=Y,A(gi,""),A(Jt,[],!0)},N(()=>W.disabled=e(Jt).length===0),y(S,m)};I(ut,S=>{e(Ie)?.options&&S(_e)})}y(ue,Oe)};I(Re,ue=>{e(gi)&&ue(wt)})}d(X),d(Te),Et(Ge,()=>e(P).id,ue=>e(P).id=ue),Et(qe,()=>e(P).text,ue=>e(P).text=ue),Vt(Je,()=>e(P).type,ue=>e(P).type=ue),Et(Ye,()=>e(P).category,ue=>e(P).category=ue),Vt(ve,()=>e(gi),ue=>A(gi,ue)),y(dt,rt)},_t=dt=>{var rt=He(),Ce=oe(rt);{var Ge=qe=>{var Me=zl(),Je=oe(Me),je=u(c(Je),2);bt(je),d(Je);var Fe=u(Je,2),he=u(c(Fe),2);ki(he),d(Fe);var de=u(Fe,2),Ye=u(c(de),2);bt(Ye),d(de),Et(je,()=>e(P).citation,Te=>e(P).citation=Te),Et(he,()=>e(P).description,Te=>e(P).description=Te),Et(Ye,()=>e(P).framework,Te=>e(P).framework=Te),y(qe,Me)},Ke=qe=>{var Me=He(),Je=oe(Me);{var je=Fe=>{var he=Fl(),de=oe(he),Ye=u(c(de),2);bt(Ye),d(de);var Te=u(de,2),ct=u(c(Te),2);bt(ct),d(Te);var Z=u(Te,2),z=u(c(Z),2);ki(z),d(Z);var X=u(Z,2),ve=u(c(X),2);bt(ve),d(X);var ce=u(X,2),Se=u(c(ce),2),Re=c(Se);Re.value=Re.__value="";var wt=u(Re);et(wt,17,()=>t.data.controlSubcategories,tt,(L,W)=>{var Y=ql(),ee=c(Y);d(Y);var be={};N(()=>{k(ee,`${e(W).code??""} ${e(W).name??""}`),be!==(be=e(W).id)&&(Y.value=(Y.__value=e(W).id)??"")}),y(L,Y)}),d(Se),d(ce);var ue=u(ce,2),Ie=u(c(ue),2);et(Ie,21,()=>x,tt,(L,W)=>{var Y=Pl(),ee=c(Y);bt(ee),ee.__change=H=>{H.currentTarget.checked?e(P).phases=[...e(P).phases||[],e(W).id]:e(P).phases=(e(P).phases||[]).filter(ne=>ne!==e(W).id)};var be=u(ee);d(Y),N(H=>{Ni(ee,H),k(be,` ${e(W).name??""}`)},[()=>e(P).phases?.includes(e(W).id)]),y(L,Y)}),d(Ie),d(ue);var Oe=u(ue,2),ut=u(c(Oe),2),_e=c(ut),S=c(_e);bt(S),S.__change=L=>{L.currentTarget.checked?e(P).techTypes=["all"]:e(P).techTypes=[]},ir(),d(_e);var m=u(_e,2);{var Q=L=>{var W=He(),Y=oe(W);et(Y,17,()=>t.data.modelTypes,tt,(ee,be)=>{var H=Ml(),ne=c(H);bt(ne),ne.__change=V=>{V.currentTarget.checked?e(P).techTypes=[...(e(P).techTypes||[]).filter(Ne=>Ne!=="all"),e(be).id]:e(P).techTypes=(e(P).techTypes||[]).filter(Ne=>Ne!==e(be).id)};var te=u(ne);d(H),N(V=>{Ni(ne,V),k(te,` ${e(be).name??""}`)},[()=>e(P).techTypes?.includes(e(be).id)]),y(ee,H)}),y(L,W)};I(m,L=>{e(P).techTypes?.includes("all")||L(Q)})}d(ut),d(Oe),N(L=>Ni(S,L),[()=>e(P).techTypes?.includes("all")]),Et(Ye,()=>e(P).id,L=>e(P).id=L),Et(ct,()=>e(P).name,L=>e(P).name=L),Et(z,()=>e(P).description,L=>e(P).description=L),Et(ve,()=>e(P).source,L=>e(P).source=L),Vt(Se,()=>e(P).subcategoryId,L=>e(P).subcategoryId=L),y(Fe,he)};I(Je,Fe=>{e(Gt)==="controls"&&Fe(je)},!0)}y(qe,Me)};I(Ce,qe=>{e(Gt)==="regulations"?qe(Ge):qe(Ke,!1)},!0)}y(dt,rt)};I(Qe,dt=>{e(Gt)==="questions"?dt(it):dt(_t,!1)},!0)}y(vt,xt)};I(C,vt=>{e(Gt)==="risks"?vt(q):vt(ke,!1)})}d(Ee);var pe=u(Ee,2),Ae=c(pe);{var ht=vt=>{var xt=Bl();xt.__click=_s,y(vt,xt)},lt=vt=>{var xt=Wl();y(vt,xt)};I(Ae,vt=>{e(Yi)?vt(lt,!1):vt(ht)})}var st=u(Ae,2),kt=c(st);kt.__click=()=>{A(Ei,!1),A(P,null)};var Qt=u(kt,2);Qt.__click=ys,d(st),d(pe),d(p),d(h),N(vt=>k(ye,`${e(Yi)?"New":"Edit"} ${vt??""}`),[()=>e(Gt).slice(0,-1)]),y(l,h)};I(fn,l=>{e(Ei)&&e(P)&&l(As)})}var $s=u(fn,2);{var Gs=l=>{var h=rd(),p=c(h),w=c(p),G=c(w),ye=c(G);d(G);var J=u(G,2);J.__click=()=>{A(gt,!1),A(R,null)},d(w);var Ee=u(w,2),C=c(Ee),q=c(C);q.__click=()=>{A(Zt,"from"),A(pi,"")};var ke=c(q);ir(),d(q);var pe=u(q,4);pe.__click=()=>{A(Zt,"to"),A(pi,"")};var Ae=c(pe);ir(),d(pe),d(C);var ht=u(C,2);{var lt=Z=>{var z=Yl(),X=c(z),ve=c(X),ce=c(ve);d(ve);var Se=u(ve,2);Se.__click=()=>A(Zt,null),d(X);var Re=u(X,2),wt=c(Re);bt(wt);var ue=u(wt,2),Ie=c(ue);Ie.value=Ie.__value="name";var Oe=u(Ie);Oe.value=Oe.__value="code";var ut=u(Oe);ut.value=ut.__value="category",d(ue),d(Re);var _e=u(Re,2);et(_e,21,()=>e(ps),tt,(S,m)=>{var Q=Jl();let L;Q.__click=()=>gs(e(m));var W=c(Q),Y=c(W,!0);d(W);var ee=u(W,2),be=c(ee,!0);d(ee);var H=u(ee,2),ne=c(H,!0);d(H),d(Q),N(()=>{L=at(Q,1,"entity-option svelte-1jef3w8",null,L,{selected:e(R)[e(Zt)]?.id===e(m).id}),at(W,1,`entity-code ${e(m).type??""}`,"svelte-1jef3w8"),k(Y,e(m).code),k(be,e(m).name),k(ne,e(m).category)}),y(S,Q)},S=>{var m=Ql();y(S,m)}),d(_e),d(z),N(()=>k(ce,`Select ${e(Zt)==="from"?"source":"target"}:`)),Et(wt,()=>e(pi),S=>A(pi,S)),Vt(ue,()=>e(Oi),S=>A(Oi,S)),y(Z,z)};I(ht,Z=>{e(Zt)&&Z(lt)})}var st=u(ht,2),kt=u(c(st),2);kt.__change=()=>{e(R).type==="trigger"?(e(R).from={entity:"question",id:e(St)[0]?.id||""},e(R).to={entity:"risk",id:e(Ct)[0]?.id||""}):e(R).type==="dependency"?(e(R).from={entity:"question",id:e(St)[0]?.id||""},e(R).to={entity:"question",id:e(St)[1]?.id||e(St)[0]?.id||""}):e(R).type==="mitigation"?(e(R).from={entity:"risk",id:e(Ct)[0]?.id||""},e(R).to={entity:"mitigation",id:e(ei)[0]?.id||""}):e(R).type==="regulation"?(e(R).from={entity:"risk",id:e(Ct)[0]?.id||""},e(R).to={entity:"regulation",id:e(si)[0]?.id||""}):e(R).type==="control"?(e(R).from={entity:"risk",id:e(Ct)[0]?.id||""},e(R).to={entity:"control",id:e(Tt)[0]?.id||""}):e(R).type==="implementation"&&(e(R).from={entity:"mitigation",id:e(ei)[0]?.id||""},e(R).to={entity:"control",id:e(Tt)[0]?.id||""})};var Qt=c(kt);Qt.value=Qt.__value="trigger";var vt=u(Qt);vt.value=vt.__value="dependency";var xt=u(vt);xt.value=xt.__value="mitigation";var Qe=u(xt);Qe.value=Qe.__value="regulation";var it=u(Qe);it.value=it.__value="control";var _t=u(it);_t.value=_t.__value="implementation";var dt=u(_t);dt.value=dt.__value="custom",d(kt),d(st);var rt=u(st,2),Ce=u(c(rt),2);et(Ce,21,()=>x,tt,(Z,z)=>{var X=Vl(),ve=c(X);bt(ve),ve.__change=Se=>{Se.currentTarget.checked?e(R).phases=[...e(R).phases||[],e(z).id]:e(R).phases=(e(R).phases||[]).filter(Re=>Re!==e(z).id)};var ce=u(ve);d(X),N(Se=>{Ni(ve,Se),k(ce,` ${e(z).name??""}`)},[()=>e(R).phases?.includes(e(z).id)||!1]),y(Z,X)}),d(Ce),d(rt);var Ge=u(rt,2);{var Ke=Z=>{const z=M(()=>Vi(e(R).from.id));var X=He(),ve=oe(X);{var ce=Se=>{var Re=Xl(),wt=oe(Re),ue=u(c(wt),2);et(ue,21,()=>e(z).options,tt,(S,m)=>{var Q=Hl(),L=c(Q);bt(L),L.__change=Y=>{Y.currentTarget.checked?e(R).answerValues=[...e(R).answerValues||[],e(m).value]:e(R).answerValues=(e(R).answerValues||[]).filter(ee=>ee!==e(m).value)};var W=u(L);d(Q),N(Y=>{Ni(L,Y),k(W,` ${e(m).label??""}`)},[()=>e(R).answerValues?.includes(e(m).value)||!1]),y(S,Q)}),d(ue),d(wt);var Ie=u(wt,2),Oe=u(c(Ie),2),ut=c(Oe);ut.value=ut.__value="OR";var _e=u(ut);_e.value=_e.__value="AND",d(Oe),d(Ie),Vt(Oe,()=>e(R).logic,S=>e(R).logic=S),y(Se,Re)};I(ve,Se=>{e(z)&&Se(ce)})}y(Z,X)};I(Ge,Z=>{e(R).type==="trigger"&&e(R).from.entity==="question"&&Z(Ke)})}var qe=u(Ge,2);{var Me=Z=>{var z=ed(),X=u(c(z),2);et(X,17,()=>x,tt,(ve,ce)=>{var Se=He(),Re=oe(Se);{var wt=ue=>{var Ie=Zl(),Oe=c(Ie),ut=c(Oe,!0);d(Oe);var _e=u(Oe,2);ki(_e),_e.__input=S=>{e(R).guidance||(e(R).guidance={}),e(R).guidance[e(ce).id]=S.currentTarget.value},d(Ie),N(()=>{k(ut,e(ce).short),Wt(_e,"placeholder",`Guidance for ${e(ce).name??""}...`),Rs(_e,e(R).guidance?.[e(ce).id]||"")}),y(ue,Ie)};I(Re,ue=>{e(R).phases?.includes(e(ce).id)&&ue(wt)})}y(ve,Se)}),d(z),y(Z,z)};I(qe,Z=>{e(R).type==="mitigation"&&Z(Me)})}var Je=u(qe,2);{var je=Z=>{var z=td(),X=u(c(z),2);bt(X),d(z),Et(X,()=>e(R).note,ve=>e(R).note=ve),y(Z,z)};I(Je,Z=>{e(R).type==="regulation"&&Z(je)})}d(Ee);var Fe=u(Ee,2),he=c(Fe);{var de=Z=>{var z=id();z.__click=us,y(Z,z)};I(he,Z=>{e(o).some(z=>z.id===e(R).id)&&Z(de)})}var Ye=u(he,2),Te=c(Ye);Te.__click=()=>{A(gt,!1),A(R,null)};var ct=u(Te,2);ct.__click=cs,d(Ye),d(Fe),d(p),d(h),N((Z,z,X)=>{k(ye,`${Z??""} Link`),at(q,1,`link-node-btn ${e(R).from.entity??""}`,"svelte-1jef3w8"),k(ke,`${z??""} `),at(pe,1,`link-node-btn ${e(R).to.entity??""}`,"svelte-1jef3w8"),k(Ae,`${X??""} `)},[()=>e(o).some(Z=>Z.id===e(R).id)?"Edit":"New",()=>Hi(e(R).from.entity,e(R).from.id),()=>Hi(e(R).to.entity,e(R).to.id)]),Vt(kt,()=>e(R).type,Z=>e(R).type=Z),y(l,h)};I($s,l=>{e(gt)&&e(R)&&l(Gs)})}N(()=>{rn=at(gr,1,"svelte-1jef3w8",null,rn,{active:e(T)==="matrix"}),nn=at(yr,1,"svelte-1jef3w8",null,nn,{active:e(T)==="trace"}),an=at(sn,1,"svelte-1jef3w8",null,an,{active:e(T)==="graph"})}),y(s,en),In()}On(["click","change","keydown","input"]);export{_d as component,yd as universal};
